{"version":3,"sources":["./src/$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/auth.resolve.ts","./src/app/auth.service.ts","./src/app/comments/chatter-box.component.html","./src/app/comments/chatter-box.component.ts","./src/app/comments/comments.component.html","./src/app/comments/comments.component.ts","./src/app/config.ts","./src/app/cookie-banner/cookie-banner.component.html","./src/app/cookie-banner/cookie-banner.component.ts","./src/app/cookie-banner/privacy-policy.component.html","./src/app/cookie-banner/privacy-policy.component.ts","./src/app/profile/profile.component.html","./src/app/profile/profile.component.ts","./src/app/services/data.service.ts","./src/app/services/dead-api.service.ts","./src/app/services/dialog.service.ts","./src/app/services/google-analytics.service.ts","./src/app/services/lightbox.service.ts","./src/app/services/player.service.ts","./src/app/services/types.ts","./src/app/shared/header.component.html","./src/app/shared/header.component.ts","./src/app/shared/input-dialog.component.html","./src/app/shared/input-dialog.component.ts","./src/app/shared/list-dialog.component.html","./src/app/shared/list-dialog.component.ts","./src/app/shared/map.component.html","./src/app/shared/map.component.ts","./src/app/shared/player.component.html","./src/app/shared/player.component.ts","./src/app/shared/search-dialog.component.html","./src/app/shared/search-dialog.component.ts","./src/app/shared/sharebuttons.component.html","./src/app/shared/sharebuttons.component.ts","./src/app/shared/showmap.component.html","./src/app/shared/showmap.component.ts","./src/app/shared/shows.component.html","./src/app/shared/shows.component.ts","./src/app/shared/weather.component.html","./src/app/shared/weather.component.ts","./src/app/shared/youtube.component.html","./src/app/shared/youtube.component.ts","./src/app/views/artifacts.component.html","./src/app/views/artifacts.component.ts","./src/app/views/artist.component.html","./src/app/views/artist.component.ts","./src/app/views/location.component.html","./src/app/views/location.component.ts","./src/app/views/mapselect.component.html","./src/app/views/mapselect.component.ts","./src/app/views/playlist.component.html","./src/app/views/playlist.component.ts","./src/app/views/recording.component.html","./src/app/views/recording.component.ts","./src/app/views/show.component.html","./src/app/views/show.component.ts","./src/app/views/song.component.html","./src/app/views/song.component.ts","./src/app/views/start.component.html","./src/app/views/start.component.ts","./src/app/views/venue.component.html","./src/app/views/venue.component.ts","./src/environments/environment.ts","./src/leaflet-fusesearch/src/leaflet.fusesearch.js","./src/main.ts"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;;AAEA;AACA,6E;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA,uD;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,0DAA0D,cAAc;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,cAAc;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;;ACvVA;AAAA;AAAA;AAAA;AAAA;AAA+C;AAGU;;;AAGzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,2EAAwB,uBAAgB,CAAC,6EAAU;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ShowComponent } from './views/show.component';\nimport { LocationComponent } from './views/location.component';\nimport { VenueComponent } from './views/venue.component';\nimport { SongComponent } from './views/song.component';\nimport { RecordingComponent } from './views/recording.component';\nimport { ArtistComponent } from './views/artist.component';\nimport { ArtifactsComponent } from './views/artifacts.component';\nimport { MapSelectComponent } from './views/mapselect.component';\nimport { StartComponent } from './views/start.component';\nimport { ProfileComponent } from './profile/profile.component';\nimport { APIResolver } from './auth.resolve';\nimport { CommentsComponent } from './comments/comments.component';\nimport { PrivacyPolicyComponent } from './cookie-banner/privacy-policy.component';\nimport { PlaylistComponent } from './views/playlist.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/mapselect', pathMatch: 'full' },\n  //{ path: '', component: MapSelectComponent, resolve: { loggedIn: APIResolver} },\n  { path: 'show', component: ShowComponent },\n  { path: 'show/:id', component: ShowComponent },\n  { path: 'location', component: LocationComponent },\n  { path: 'location/:id', component: LocationComponent },\n  { path: 'venue', component: VenueComponent },\n  { path: 'venue/:id', component: VenueComponent },\n  { path: 'song', component: SongComponent },\n  { path: 'song/:id', component: SongComponent },\n  { path: 'recording', component: RecordingComponent },\n  { path: 'recording/:id', component: RecordingComponent },\n  { path: 'artist', component: ArtistComponent },\n  { path: 'artist/:id', component: ArtistComponent },\n  { path: 'artifacts', component: ArtifactsComponent },\n  { path: 'artifacts/:types', component: ArtifactsComponent },\n  { path: 'mapselect', component: MapSelectComponent },\n  { path: 'about', component: StartComponent },\n  { path: 'profile', component: ProfileComponent, resolve: { loggedIn: APIResolver} },\n  { path: 'comments', component: CommentsComponent },\n  { path: 'dataprivacy', component: PrivacyPolicyComponent },\n  { path: 'playlist/:id', component: PlaylistComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","<div fxLayout=\"column\" fxFlexFill>\n  <div fxFlex><router-outlet></router-outlet>\n  </div>\n  <!--<footer *ngIf=\"!start\"><gd-player></gd-player></footer>-->\n  <footer>\n    <gd-player></gd-player>\n    <app-cookie-banner></app-cookie-banner>\n  </footer>\n</div>\n","import { Component, Inject } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { AuthService } from './auth.service';\nimport { TRACKINGID, TRACKING } from './config';\nimport { DOCUMENT } from '@angular/common';\nimport { PlayerService } from './services/player.service';\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.sass']\n})\n\n\nexport class AppComponent {\n  //protected start: Boolean;\n  //private cookieValue: string;\n  protected currentUser: any = { userName: '', userId: '' };\n\n  constructor(public router:Router, public auth: AuthService, @Inject(DOCUMENT) private doc: any, private player: PlayerService) {\n    //router.events.forEach((event) => {\n    //  if (router.url.includes('/about')) {  \n    //    this.start = true; \n    //  } else {\n    //    this.start = false; \n    //  }\n    //});\n\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    \n    this.router.events.subscribe(event => {\n      if(event instanceof NavigationEnd && TRACKING){\n          gtag('config', TRACKINGID, \n                {\n                  'page_path': event.urlAfterRedirects\n                }\n               );\n       }\n    }); \n\n\n  }\n\n  public ngOnInit() {\n    this.googleAnalytics();\n  }\n\n\n  private scriptHtml(html, src){\n    const s = this.doc.createElement('script');\n    s.type = 'text/javascript';\n    if (src) s.src = src;\n    if (html) s.innerHTML = html;\n    const head = this.doc.getElementsByTagName('head')[0];\n    head.appendChild(s);\n  }\n\n\n  private googleAnalytics() {\n    this.scriptHtml(`\n      // Set to the same value as the web property used on the site\n      var gaProperty = \"` + TRACKINGID + `\";\n  \n      // Disable tracking if the opt-out cookie exists.\n      var disableStr = 'ga-disable-' + gaProperty;\n  \n      // if (document.cookie.indexOf(disableStr + '=true') > -1) {\n      if (document.cookie.indexOf('gd-cookieconsent=') < 0) {\n        //alert('revoke!');\n        window[disableStr] = true;\n      }\n  \n      // Opt-in function\n      function gaOptIn() {\n        var oneYearFromNow = new Date();\n        oneYearFromNow.setFullYear(oneYearFromNow.getFullYear() + 1);\n        document.cookie = 'gd-cookieconsent=allow; expires=\"' + oneYearFromNow.toGMTString() + '\"';\n        \n        window[disableStr] = false;\n        //document.getElementById(\"cookiebanner\").remove();\n        window.location.reload()\n      }\n  \n      // Opt-out function\n      function gaOptOut() {\n        document.cookie = 'gd-cookieconsent=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_ga=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_gid=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_gat_gtag_` + TRACKINGID.replace(/-/g, '_') + `=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        window[disableStr] = true;\n        window.location.reload()\n      }\n    `, null);\n\n    // <!-- Global site tag (gtag.js) - Google Analytics -->\n    this.scriptHtml(null, 'https://www.googletagmanager.com/gtag/js');\n    this.scriptHtml( `\n      window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n    `, null)\n    this.scriptHtml(null, 'https://cdn.auth0.com/js/lock/11.23.1/lock.min.js');\n\n  }\n\n\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatMenuModule } from '@angular/material/menu';\n\nimport { LazyLoadImageModule } from 'ng-lazyload-image';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { ShowComponent } from './views/show.component';\nimport { LocationComponent } from './views/location.component';\nimport { VenueComponent } from './views/venue.component';\nimport { SongComponent } from './views/song.component';\nimport { RecordingComponent } from './views/recording.component';\nimport { ArtistComponent } from './views/artist.component';\nimport { ArtifactsComponent } from './views/artifacts.component';\nimport { MapSelectComponent} from './views/mapselect.component';\nimport { StartComponent} from './views/start.component';\n\n\nimport { HeaderComponent } from './shared/header.component';\nimport { MapComponent } from './shared/map.component';\nimport { WeatherComponent } from './shared/weather.component';\nimport { ShowsComponent } from './shared/shows.component';\nimport { PlayerComponent } from './shared/player.component';\nimport { ListDialogComponent } from './shared/list-dialog.component';\nimport { SearchDialogComponent } from './shared/search-dialog.component';\nimport { ShowMapComponent } from './shared/showmap.component';\n\nimport { DeadApiService } from './services/dead-api.service';\nimport { DataService } from './services/data.service';\nimport { PlayerService } from './services/player.service';\nimport { DialogService } from './services/dialog.service';\n\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\n\nimport { CookieService } from 'ngx-cookie-service';\n//import { ButtonDirective } from './button.directive';\nimport { ProfileComponent } from './profile/profile.component';\n\nimport { APIResolver } from './auth.resolve';\n//import { ChatterBoxModule } from './chatter-box';\nimport { CommentsComponent } from './comments/comments.component';\nimport { InputDialogComponent } from './shared/input-dialog.component';\nimport { CookieBannerComponent } from './cookie-banner/cookie-banner.component';\nimport { PrivacyPolicyComponent } from './cookie-banner/privacy-policy.component';\nimport {GoogleAnalyticsService} from './services/google-analytics.service';\n\nimport { ShareButtonsComponent } from './shared/sharebuttons.component';\nimport { ShareButtonsModule } from 'ngx-sharebuttons/buttons';\nimport { ShareIconsModule } from 'ngx-sharebuttons/icons';\n\nimport { ChatterBoxComponent } from './comments/chatter-box.component';\nimport { PlaylistComponent } from './views/playlist.component';\nimport { YouTubePlayerModule } from '@angular/youtube-player';\nimport { YoutubeComponent } from './shared/youtube.component';\n\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { Ng2CarouselamosModule } from 'ng2-carouselamos';\nimport { LightboxModule } from 'ngx-lightbox';\nimport { LightboxService } from './services/lightbox.service'\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ShowComponent,\n    LocationComponent,\n    VenueComponent,\n    SongComponent,\n    RecordingComponent,\n    ArtistComponent,\n    ArtifactsComponent,\n    HeaderComponent,\n    MapComponent,\n    WeatherComponent,\n    ShowsComponent,\n    PlayerComponent,\n    ListDialogComponent,\n    SearchDialogComponent,\n    ShowMapComponent,\n    MapSelectComponent,\n    StartComponent,\n    //ButtonDirective,\n    ProfileComponent,\n    CommentsComponent,\n    InputDialogComponent,\n    CookieBannerComponent,\n    PrivacyPolicyComponent,\n    ShareButtonsComponent,\n    ChatterBoxComponent,\n    PlaylistComponent,\n    YoutubeComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FlexLayoutModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    LazyLoadImageModule,\n    LeafletModule.forRoot(),\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    //ChatterBoxModule,\n    ShareButtonsModule,\n    ShareIconsModule,\n    YouTubePlayerModule,\n    NgSelectModule,\n    Ng2CarouselamosModule,\n    LightboxModule\n  ],\n  providers: [\n    DeadApiService,\n    DataService,\n    PlayerService,\n    DialogService,\n    {provide: LocationStrategy, useClass: HashLocationStrategy},\n    CookieService,\n    APIResolver,\n    {\n      provide: 'window',\n      useValue: window,\n    },\n    {\n      provide: 'document',\n      useValue: document,\n    },\n    GoogleAnalyticsService,\n    LightboxService\n  ],\n  bootstrap: [AppComponent],\n  entryComponents: [ListDialogComponent, SearchDialogComponent, InputDialogComponent], \n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { AuthService } from './auth.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class APIResolver implements Resolve<any> {\n  constructor(private auth: AuthService) {}\n\n  resolve(): Observable<boolean> {\n    console.log('resolve');\n    return this.auth.isAuthenticated$;\n    }\n\n\n  getUser(loggedIn) {\n    return {\n      userId: loggedIn.sub.split(\"|\")[1],\n      userName: loggedIn['http://example.com/username']\n    }\n  }\n\n}","import { Injectable } from '@angular/core';\nimport createAuth0Client from '@auth0/auth0-spa-js';\nimport Auth0Client from '@auth0/auth0-spa-js/dist/typings/Auth0Client';\nimport { from, of, Observable, BehaviorSubject, combineLatest, throwError } from 'rxjs';\nimport { tap, catchError, concatMap, shareReplay } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { AUTH0DOMAIN, AUTH0CLIENTID} from './config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // Create an observable of Auth0 instance of client\n  auth0Client$ = (from(\n    createAuth0Client({\n      domain: AUTH0DOMAIN,\n      client_id: AUTH0CLIENTID,\n\n\n      redirect_uri: `${window.location.origin}`\n    })\n  ) as Observable<Auth0Client>).pipe(\n    shareReplay(1), // Every subscription receives the same shared value\n    catchError(err => throwError(err))\n  );\n  // Define observables for SDK methods that return promises by default\n  // For each Auth0 SDK method, first ensure the client instance is ready\n  // concatMap: Using the client instance, call SDK method; SDK returns a promise\n  // from: Convert that resulting promise into an observable\n  isAuthenticated$ = this.auth0Client$.pipe(\n    concatMap((client: Auth0Client) => from(client.isAuthenticated())),\n    tap(res => this.loggedIn = res)\n  );\n  handleRedirectCallback$ = this.auth0Client$.pipe(\n    concatMap((client: Auth0Client) => from(client.handleRedirectCallback()))\n  );\n  // Create subject and public observable of user profile data\n  private userProfileSubject$ = new BehaviorSubject<any>(null);\n  userProfile$ = this.userProfileSubject$.asObservable();\n  // Create a local property for login status\n  loggedIn: boolean = null;\n\n  constructor(private router: Router) {\n    // On initial load, check authentication state with authorization server\n    // Set up local auth streams if user is already authenticated\n    this.localAuthSetup();\n    // Handle redirect from Auth0 login\n    this.handleAuthCallback();\n  }\n\n  // When calling, options can be passed if desired\n  // https://auth0.github.io/auth0-spa-js/classes/auth0client.html#getuser\n  getUser$(options?): Observable<any> {\n    return this.auth0Client$.pipe(\n      concatMap((client: Auth0Client) => from(client.getUser(options))),\n      tap(user => this.userProfileSubject$.next(user))\n    );\n  }\n\n  private localAuthSetup() {\n    // This should only be called on app initialization\n    // Set up local authentication streams\n    const checkAuth$ = this.isAuthenticated$.pipe(\n      concatMap((loggedIn: boolean) => {\n        if (loggedIn) {\n          // If authenticated, get user and set in app\n          // NOTE: you could pass options here if needed\n          return this.getUser$();\n        }\n        // If not authenticated, return stream that emits 'false'\n        return of(loggedIn);\n      })\n    );\n    checkAuth$.subscribe();\n  }\n\n  login(redirectPath: string = this.router.url) {\n    // A desired redirect path can be passed to login method\n    // (e.g., from a route guard)\n    // Ensure Auth0 client instance exists\n    this.auth0Client$.subscribe((client: Auth0Client) => {\n      // Call method to log in\n      client.loginWithRedirect({\n        redirect_uri: `${window.location.origin}`,\n        appState: { target: redirectPath }\n      });\n    });\n  }\n\n  private handleAuthCallback() {\n    // Call when app reloads after user logs in with Auth0\n    const params = window.location.search;\n    if (params.includes('code=') && params.includes('state=')) {\n      let targetRoute: string; // Path to redirect to after login processsed\n      const authComplete$ = this.handleRedirectCallback$.pipe(\n        // Have client, now call method to handle auth callback redirect\n        tap(cbRes => {\n          // Get and set target redirect route from callback results\n          targetRoute = cbRes.appState && cbRes.appState.target ? cbRes.appState.target : this.router.url;\n        }),\n        concatMap(() => {\n          // Redirect callback complete; get user and login status\n          return combineLatest([\n            this.getUser$(),\n            this.isAuthenticated$\n          ]);\n        })\n      );\n      // Subscribe to authentication completion observable\n      // Response will be an array of user and login status\n      authComplete$.subscribe(([user, loggedIn]) => {\n        // Redirect to target route after callback processing\n        this.router.navigate([targetRoute]);\n      });\n    }\n  }\n\n  logout() {\n    // Ensure Auth0 client instance exists\n    this.auth0Client$.subscribe((client: Auth0Client) => {\n      // Call method to log out\n      client.logout({\n        client_id: AUTH0CLIENTID,\n        returnTo: `${window.location.origin}`\n      });\n    });\n  }\n\n}","<!-- based on iam_vishalkhare-chatter-box -->\n\n<div class=\"vis-chat-window\">\n    <div class=\"vis-chat-window-header\">\n\n    <!-- <img *ngIf=\"headerImage !== null && headerImage !== undefined\"\n                            [src]=\"headerImage\"\n                            alt=\"user\"\n                            class=\"user-image\"/> -->\n\n        <div class=\"vis-chat-window-header-text\">\n            Comments <!--{{heading}}-->\n        </div>\n    </div>\n    <div class=\"vis-chat-window-body\" #scrollMe [scrollTop]=\"scrollMe.scrollHeight\">\n        <div class=\"error-div\" *ngIf=\"showErrorDiv\">\n            {{errorMsg}}\n        </div>\n        <div *ngIf=\"!showErrorDiv\">\n            <div *ngFor=\"let comment of allComments\">\n              <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'comment-currentUser' : 'comment') :'comment'\">\n\n                <!-- <div class=\"col-2\">\n                    <img *ngIf=\"!showImageOrDiv(comment)\"\n                            src=\"{{comment.userImagePath}}\"\n                            alt=\"user\"\n                            class=\"user-image\"\n                    />\n                    <div *ngIf=\"showImageOrDiv(comment)\" class=\"user-image color-gray\">\n                      {{comment.userName[0]}}\n                    </div>\n                </div> -->\n\n                <div class=\"comment-bubble col-10\" [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'comment-bubble-currentUser col-10' : 'comment-bubble col-10') :'comment-bubble col-10'\">\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'user-name' : 'user-name color-gray') :'user-name color-gray'\">\n                        {{comment.userName}}\n                    </div>\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'user-comment' : 'user-comment color-gray') :'user-comment color-gray'\">\n                        {{comment.msg}}\n                    </div>\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'timestamp' : 'timestamp color-gray') :'timestamp color-gray'\">\n                        {{comment.timestamp}} \n                        <button *ngIf=\"comment.userId == currentUserId\" (click)=\"onDeleteButton(comment)\">delete</button>\n                        <button *ngIf=\"comment.userId != currentUserId\"(click)=\"onReportButton(comment)\">report</button>\n                    </div>\n                    \n                </div>\n              </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"vis-chat-window-footer\">\n        <div>\n          <textarea *ngIf=\"currentUserId\" id=\"vis-comment-textField\" placeholder=\"{{placeholderText}}\"\n                [(ngModel)]=\"commentText\"\n                (keyup)=\"onKeyUp(commentText)\"\n                maxlength=\"{{inputMaxLength}}\"></textarea>\n          <button *ngIf=\"currentUserId\" type=\"button\" (click)=\"addComment(commentText)\">send</button> \n          <button style=\"float: right; margin-right: 16px;\" (click)=\"onRefreshButton()\">refresh</button>\n        </div>\n        <div *ngIf=\"currentUserId\" class=\"character-count\">\n            {{typedCommentTextLength}} / {{inputMaxLength}} characters\n        </div>\n        \n    </div>\n  </div>","import { EventEmitter, Component, Input, Output } from '@angular/core';\nimport { isUndefined } from 'util';\nimport { CommentPayload } from '../services/types'\n\n\n@Component({\n    selector: 'gd-chatterbox',\n    templateUrl: './chatter-box.component.html',\n    styleUrls: ['./chatter-box.component.css']\n  })\n\n\n  export class ChatterBoxComponent {\n    constructor() {}\n\n    @Input() heading: string;\n    @Input() headerImage: string;\n    @Input() showErrorDiv: string;\n    @Input() errorMsg: string;\n    @Input() allComments: CommentPayload[];\n    @Input() inputMaxLength: number;\n    @Input() placeholderText: string;\n    @Input() currentUserId: string;\n\n    @Output() valueChange = new EventEmitter();\n    @Output() onKeyupEnter = new EventEmitter();\n    @Output() onKeyup = new EventEmitter();\n    @Output() emitReport = new EventEmitter();\n    @Output() emitDelete = new EventEmitter();\n    @Output() emitRefresh = new EventEmitter();\n\n    public typedCommentTextLength: number;\n    public commentText: string;\n\n\n\n\n    ngOnInit() { }\n\n    protected showImageOrDiv(comment){\n        return isUndefined(comment.userImagePath);\n    }\n\n    addComment(comment){\n        this.onKeyupEnter.emit(comment);\n        this.commentText = '';\n    }\n\n    onKeyUp(input){\n        this.onKeyup.emit(input);\n        this.typedCommentTextLength = input.length;\n    }\n\n    protected onDeleteButton(input){\n        this.emitDelete.emit(input);\n    }\n\n    onRefreshButton(){\n        this.emitRefresh.emit();\n    }\n\n    protected onReportButton(input){\n        this.emitReport.emit(input);\n    }\n\n  }","\n<div  style=\"height: auto; width: auto;\">\n  <gd-chatterbox *ngIf='heading != \"\"'\n      [heading]=heading\n      [headerImage]=headerImage\n      [allComments]=allComments\n      [inputMaxLength]=1000\n      [currentUserId]=currentUserId\n      [showErrorDiv]=showErrorDiv\n      [errorMsg]=errorMsg\n      [placeholderText]=placeholderText\n      (onKeyupEnter)=sendMessage($event)\n      (emitReport)=onReportComment($event)\n      (emitDelete)=onDeleteComment($event)\n      (emitRefresh)=getComments()\n  >\n  </gd-chatterbox>\n\n  <gd-chatterbox *ngIf='heading == \"\"'\n      heading=\"\"\n      [headerImage]=headerImage\n      [allComments]=allComments\n      [inputMaxLength]=0\n      [showErrorDiv]=showErrorDiv\n      [errorMsg]=errorMsg\n      placeholderText=\"please log in to comment\"\n  >\n  </gd-chatterbox>\n</div>\n\n\n\n","import { Component, OnInit, Input, ChangeDetectorRef } from '@angular/core';\nimport { CommentPayload } from '../services/types';\nimport { Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n@Component({\n  selector: 'gd-comments',\n  templateUrl: './comments.component.html',\n  styleUrls: ['./comments.component.sass']\n})\nexport class CommentsComponent implements OnInit {\n  constructor(private data: DataService, private router: Router,  private dialog: DialogService, private changeDetectorRef: ChangeDetectorRef) { }\n\n  @Input() title: string;\n  @Input() userName: string;\n  @Input() heading = 'comments';\n  //headerImage  =  '../assets/logo.png';\n  showErrorDiv:  boolean;\n  errorMsg  =  'This is an error';\n  inputMaxLength  =  100;\n  placeholderText=  'Write a comment!';\n  @Input() currentUserId:  string;\n  allComments:  Array<CommentPayload>;\n\n\n  ngOnInit() { \n   this.getComments();\n  }\n\n  async sendMessage(msgPayload:  string) {\n      // Constructing a desired object of type CommentPayload to be added to allComments\n      if (msgPayload){\n        //var msgId = Math.floor(1000000000000000 + Math.random() * 9000000000000000);\n        var msgId = this.makeid()\n        var timestamp = new Date;\n        const  payload  = {\n            msgId:  msgId,\n            msg:  msgPayload,\n            timestamp:  timestamp.getTime().toString(),\n            userName:  this.userName,\n            userId: this.currentUserId\n        };\n        try {\n          await this.addComment(payload);\n      } catch (e) {\n          console.error(e);\n      } \n      if (await this.checkComment(msgId)){\n        payload.timestamp = this.formatTime(timestamp);\n        this.allComments.push(payload);\n      }\n    }\n  }\n      \n  onKeyUp(msgPayload:  string) {\n      //console.log(msgPayload);  // doesn't work\n  }\n\n  async getComments(){\n    var res =  await this.data.getComments(this.router.url);\n    if (res != []){\n      res.sort(function(a, b) { return a.timestamp - b.timestamp });\n      for (var i in res) {\n        res[i].timestamp = this.formatTime(new Date(Number(res[i].timestamp)));\n      }\n      this.allComments = res;\n    } else {\n      this.allComments = [];\n    }\n    this.changeDetectorRef.detectChanges();\n  }\n\n\n\n  async addComment(p){\n    await this.data.addComment(p, this.router.url, this.currentUserId, this.title);\n  }\n\n  async checkComment(msgId) {\n    //console.log(msgId)\n    var b = Boolean(Number(await this.data.checkComment(msgId)));\n    //console.log(b);\n    return b\n  }\n\n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  protected onReportComment(msg) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to report this message?\",\n      [\"yes\", \"no\"],\n      [() => this.reportComment(msg), \n        () => null]\n    );\n  }\n\n  protected onDeleteComment(msgId) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to delete this message?\",\n      [\"yes\", \"no\"],\n      [() => this.deleteComment(msgId), \n        () => null]\n    );\n  }\n\n  async reportComment(msg) {\n    var m = await this.data.sendCommentReport(msg, this.currentUserId);\n    if (m.startsWith('250')) {\n      var dm = 'Report sent';\n    } else {\n      var dm = 'Error sending report';\n    }\n    this.dialog.openSingleFunction( dm, [\"ok\"], () => null );\n  }\n\n  async deleteComment(msg) {\n    //console.log(msg.msgId)\n    var d = await this.data.deleteComment(msg.msgId, this.currentUserId);\n    if (!(await this.checkComment(msg.msgId))){\n      console.log('comment '+msg.msgId+' deleted');\n      const i = this.allComments.indexOf(msg);\n      if (i > -1) {\n        this.allComments.splice(i, 1);\n        this.changeDetectorRef.detectChanges();\n      }\n    }\n  }\n\n  private makeid() {\n    var result           = '';\n    var characters       = 'abcdef0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < 24; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n }\n   \n}\n","export const AUTH0DOMAIN = 'gdconcertexplorer.eu.auth0.com';\nexport const AUTH0CLIENTID = 'MgqjkApiGjSzMcFwjzUiyoNJK6z8iWEb';\nexport const EMAILADDRESS = 'gdconcertexplorer@gmail.com';\nexport const TRACKINGID = 'UA-165369751-1';\nexport const TRACKING = false;\n//export const API_URL = 'http://localhost:8060/';\n//export const API_URL = 'http://25.86.166.144:8060/';\n//export const API_URL = 'https://grateful-dead-api.herokuapp.com/';\n//export const FRONTEND_URL = 'http://localhost:4200/';\nexport const FRONTEND_URL = 'https://grateful-dead-live.github.io/';\nexport const API_URL = 'https://cors-anywhere.herokuapp.com/http://82.5.176.6:8080/'\nexport const DEBUG = false;\n","<div *ngIf=\"showBanner\" class=\"banner\" id=\"cookiebanner\">\n  <p>\n    For continuous improvement of user experience this website uses  cookies for collecting your IP address and individual statistics.\n    See our <a routerLink=\"/dataprivacy\">data protection guideline</a> for further information and opt-out.\n    By clicking OK you agree to share your data. \n  </p>\n\n  <!--button (click)=\"agreeToShare()\">OK</button-->\n  <button onclick=\"gaOptIn()\">Agree</button>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service'; // https://itnext.io/angular-8-how-to-use-cookies-14ab3f2e93fc\n\n@Component({\n  selector: 'app-cookie-banner',\n  templateUrl: './cookie-banner.component.html',\n  styleUrls: ['./cookie-banner.component.sass']\n})\nexport class CookieBannerComponent implements OnInit {\n\npublic constructor(private cookieService: CookieService) { //, @Inject('window')  private window) {\n}\n\npublic showBanner: Boolean;\n\npublic ngOnInit() {\n  const consent = this.cookieService.get('gd-cookieconsent')\n  if (consent == 'allow') {\n    this.showBanner = false;\n  } else {\n    this.showBanner = true;\n  }\n}\n\n  private setCookie(cname, cvalue, exdays) {\n    const d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    this.cookieService.set(cname, cvalue, d, '/');\n  }\n\n  public agreeToShare() {\n    this.setCookie('gd-cookieconsent', 'allow', 365);\n    //this.window.location.reload();\n  }\n\n}\n","\n<div>\n <gd-header title=\"Privacy Policy\" subtitle=\"\">\n</gd-header>\n    <div>\n        Privacy Policy\n    </div>\n    <!--button (click)=\"agreeToShare()\">Agree</button-->\n    <!--button (click)=\"removeCookie()\">Revoke</button-->\n    <br>\n    <button onclick=\"gaOptIn()\">Agree</button>\n    <button onclick=\"gaOptOut()\">Revoke</button>\n\n</div>","import { Component, OnInit, Inject } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service'; \nimport { TRACKINGID } from '../config'\n\n@Component({\n  selector: 'privacy-policy',\n  templateUrl: './privacy-policy.component.html',\n  styleUrls: ['./privacy-policy.component.sass']\n})\nexport class PrivacyPolicyComponent implements OnInit {\n\n  public constructor(private cookieService: CookieService,\n              @Inject('window') private window) {\n  }\n\n  public showBanner: Boolean;\n\n\n  public ngOnInit() {\n  }\n\n  public removeCookie() {\n      this.cookieService.delete('gd-cookieconsent');\n      this.cookieService.delete('_ga');\n      this.cookieService.delete('_gid');\n      this.cookieService.delete('_gat_gtag_' + TRACKINGID.replace(/-/g, '_'));\n      this.window.location.reload();\n  }\n\n  private setCookie(cname, cvalue, exdays) {\n    const d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    this.cookieService.set(cname, cvalue, d);\n  }\n\n  public agreeToShare() {\n    this.setCookie('gd-cookieconsent', 'allow', 365);\n    this.window.location.reload();\n  }\n\n\n}\n","\n<!--<div *ngIf=\"auth.userProfile$ | async as profile\">\n<gd-header title='Profile' subtitle='{{ profile[\"http://example.com/username\"]}}'></gd-header>-->\n<div *ngIf=\"currentUser\">\n  <gd-header title='Profile' subtitle='{{ currentUser.userName }}' userId='{{ currentUser.userId }}'></gd-header>\n  <br><b>User Info</b><br>\n  <!--pre>\n    <code>{{ userProfile | json }}</code>\n  </pre-->\n\n  <i>{{'Username:  '}} </i>{{ userProfile['http://example.com/username'] }}\n  <br><i>{{'Email:  '}} </i> {{ userProfile.email }}\n\n\n  <br><br><b>Bookmarks</b><br>\n  <div *ngIf=\"!bookmarks\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n  <div *ngIf=\"bookmarks\">\n      <div *ngFor=\"let b of bookmarks\">\n            {{b.timestamp}} <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"b.route\">{{ b.title }}</u>\n            <button mat-icon-button (click)=\"onDeleteBookmark(b)\"><mat-icon>clear</mat-icon></button>  \n      </div>\n  </div>\n\n  <br><b>Likes</b><br>\n  <div *ngIf=\"!likes || likes.length==0\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n\n  <div *ngIf=\"likes\">\n      <div *ngFor=\"let l of likes\">\n          {{l.timestamp}} <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"l.route\">{{ l.title }}</u>\n          <button mat-icon-button (click)=\"onUnlike(l)\"><mat-icon>clear</mat-icon></button>  \n      </div>\n  </div>\n\n  <br><b>Commented on</b><br>\n  <div *ngIf=\"!comments\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n  <div *ngIf=\"comments\"> \n    <div *ngFor=\"let c of comments\">\n      <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"c.route\">{{ c.title }}</u>\n    </div>\n  </div>\n\n  <br><b>Playlists</b><br>\n  \n  <div *ngIf=\"player.playlists\">\n    <div *ngIf=\"!player.playlistsLoaded\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n      <mat-spinner diameter=\"30\"></mat-spinner>\n    </div>\n    <div *ngFor=\"let p of player.playlists\">\n      <div> {{ p.timestamp }} \"{{ p.name }}\"\n        <button mat-icon-button (click)=\"loadPlaylist(p.playlist)\"><mat-icon>library_music</mat-icon></button> \n        <button mat-icon-button (click)=\"delPlaylist(p.id, p.name)\"><mat-icon>clear</mat-icon></button>   \n        \n      </div>\n      <div *ngFor=\"let t of p.playlist; index as i\">\n        <small>{{i+1}}. {{ t.title }}</small>\n      </div>\n      <share-buttons [theme]=\"'default'\"\n        [include]=\"['facebook','twitter','pinterest','reddit','tumblr','mix','copy']\"\n        url = \"{{frontend_url + '#/playlist/' + p.id}}\"\n        [show]=\"7\"\n        [size]=\"-7\"\n        [title]=\"'Grateful Dead Concert Explorer Playlist'\"\n        [tags]=\"'GratefulDeadExplorer,GratefulDead,playlist'\"\n        >\n      </share-buttons>\n    <br>\n    </div>\n  </div>\n</div>\n\n<div *ngIf=\"!currentUser\">\n  <gd-header title='Profile'></gd-header>\n  <pre>you are not logged in</pre>\n</div>\n\n<p [style.margin-bottom]=\"'75px'\"></p>\n\n\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport { DataService } from '../services/data.service';\nimport { APIResolver } from '../auth.resolve';\nimport { ActivatedRoute } from '@angular/router';\nimport { DialogService } from '../services/dialog.service';\nimport { PlayerService } from '../services/player.service';\nimport { FRONTEND_URL, DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.sass']\n})\nexport class ProfileComponent implements OnInit {\n  constructor(public auth: AuthService, private data: DataService, public resolve: APIResolver, private route: ActivatedRoute,\n    private dialog: DialogService, private player: PlayerService) { \n\n      \n    }\n\n  public currentUser: any;\n  //protected authenticated: boolean;\n  protected userProfile: any;\n  protected bookmarks: any;\n  protected likes: any;\n  protected comments: any;\n  public frontend_url = FRONTEND_URL;\n  //public domain = DOMAIN;\n  //protected playlists: any;\n    \n\n  ngOnInit() {  \n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.userProfile = userProfile;\n        this.currentUser = this.resolve.getUser(userProfile);\n        gtag('set', {'user_id': this.currentUser.userId});\n        this.getBookmarks();\n        this.getLikes();\n        this.getComments();\n      });\n    }\n\n    /*\n    if (this.currentUser){\n      this.getBookmarks();\n        this.getComments();\n        this.getPlaylists();\n    }\n    */\n\n/*\n    if (this.authenticated == true) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = userProfile;\n        this.userId = this.currentUser.sub.split(\"|\")[1];\n        this.userName = this.currentUser['http://example.com/username'];\n      });\n    console.log(this.userId)\n    }*/\n  }\n\n  async getBookmarks(){\n    var result = await this.data.getBookmarks(this.currentUser.userId);\n    if (result[0].bookmarks) {\n      var m = result[0].bookmarks;\n      m.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      m.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.bookmarks = m;\n    };\n  }\n\n  async getLikes(){\n    var result = await this.data.getLikes(this.currentUser.userId);\n    if (result[0].likes) {\n      var l = result[0].likes;\n      l.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      l.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.likes = l;\n    };\n  }\n\n\n  async getComments(){\n    var result = await this.data.getUserComments(this.currentUser.userId);\n    if (result[0].comments) {\n      var res = [];\n      result[0].comments.forEach(r => {\n        if (!(res.some(res => res.title === r.title) && res.some(res => res.route === r.route))){\n          res.push({'title': r.title, 'route': r.route});\n        }        \n      })\n      this.comments = res;\n      //this.comments = result[0].comments;\n    };\n  }\n\n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  delPlaylist(playlistid, name) {\n    this.dialog.openMultiFunction(\n      'Are you sure you want to delete playlist \"' + name + '\"?',\n      [\"yes\", \"no\"],\n      [async () => {\n        await this.player.deletePlaylist(this.currentUser.userId, playlistid);\n      },\n        () => null]\n    );\n  } \n\n  loadPlaylist(playlist) {\n    this.dialog.openMultiFunction(\n      'Your current playlist will be lost',\n      [\"ok\", \"cancel\"],\n      [() => { \n        this.player.playlist = [...playlist];\n        this.player.storePlaylist();\n      },\n        () => {}]\n    );\n    \n  }\n\n  protected onDeleteBookmark(bookmark) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to delete this bookmark?\",\n      [\"yes\", \"no\"],\n      [() => this.deleteBookmark(bookmark), \n        () => null]\n    );\n  }\n\n  async deleteBookmark(bookmark){\n    await this.data.delBookmark(this.currentUser.userId, bookmark.route);\n    this.getBookmarks();\n  }\n\n  protected onUnlike(like) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to unlike?\",\n      [\"yes\", \"no\"],\n      [() => this.unlike(like), \n        () => null]\n    );\n  }\n\n  async unlike(like){\n    await this.data.unlike(this.currentUser.userId, like.route);\n    this.getLikes();\n  }\n\n\n}","import * as _ from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { DeadApiService } from './dead-api.service';\nimport { DeadEventInfo, DeadEventDetails, SongInfo, SongDetails, AudioTrack,\n  Location, Venue, VenueDetails, ArtifactType, Artifact, Set, Recording,\n  RecordingDetails } from './types';\nimport { Track } from './player.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nconst ARCHIVE_URI = 'https://archive.org/download/';\n\nexport interface EventArtifact extends Artifact {\n  eventInfo: string\n}\n\n@Injectable()\nexport class DataService {\n\n  private loading: Promise<any>;\n  private events: DeadEventInfo[];\n  public event: DeadEventDetails;\n\n  constructor(private apiService: DeadApiService) {\n    this.loading = this.initEvents();\n  }\n  \n  async getEventInfo(eventId: string) {\n    return (await this.getEventInfos([eventId]))[0];\n  }\n  \n  async getEventInfos(eventIds: string[]) {\n    if (eventIds) {\n      await this.loading;\n      return this.events.filter(e => eventIds.indexOf(e.id) >= 0);\n    }\n  }\n  \n  async getEventDetails(eventId: string) {\n    this.event = await this.apiService.getEventDetails(eventId);\n    return this.event;\n  }\n  \n  async getLocation(locationId: string) {\n    return await this.apiService.getLocation(locationId);\n  }\n  \n  async getVenue(venueId: string) {\n    return await this.apiService.getVenue(venueId);\n  }\n  \n  async getVenueCoordinates(): Promise<VenueDetails[]> {\n    return this.apiService.getVenueCoordinates();\n  }\n\n  async getTourCoordinates(): Promise<VenueDetails[]> {\n    return this.apiService.getTourCoordinates();\n  }\n  \n  async getArtistDetails(artistId: string) {\n    return this.apiService.getArtistDetails(artistId);\n  }\n  \n  async getSong(songId: string): Promise<SongDetails> {\n    return this.apiService.getSong(songId);\n  }\n  \n  async getEventInfoForRecording(recordingId: string): Promise<DeadEventInfo> {\n    await this.loading;\n    return this.events.filter(e => e.recordings.some(r => r.id === recordingId))[0];\n  }\n  \n  async getRecording(recordingId: string) {\n    return this.apiService.getRecordingDetails(recordingId);\n  }\n  \n  async getRecordingTracks(recording: Recording, event: DeadEventInfo): Promise<Track[]> {\n    const tracks = await this.apiService.getRecordingTracks(recording.id);\n    return tracks.map(t => this.toTrack(event, recording.etreeId, t, recording.id, t.id)); \n  }\n  \n  async getTrackFromAudio(audio: AudioTrack, event: DeadEventInfo, etreeId: string) {\n    return this.toTrack(event, etreeId, audio, event.id, audio.id);  \n  }\n  \n  async getTrack(song: SongInfo, event: DeadEventInfo, etreeId?: string, recordingId?: string) {\n    const songDetails = await this.apiService.getSong(song.id);\n    if (!etreeId) {\n      const sbd = event.recordings.filter(r => r.isSoundboard);\n      var e = sbd.length ? sbd[0] : _.sample(event.recordings);\n      etreeId = e.etreeId;\n      recordingId = e.id;\n    } \n    return this.getTracks(songDetails, event, etreeId, recordingId)[0];\n  }\n  \n  getTracks(song: SongDetails, event: DeadEventInfo, etreeId: string, recordingId: string): Track[] {\n    return song.audio && song.audio[etreeId] ?\n      song.audio[etreeId].map(a => this.toTrack(event, etreeId, a, recordingId, song.id)) : [];\n  }\n  \n  async loadRandomEvent(): Promise<DeadEventDetails> {\n    return (await this.getEventDetails(await this.getRandomEventId()));\n  }\n  \n  async getRandomEventId(): Promise<string> {\n    await this.loading;\n    return this.events[Math.floor(Math.random()*this.events.length)].id;\n  }\n  \n  async getRandomVenue(): Promise<Venue> {\n    return (await this.loadRandomEvent()).venue;\n  }\n  \n  async getRandomLocation(): Promise<Location> {\n    return (await this.loadRandomEvent()).location;\n  }\n  \n  async getRandomArtifacts(types?: ArtifactType[], count = 20): Promise<EventArtifact[]> {\n    await this.loading;\n    let artifacts = _.flatten(this.events.map(e => e.artifacts.map(a =>\n      Object.assign(a, {eventInfo: e.venue + \", \" + e.location + \", \" + e.date}))));\n    if (types) {\n      artifacts = artifacts.filter(a => types.indexOf(a.type) >= 0);\n    }\n    return _.sampleSize(artifacts, count);\n  }\n  \n  async getRandomArtistId(): Promise<string> {\n    await this.loading;\n    return _.sample(this.event.performers).id;\n  }\n  \n  async getRandomRecording(): Promise<RecordingDetails> {\n    const randomEvent = await this.getEventInfo(await this.getRandomEventId());\n    return this.apiService.getRecordingDetails(_.sample(randomEvent.recordings).id);\n  }\n  \n  async getRandomSetlist(): Promise<Set[]> {\n    return this.apiService.getSetlist(await this.getRandomEventId());\n  }\n  \n  async getRandomSong(): Promise<SongDetails> {\n    const randomSong = _.sample(_.sample(await this.getRandomSetlist()).songs);\n    console.log(randomSong)\n    return this.apiService.getSong(randomSong.id);\n  }\n  \n  async getRandomTrack(): Promise<Track> {\n    const randomSong = await this.getRandomSong();\n   \n    const randomRecordingEtreeId = _.sample(_.keys(randomSong.audio));\n    const randomAudio = _.sample(randomSong.audio[randomRecordingEtreeId]);\n    const correspondingEvent = this.events.filter(e =>\n      e.recordings.map(r => r.etreeId).indexOf(randomRecordingEtreeId) >= 0)[0];\n    return this.toTrack(correspondingEvent, randomRecordingEtreeId, randomAudio, '', randomSong.id);  // TODO: fix recordingId\n  }\n  \n  private toTrack(event: DeadEventInfo, etreeId: string, audio: AudioTrack, recordingId: string, songId: string): Track {\n    const uri = ARCHIVE_URI+etreeId+'/'+audio.filename;\n    return {\n      title: audio.title + \", \" + event.venue + \", \"\n        + event.location + \", \" + event.date,\n      uri: uri,\n      show_id: event.id,\n      waveform: uri.replace('.mp3', '.png'),\n      etree_id: etreeId,\n      recording_id: recordingId,\n      song_id: songId,\n      track: audio.track\n    };\n  }\n  \n  private async initEvents() {\n    this.events = await this.apiService.getEvents();\n    this.events.sort((a, b) => parseFloat(a.date.replace(/-/g, ''))\n      - parseFloat(b.date.replace(/-/g, '')));\n  }\n  \n  formatDate(date: string) {\n    return new Date(date).toLocaleDateString(\"en-US\",\n      { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\n  }\n\n  formatDates(objects: {date: string}[]) {\n    objects.forEach(o => o.date = this.formatDate(o.date));\n  }\n\n  async getSearchResult(q: string): Promise<any> {\n    return this.apiService.getSearchResult(q);\n  }\n\n  async addBookmark(userid: string, route: string, time: number, title: string): Promise<any> {\n    return this.apiService.addBookmark(userid, route, time, title);\n  }\n\n  async delBookmark(userid: string, route: string): Promise<any> {\n    return this.apiService.delBookmark(userid, route);\n  }\n\n  async getBookmarks(userid: string): Promise<any> {\n    return this.apiService.getBookmarks(userid);\n  }\n\n  async checkBookmark(userid: string, route: string): Promise<any> {\n    return this.apiService.checkBookmark(userid, route);\n  }\n  \n  async like(userid: string, route: string, time: number, title: string): Promise<any> {\n    return this.apiService.like(userid, route, time, title);\n  }\n\n  async unlike(userid: string, route: string): Promise<any> {\n    return this.apiService.unlike(userid, route);\n  }\n\n  async checkLike(userid: string, route: string): Promise<any> {\n    return this.apiService.checkLike(userid, route);\n  }\n\n  async countLikes(route: string): Promise<any> {\n    return this.apiService.countLikes(route);\n  }\n  \n  async getLikes(userid: string): Promise<any> {\n    return this.apiService.getLikes(userid);\n  }\n\n  async getComments(route: string): Promise<any> {\n    return this.apiService.getComments(route);\n  }\n\n  async addComment(comment: any, route: string, userid: string, title: string): Promise<any> {\n    return this.apiService.addComment(comment, route, userid, title);\n  }\n\n  async checkComment(msgId: string): Promise<any> {\n    return this.apiService.checkComment(msgId);\n  }\n\n  async getUserComments(userid: string): Promise<any> {\n    return this.apiService.getUserComments(userid);\n  }\n\n  async sendCommentReport(msg: any, userid: string): Promise<any> {\n    const comment = encodeURIComponent(JSON.stringify(msg));\n    return this.apiService.sendCommentReport(comment, userid);\n  }\n\n  async addPlaylist(name: string, playlist: Track[], playlistid: string, userid: string, time: number): Promise<any> {\n    const p = encodeURIComponent(JSON.stringify(playlist));\n    return this.apiService.addPlaylist(name, p, playlistid, userid, time);\n  }\n\n  async getPlaylists(userid: string): Promise<any> {\n    return this.apiService.getPlaylists(userid);\n  }\n\n  async getPlaylist(playlistid: string): Promise<any> {\n    return this.apiService.getPlaylist(playlistid);\n  }\n\n  async delPlaylist(userid: string, playlistid: string): Promise<any> {\n    return this.apiService.delPlaylist(userid, playlistid);\n  }\n\n  async deleteComment(msgid: string, userid: string): Promise<any> {\n    return this.apiService.deleteComment(msgid, userid);\n  }\n\n  async getRecordingInfo(recordingid: string){\n    return this.apiService.getRecordingInfo(recordingid);\n  }\n\n  async getTracklist(recordingid: string){\n    return this.apiService.getTracklist(recordingid);\n  }\n\n  toPlayerTrack(venue: string, location: string, date: string, showId: string, etreeId: string, \n                        audio: AudioTrack, recordingId: string): Track {\n    const uri = ARCHIVE_URI+etreeId+'/'+audio.filename;\n    return {\n      title: audio.title + \", \" + venue + \", \"\n        + location + \", \" + date,\n      uri: uri,\n      show_id: showId,\n      waveform: uri.replace('.mp3', '.png'),\n      etree_id: etreeId,\n      recording_id: recordingId,\n      song_id: audio.id,\n      track: audio.track\n    };\n  }\n\n  async getYoutubeList(id: string, searchArray: string[]){\n    return this.apiService.getYoutubeList(id, searchArray);\n  }\n\n}","import { Injectable } from '@angular/core';\r\nimport { SafeResourceUrl } from '@angular/platform-browser';\r\nimport { DeadEventInfo, DeadEventDetails, Location, Venue, Set,\r\n  SongDetails, ArtistDetails, VenueDetails, RecordingDetails, AudioTrack } from './types';\r\nimport { API_URL, DEBUG } from '../config';\r\n\r\nconsole.log = function(s){\r\n  if (DEBUG) {\r\n    console.warn(s);\r\n  }; \r\n};\r\n\r\n\r\nexport interface Recording {\r\n  id: string,\r\n  url: SafeResourceUrl\r\n}\r\n\r\n@Injectable()\r\nexport class DeadApiService {\r\n\r\n  //private API_URL = \"https://grateful-dead-api.herokuapp.com/\";\r\n  //private API_URL = \"http://localhost:8060/\";\r\n  private api_url = API_URL;\r\n\r\n  constructor() {}\r\n\r\n  async getEvents(): Promise<DeadEventInfo[]> {\r\n    return this.getJsonFromApi('events');\r\n  }\r\n\r\n  async getVenueCoordinates(): Promise<VenueDetails[]> {\r\n    return this.getJsonFromApi('coordinates');\r\n  }\r\n\r\n  async getTourCoordinates(): Promise<any> {\r\n    return this.getJsonFromApi('tours');\r\n  }\r\n\r\n  async getEventDetails(eventId: string): Promise<DeadEventDetails> {\r\n    return this.getJsonFromApi('details?event='+encodeURIComponent(eventId))\r\n  }\r\n  \r\n  getLocation(locationId: string): Promise<Location> {\r\n    return this.getJsonFromApi('location?id='+encodeURIComponent(locationId));\r\n  }\r\n  \r\n  getVenue(venueId: string): Promise<Venue> {\r\n    return this.getJsonFromApi('venue?id='+encodeURIComponent(venueId));\r\n  }\r\n  \r\n  getSetlist(eventId: string): Promise<Set[]> {\r\n    return this.getJsonFromApi('setlist?event='+encodeURIComponent(eventId));\r\n  }\r\n  \r\n  getSong(songId: string): Promise<SongDetails> {\r\n    return this.getJsonFromApi('song?id='+encodeURIComponent(songId));\r\n  }\r\n  \r\n  getRecordingDetails(recordingId: string): Promise<RecordingDetails> {\r\n    return this.getJsonFromApi('recording?id='+encodeURIComponent(recordingId));\r\n  }\r\n  \r\n  getRecordingTracks(recordingId: string): Promise<AudioTrack[]> {\r\n    return this.getJsonFromApi('tracks?id='+encodeURIComponent(recordingId));\r\n  }\r\n\r\n  getRecordingId(eventId: string): Promise<any> {\r\n    return this.getJsonFromApi('recordingid?id='+encodeURIComponent(eventId));\r\n  }\r\n  \r\n  getArtistDetails(artistId: string): Promise<ArtistDetails> {\r\n    return this.getJsonFromApi('artist?id='+encodeURIComponent(artistId));\r\n  }\r\n\r\n  getFeatureSummary(audioUri: string): Promise<{}> {\r\n    return this.getJsonFromApi('featuresummary?audiouri='+encodeURIComponent(audioUri));\r\n  }\r\n\r\n  getDiachronicVersionsAudio(songName: string, count = 100, skip = 0): Promise<string[]> {\r\n    return this.getJsonFromApi('diachronic?songname='+encodeURIComponent(songName)\r\n      +\"&count=\"+count+\"&skip=\"+skip);\r\n  }\r\n\r\n  async getJsonFromApi(path: string): Promise<any> {\r\n    return fetch(this.api_url+path)\r\n      .then(r => r.text())\r\n      .then(t => JSON.parse(t))\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n  async getTextFromApi(path: string): Promise<any> {\r\n    return fetch(this.api_url+path)\r\n      .then(r => r.text())\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n  async getSearchResult(q: string): Promise<any> {\r\n    return this.getJsonFromApi('search?q='+encodeURIComponent(q));\r\n  }\r\n\r\n  async addBookmark(userid: string, route: string, time: number, title: string): Promise<any> {\r\n    return this.getTextFromApi('addBookmark?userid='+userid+'&route='+route+'&time='+time+'&title='+title);\r\n  }\r\n\r\n  async delBookmark(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('delBookmark?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async getBookmarks(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getBookmarks?userid='+userid);\r\n  }\r\n\r\n  async checkBookmark(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('checkBookmark?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async getComments(route: string): Promise<any> {\r\n    return this.getJsonFromApi('getComments?route='+route);\r\n  }\r\n\r\n\r\n\r\n  async like(userid: string, route: string, time: number, title: string): Promise<any> {\r\n    return this.getTextFromApi('like?userid='+userid+'&route='+route+'&time='+time+'&title='+title);\r\n  }\r\n\r\n  async unlike(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('unlike?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async checkLike(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('checkLike?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async countLikes(route: string): Promise<any> {\r\n    return this.getTextFromApi('countLikes?route='+route);\r\n  }\r\n\r\n  async getLikes(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getLikes?userid='+userid);\r\n  }\r\n  \r\n\r\n\r\n\r\n  async addComment(comment: any, route: string, userid: string, title: string): Promise<any> {\r\n    const cmt = encodeURIComponent(JSON.stringify(comment));\r\n    return this.getTextFromApi('addComment?comment='+cmt+'&route='+route+'&userid='+userid+'&title='+title);\r\n  }\r\n\r\n  async checkComment(msgId: string): Promise<any> {\r\n    return this.getJsonFromApi('checkComment?msgId='+msgId);\r\n  }\r\n\r\n  async getUserComments(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getUserComments?userid='+userid);\r\n  }\r\n\r\n  async sendCommentReport(comment: string, userid: string): Promise<any> {\r\n    return this.getTextFromApi('sendCommentReport?comment='+comment+'&userid='+userid);\r\n  }\r\n\r\n  async addPlaylist(name: string, playlist: string, playlistid: string, userid: string, time: number): Promise<any> {\r\n    return this.getTextFromApi('addPlaylist?name='+name+'&playlist='+playlist+'&playlistid='+playlistid+'&userid='+userid+'&time='+time);\r\n  }\r\n\r\n  async getPlaylists(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getPlaylists?userid='+userid);\r\n  }\r\n\r\n  async getPlaylist(playlistid: string): Promise<any> {\r\n    return this.getJsonFromApi('getPlaylist?playlistid='+playlistid);\r\n  }\r\n\r\n  async delPlaylist(userid: string, playlistid: string): Promise<any> {\r\n    return this.getTextFromApi('delPlaylist?userid='+userid+'&playlistid='+playlistid);\r\n  }\r\n\r\n  async deleteComment(msgid: string, userid: string): Promise<any> {\r\n    return this.getTextFromApi('deleteComment?msgid='+msgid+'&userid='+userid);\r\n  }\r\n\r\n  async getRecordingInfo(recordingid: string): Promise<any> {\r\n    return this.getJsonFromApi('getRecordingInfo?recordingid='+recordingid);\r\n  }\r\n\r\n  async getTracklist(recordingid: string): Promise<any> {\r\n    return this.getJsonFromApi('getTracklist?recordingid='+recordingid);\r\n  }\r\n\r\n  async getYoutubeList(id: string, searcharray: string[]): Promise<any> {\r\n    const s = encodeURIComponent(JSON.stringify(searcharray));\r\n    return this.getJsonFromApi('youtube?id='+id+'&searcharray='+s);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { ListDialogComponent } from '../shared/list-dialog.component';\nimport { InputDialogComponent } from '../shared/input-dialog.component';\nimport { DataService } from '../services/data.service';\n\n@Injectable()\nexport class DialogService {\n  constructor(private dialog: MatDialog, private data: DataService) {}\n  \n  async openMultiFunction(title: string, options: string[], funcs: Function[]) {\n    this.open(title, options).subscribe(result => {\n     if (result) {funcs[options.indexOf(result)]() }\n  });\n  }\n  \n  async openSingleFunction(title: string, options: string[], func: (s: string) => any) {\n    this.open(title, options).subscribe(result => func(result));\n  }\n  \n  private open(title: string, options: string[]) {\n    return this.dialog.open(ListDialogComponent,\n      this.getDialogConfig(title, options)).afterClosed();\n  }\n  \n  private getDialogConfig(title: string, items: string[]) {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.data = { title: title, items: items };\n    return dialogConfig;\n  }\n\n  \n  async openInputDialog(callback) {\n    const dialogRef = this.dialog.open(InputDialogComponent, {\n      width: '250px',\n      data: {input: ''}\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      callback(result);\n    });\n  }\n\n\n\n}","import { Injectable } from '@angular/core';\nimport { TRACKING } from '../config';\n\ndeclare let gtag:Function;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n  constructor() { }\n\n  public eventEmitter(eventName: string, eventCategory: string, eventAction: string, eventLabel: string = null, eventValue: number = null ){ \n    if (TRACKING){\n      gtag('event', eventName, { \n              event_category: eventCategory, \n              event_label: eventLabel, \n              event_action: eventAction, \n              value: eventValue\n            })\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Lightbox, LightboxConfig } from 'ngx-lightbox';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LightboxService {\n\n  constructor(private lightbox: Lightbox, private lightboxConfig: LightboxConfig) {\n    lightboxConfig.wrapAround = true;\n    lightboxConfig.showZoom = true;  \n   }\n\n  makeGallery(a) {\n    var carousel = [];\n    var lightboxa = [];\n    a.forEach(function (value, i){\n      var t = value;\n      t['index'] = i;\n      if (!value.thumbnail) t['thumbnail'] = t.image;\n      carousel.push(t);\n      lightboxa.push({\n        src: value.image,\n        caption: value.description\n      });\n    });\n    return [lightboxa, carousel];\n  }\n\n  openLightboxArray(lightboxArray, index: number): void {\n    this.lightbox.open(lightboxArray, index);\n  }\n\n  openLightBoxSingle(a): void {\n    this.lightbox.open([{ src: a.image, caption: a.description, thumb: '' }], 0)\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport{GoogleAnalyticsService} from './google-analytics.service';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nexport interface Track {\n  title: string,\n  uri: string,\n  waveform: string,\n  show_id: string,\n  etree_id: string,\n  recording_id: string,\n  song_id: string,\n  track: string\n}\n\n@Injectable()\nexport class PlayerService {\n  \n  public maxTime: number = 0;\n  public currentTime: number = 0;\n  private currentAudio: HTMLAudioElement;\n  public playlist: Track[] = [];\n  private currentTrackIndex = 0;\n  public muted = false;\n  public paused = true;\n  public playlists = [];\n  public playlistsLoaded = false;\n  \n  constructor(protected googleAnalyticsService: GoogleAnalyticsService, private data: DataService, private dialog: DialogService) {}\n  \n  addToPlaylist(track: Track) {\n    if (this.playlist.length < 100) {\n      this.playlist.push(track);\n      this.storePlaylist();\n    }\n    else {\n      this.dialog.openSingleFunction( 'Playlist is limited to 100 tracks.', [\"ok\"], () => null );\n    }\n  }\n\n  deleteFromPlaylist(i){\n    this.playlist.splice(i, 1);\n    this.storePlaylist();\n  }\n\n  clearPlaylist(){\n    this.playlist = [];\n    this.storePlaylist();\n  }\n  \n  getCurrentTrack() {\n    return this.playlist[this.currentTrackIndex]\n      || {title:\"\", uri:\"\", waveform:\"\"};\n  }\n  \n  skipToTrack(track: Track) {\n    this.skipToTrackAtIndex(this.playlist.indexOf(track));\n  }\n\n\n/*\n    eventName: string, \n    eventCategory: string, \n    eventAction: string, \n    eventLabel: string = null,  \n    eventValue: number = null ){ \n      */\n\n\n  playPause() {\n    if (this.playlist.length > 0){\n      if (this.currentAudio) {\n        if (this.currentAudio.paused) {\n          this.currentAudio.play();\n          this.paused = false;\n        } else {\n          this.currentAudio.pause();\n          this.paused = true;\n        }\n      } else {\n        this.playPlaylist();\n      }\n  }\n  }\n  \n  stop() {\n    if (this.currentAudio) {\n      this.reset();\n    }\n  }\n  \n  setTime(time: number) {\n    if (this.currentAudio && time != Math.floor(this.currentAudio.currentTime)) {\n      this.currentAudio.currentTime = time;\n    }\n  }\n  \n  toggleMute() {\n    this.muted = !this.muted;\n    if (this.currentAudio) {\n      this.currentAudio.muted = this.muted;\n    }\n  }\n  \n  isMuted() {\n    return this.muted;\n  }\n  \n  nextTrack() {\n    if (this.playlist.length) {\n      this.skipToTrackAtIndex((this.currentTrackIndex+1) % this.playlist.length);\n    }\n  }\n  \n  previousTrack() {\n    if (this.playlist.length) {\n      this.skipToTrackAtIndex((this.currentTrackIndex-1) % this.playlist.length);\n    }\n  }\n  \n  private skipToTrackAtIndex(index: number) {\n    this.currentTrackIndex = index;\n    if (this.currentAudio) {\n      this.stop();\n      this.playPause();\n    }\n  }\n  \n  private async playPlaylist() {\n    if (this.currentTrackIndex < this.playlist.length) {\n      console.log('Google Analytics')\n      this.googleAnalyticsService.eventEmitter(\"play\", \"audio_player\", \"play\", this.getCurrentTrack().uri);\n      await this.playCurrentTrack();\n      this.currentTrackIndex++;\n      //this.playPlaylist();  // why was this here?\n    } else {\n      this.reset();\n    }\n  }\n  \n  private async playCurrentTrack() {\n    const audio = new Audio(this.playlist[this.currentTrackIndex].uri);\n    audio.muted = this.muted;\n    audio.play();\n    this.paused = false;\n    this.currentAudio = audio;\n    audio.ontimeupdate = () => {\n      this.maxTime = audio.duration;\n      this.currentTime = audio.currentTime;\n    };\n    return new Promise(resolve => audio.onended = resolve);\n  }\n  \n  private reset() {\n    this.currentAudio.ontimeupdate = null;\n    this.currentAudio.pause();\n    this.currentAudio = null;\n    this.currentTime = 0;\n    this.paused = true;\n  }\n\n  volume(v) {\n    if (this.currentAudio) {\n      this.currentAudio.volume = v / 100;\n    }\n  }\n\n  async getPlaylists(userId){\n    var result = await this.data.getPlaylists(userId);\n    if (result[0].playlists){\n      var p = result[0].playlists;\n      p.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      p.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.playlists = p;\n      this.playlistsLoaded = true;      \n    }\n  }\n\n  async deletePlaylist(userid, playlistid){\n    await this.data.delPlaylist(userid, playlistid);\n    this.getPlaylists(userid);\n  }\n  \n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  storePlaylist(){\n    localStorage.setItem('playlist', btoa(JSON.stringify(this.playlist)));\n  }\n  \n  removePlaylistFromStorage(){\n    localStorage.removeItem('playlist');\n  }\n\n  loadPlaylistFromsStorage(){\n    var p = localStorage.getItem('playlist');\n    if (p) this.playlist = JSON.parse(atob(p));\n  }\n\n}","export interface DeadEventInfo {\n  id: string,\n  date: string,\n  location: string,\n  state: string,\n  venue: string,\n  recordings: Recording[],\n  artifacts: Artifact[]\n}\n\nexport interface DeadEventDetails {\n  id: string,\n  date: string,\n  location: Location,\n  venue: Venue,\n  setlist: Set[],\n  weather: Weather,\n  news: News[],\n  recordings: Recording[],\n  performers: Artist[],\n  artifacts: Artifact[]\n}\n\nexport enum ArtifactType {\n  Ticket = 'ticket',\n  Poster = 'poster',\n  Pass = 'backstage pass',\n  Photo = 'photo',\n  Envelope = 'envelope',\n  Tshirt = 'T-shirt',\n  Fanart = 'fan art'\n}\n\nexport interface Artifact {\n  type: ArtifactType,\n  thumbnail: string,\n  image: string,\n  description: string,\n  collection: string,\n  source: string\n  index?: number,\n}\n\nexport type Venue = GdEventsObject;\n\nexport interface Location extends GdEventsObject {\n  state: string\n}\n\nexport interface Set {\n  name: string,\n  songs: SongInfo[]\n}\n\nexport interface SongInfo extends GdObject {\n  composedBy: Artist[],\n  lyricsBy: Artist[]\n};\n\nexport interface SongDetails extends SongInfo, GdEventsObject {\n  audio?: AudioTrackMap\n}\n\nexport interface AudioTrackMap {\n  [recordingId: string]: AudioTrack[]\n}\n\nexport interface RecordingDetails extends Recording {\n  info: EtreeInfo\n  tracks: AudioTrack[]\n}\n\nexport interface Recording {\n  id: string,\n  etreeId: string,\n  isSoundboard: boolean\n}\n\nexport interface AudioTrack {\n  filename: string,\n  //format: string,\n  title: string,\n  track: string,\n  id: string\n}\n\nexport interface ArtistDetails extends Artist, GdEventsObject {\n  compositions: SongInfo[]\n}\n\nexport interface Artist extends GdObject {\n  musicbrainzId: string,\n  dbpediaId?: string,\n  instruments?: string[]\n}\n\nexport interface GdEventsObject extends GdObject {\n  eventIds: string[]\n}\n\nexport interface GdObject extends DbpediaObject {\n  id: string,\n  name: string\n}\n\nexport interface DbpediaObject {\n  image?: string,\n  thumbnail?: string,\n  comment?: string,\n  geoloc?: Geolocation\n}\n\nexport interface Geolocation {\n  lat: number,\n  long: number\n}\n\nexport interface Weather {\n  maxTemperature: number,\n  minTemperature: number,\n  precipitation: string,\n  wind: number,\n  windDirection: string,\n  windDirectionIcon: string,\n  condition: string,\n  conditionIcon: string\n}\n\nexport interface News {\n  source: string,\n  title: string,\n  date: string,\n  url: string\n}\n\nexport interface EtreeInfo {\n  tracks: string[],\n  id: string,\n  notes: string,\n  source: string,\n  lineage: string,\n  keywords: string[],\n}\n\nexport interface VenueDetails {\n  name: string,\n  id: string,\n  long: number,\n  lat: number,\n  shows: [],\n  georss: string\n}\n\nexport interface RecordingInfo {\n  date: string,\n  description: string,\n  etree_id: string,\n  lineage: string,\n  location_id: string,\n  location_name: string,\n  notes: string,\n  recording_id: string,\n  show_id: string,\n  source: string,\n  subject: string[],\n  venue_id: string,\n  venue_name: string\n}\n\nexport interface CommentPayload {\n  msgId: string,\n  userId?: number | string,\n  msg: string,\n  timestamp: string,\n  userName: string,\n  userImagePath?: string\n}","<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n<div *ngIf=\"title\" fxLayout=\"row\" fxLayout.xs=\"column\"\n    [style.background-color]=\"'#ededed'\" [style.background-size]=\"'cover'\"\n    [style.background-position]=\"'center'\" [style.padding]=\"'3px'\">\n  <div class=\"container\" fxLayout=\"column\" fxFlex=\"1 1 auto\">\n    <span>\n        <button mat-button [matMenuTriggerFor]=\"menu\"><img src=\"assets/gd_logo2.png\" height=\"25\"></button>        \n        <mat-menu #menu=\"matMenu\">\n          <!-- <button *ngFor=\"let v of views\" mat-menu-item [routerLink]=\"[v.url]\">{{v.name}}</button> -->\n          <button mat-menu-item routerLink=\"/mapselect\">Concert Map</button>\n          <button mat-menu-item routerLink=\"/profile\" *ngIf=\"userId\">Profile Page</button>\n          <button mat-menu-item (click)=\"auth.login()\" *ngIf=\"!userId\">Log In</button>\n          <button mat-menu-item (click)=\"logout()\" *ngIf=\"userId\">Log Out</button>\n          <!--button mat-menu-item (click)=\"auth.logout()\" *ngIf=\"userId\">Log Out</button-->\n          <button mat-menu-item routerLink=\"/about\">About</button>\n          <button mat-menu-item routerLink=\"/dataprivacy\">Privacy</button>\n        </mat-menu>\n    </span>\n  </div>\n\n\n  <div class=\"container hf1\" fxLayout=\"column\" fxFlex=\"1 1 auto\" [style.padding]=\"'4px'\">\n    <span>\n      {{ title }} {{ subtitle }}\n      <span *ngIf=\"!((router.url == '/about') || (router.url == '/mapselect') || (router.url == '/profile') || \n                      (router.url == '/dataprivacy') || (router.url.startsWith('/playlist')))\">\n        <button *ngIf=\"userId\" mat-icon-button color=\"\" (click)=\"onBookmarkButton()\">\n          <mat-icon>{{bookmarked ? 'bookmark' : 'bookmark_border'}}</mat-icon>\n        </button>\n\n      <!--span *ngIf=\"auth.loggedIn && !((router.url == '/about') || (router.url == '/mapselect') || (router.url == '/profile') || (router.url == '/dataprivacy'))\"-->\n        <button *ngIf=\"userId\" mat-icon-button color=\"\" (click)=\"onLikeButton()\">\n          <mat-icon>{{liked ? 'thumb_up_alt' : 'thumb_up_off_alt'}}</mat-icon>\n        </button>\n        <button *ngIf=\"!userId\" mat-icon-button color=\"\" style=\"cursor: default;\">\n          <mat-icon >thumb_up_off_alt</mat-icon>\n        </button>\n        {{likes}}\n      </span>\n\n\n    </span>\n    \n  </div>\n  <!--<div fxFlex=\"5 1 auto\"></div>-->\n  <ng-content></ng-content>\n\n  <p *ngIf=\"!searchState\" [style.margin-right]=\"'25px'\"></p>\n  <div *ngIf=\"searchState\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\"><mat-spinner diameter=\"20\"></mat-spinner></div>\n  <input [disabled]=\"searchState==1\" #searchfield placeholder=\"Search\" (keydown.enter)=\"onSubmit(searchfield.value)\">\n\n\n  \n \n\n</div>","import { Component, Input, ElementRef, AfterViewInit, ViewChild, Inject } from '@angular/core';\nimport { Title, DomSanitizer, SafeStyle } from '@angular/platform-browser';\n//import { VIEWS } from '../globals';\n//import * as Fuse from 'fuse.js';\nimport { MatDialog, MatDialogConfig } from \"@angular/material/dialog\";\nimport { SearchDialogComponent } from '../shared/search-dialog.component';\nimport { DataService } from '../services/data.service';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\nimport { PlayerService } from '../services/player.service';\n//import { CookieService } from 'ngx-cookie-service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n//declare var require: any;\n//const searchjson = require(\"../../assets/search.json\");\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.sass']\n})\nexport class HeaderComponent {\n  \n  \n  @Input() imageUrl: string;\n  @Input() title: string;\n  @Input() subtitle: string;\n  @Input() userId: string;\n  //@ViewChild('input') input: ElementRef;\n  protected image: SafeStyle;\n  //protected views = VIEWS;\n  //protected fuse: any;\n  protected result: any;\n  protected searchState: any;\n  //protected currentUser: any = { userName: '', userId:''};\n  protected bookmarked: boolean;\n  protected liked: boolean;\n  protected likes: number;\n  //protected number_liked: number;\n\n  \n  constructor(private sanitizer: DomSanitizer, private titleService: Title, private dialog: MatDialog, private data: DataService, \n    private router: Router, public auth: AuthService, private player: PlayerService) {\n\n      \n    }\n  \nngOnInit() {\n  this.titleService.setTitle('Grateful Live - '+this.title+', '+this.subtitle);\n\n  if (this.userId) {\n    gtag('set', {'user_id': this.userId});\n    if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n          { \n            this.checkBookmark();\n            this.checkLike()\n          };\n  }\n  \n  this.bookmarked = false;\n  this.liked = false;\n  this.searchState = 0;\n  this.image = this.sanitizer.bypassSecurityTrustStyle('url('+this.imageUrl+')');\n  \n  if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n    this.countLikes();\n  /*\n    if (this.auth.loggedIn) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n        if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n        { this.checkBookmark() };\n      });\n    }\n    */\n  }\n\n  //       else { this.player.removePlaylistFromStorage() }\n\n  logout(){\n    this.auth.logout();\n    this.player.removePlaylistFromStorage();\n  }\n\n  async onSubmit(e){\n    console.log(e);\n    this.searchState = 1;\n    var result = await this.data.getSearchResult(e);\n    if (result.length > 0){\n      this.openDialog(result, e)\n    }\n    this.searchState = 0;\n  }\n\n  openDialog(r, s) {\n    var dialogConfig = new MatDialogConfig();\n    dialogConfig.position = { right: '0', top: '0' };\n    dialogConfig.maxHeight = 400;\n    dialogConfig.data = {\n      id: 1,\n      result: r,\n      searchString: s\n     };\n    //dialogConfig.disableClose = true;\n    //dialogConfig.autoFocus = true;\n    this.dialog.open(SearchDialogComponent, dialogConfig);\n  }\n\n  async onBookmarkButton(){\n    if (this.bookmarked == false){\n      await this.data.addBookmark(this.userId, this.router.url, new Date().getTime(), this.title+' '+this.subtitle);\n    } else {\n      await this.data.delBookmark(this.userId, this.router.url);\n    }\n    this.checkBookmark();\n  }\n\n  async checkBookmark(){\n    var b = await this.data.checkBookmark(this.userId, this.router.url);\n    this.bookmarked = Boolean(JSON.parse(b));\n    console.log(\"bookmark: \"+this.bookmarked)\n  }\n\n  async onLikeButton(){\n    if (this.liked == false){\n      await this.data.like(this.userId, this.router.url, new Date().getTime(), this.title+' '+this.subtitle);\n    } else {\n      await this.data.unlike(this.userId, this.router.url);\n    }\n    this.checkLike();\n  }\n\n  async checkLike(){\n    var b = await this.data.checkLike(this.userId, this.router.url);\n    this.liked = Boolean(JSON.parse(b));\n    this.countLikes()\n    console.log(\"like: \"+this.liked)\n  }\n\n  async countLikes(){\n    this.likes  = await this.data.countLikes(this.router.url);\n    console.log(\"likes: \"+this.likes)\n  }\n\n}\n","<div mat-dialog-content>\n  <p>Save playlist</p>\n  <mat-form-field>\n    <mat-label>Enter name</mat-label>\n    <input matInput [(ngModel)]=\"data.input\" maxlength=\"50\">\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <!--button mat-button [mat-dialog-close]=\"data.input\" cdkFocusInitial>Ok</button-->\n  <button mat-button [disabled]=\"data.input.length == 0\" (click)=\"onOkClick(data.input)\">Ok</button> <!--cdkFocusInitial-->\n</div>\n\n\n<!--div mat-dialog-content>\n  <p class=\"mat-dialog-title\" >{{data.title}}</p>\n  <input matInput [(ngModel)]=\"data.input\">\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <button mat-button [mat-dialog-close]=\"data\" cdkFocusInitial>Ok</button>\n</div-->","import { Component, Inject } from '@angular/core';\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\n\n\nexport interface DialogData {\n  title: string,\n  options: string[],\n  input: string\n}\n\n@Component({\n  selector: 'input-dialog',\n  templateUrl: './input-dialog.component.html'\n})\nexport class InputDialogComponent {\n  constructor(private dialogRef: MatDialogRef<InputDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData) {}\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onOkClick(input: string): void {\n    this.dialogRef.close(input);\n  }\n}","<!--h1 mat-dialog-title>{{data.title}}</h1-->\n<div mat-dialog-content>\n  <p class=\"mat-dialog-title\" >{{data.title}}</p>\n  <button *ngFor=\"let i of data.items\" (click)=\"onItemClick(i)\"\n    [style.margin-bottom]=\"'5px'\">{{ i }}</button>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <button mat-button [mat-dialog-close]=\"data\" cdkFocusInitial>Ok</button>\n</div>","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nexport interface DialogData {\n  title: string,\n  options: string[],\n  items: any\n}\n\n@Component({\n  selector: 'list-dialog',\n  templateUrl: './list-dialog.component.html'\n})\nexport class ListDialogComponent {\n  constructor(private dialogRef: MatDialogRef<ListDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData) {}\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onItemClick(item: string): void {\n    this.dialogRef.close(item);\n  }\n}","<div class=\"map\" leaflet [leafletOptions]=\"options\"></div>","import { Component, Input } from '@angular/core';\nimport { tileLayer, latLng, marker, icon, MapOptions } from 'leaflet';\n\n@Component({\n  selector: 'gd-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.sass']\n})\nexport class MapComponent {\n  \n  @Input() latitude: number;\n  @Input() longitude: number;\n  @Input() zoom: number;\n  public options: MapOptions;\n  \n  ngOnInit() {\n    this.options = {\n      layers: [\n        //tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n        tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p72bl/{z}/{x}/{y}.png',\n          { maxZoom: 17, attribution: '...' }),\n        marker([this.latitude, this.longitude], {\n          icon: icon({\n            iconSize: [ 25, 41 ],\n            iconAnchor: [ 13, 41 ],\n            iconUrl: 'assets/marker-icon-2x.png',\n            //shadowUrl: 'assets/marker-shadow.png'\n          })\n        })\n      ],\n      zoom: this.zoom,\n      center: latLng(this.latitude, this.longitude)\n    };\n  }\n\n}","<div fxLayout=\"column\" [style.height]=\"loaded && !minimized ? '120px' : '20px'\">\n  <img *ngIf=\"player.getCurrentTrack().waveform\" class=\"image\"\n    [lazyLoad]=\"player.getCurrentTrack().waveform\" [style.height]=\"'100px'\"\n    [class.flashy]=\"loaded\" (load)=\"loaded = true\" [hidden]=\"minimized\" class=\"waveform\">\n  <input type=\"range\" min=\"0\" max=\"{{player.maxTime}}\"\n    [(ngModel)]=\"player.currentTime\" (ngModelChange)=\"player.setTime($event)\"/>\n</div>\n<div fxLayout=\"row\" style=\"margin-top: 10px; margin-left: 3px; margin-right: 3px;\">\n  <button mat-flat-button fxFlex (click)=\"player.playPause()\"> \n    <mat-icon *ngIf=\"!player.paused\">pause</mat-icon>\n    <mat-icon *ngIf=\"player.paused\">play_arrow</mat-icon>\n  </button>\n  <!--button mat-flat-button fxFlex (click)=\"player.pause()\">\n    <mat-icon>pause</mat-icon></button-->\n  <button mat-flat-button fxFlex (click)=\"player.stop()\">\n    <mat-icon>stop</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.previousTrack()\">\n    <mat-icon>skip_previous</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.nextTrack()\">\n    <mat-icon>skip_next</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.toggleMute()\">\n    <mat-icon>{{player.muted ? 'volume_up' : 'volume_off'}}</mat-icon></button>\n  <!-- <button mat-flat-button fxFlex (click)=\"addRandomTrack()\">\n    <mat-icon>playlist_add</mat-icon></button> -->\n  <button mat-flat-button fxFlex (click)=\"minimized = !minimized\">\n    <mat-icon>{{minimized ? 'visibility' : 'visibility_off'}}</mat-icon></button>\n  <mat-slider type=\"range\" min=\"0\" max=\"100\" value=\"100\" step=\"1\" (input)=\"volumeChange($event.value)\"></mat-slider>\n\n  <button *ngIf=\"currentUser.userId && (!player.playlists || player.playlists.length==0)\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    load\n  </button>\n  <button *ngIf=\"currentUser.userId && (!player.playlists || player.playlists.length>0)\"mat-flat-button fxFlex (click)=\"onLoadPlaylist()\">\n    load\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length==0\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    save\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length>0\" mat-flat-button fxFlex (click)=\"onSavePlaylist()\">\n    save\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length==0\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    clear\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length>0\" mat-flat-button fxFlex (click)=\"onClearPlaylist()\">\n    clear\n  </button>\n\n</div>\n\n<div fxLayout=\"column\">\n\n  <div class=\"playlist\" *ngFor=\"let s of player.playlist; index as i\" [hidden]=\"minimized && s !== player.getCurrentTrack()\" style=\"text-align:left; margin-left: 3px;\">\n    <span [style.color]=\"s === player.getCurrentTrack() ? '#3d3d3d' : 'grey'\" (click)=\"player.skipToTrack(s)\">\n      {{s.track + '. ' + s.title + ' [' + s.etree_id + ']'}} \n    </span>\n    <span style=\"float:right; margin-right: 3px;\">\n      <button [matMenuTriggerFor]=\"menu\">>></button>        \n        <mat-menu #menu=\"matMenu\">\n          <button *ngIf=\"s.song_id\" (click)=\"router.navigate(['/song', s.song_id])\">song</button>\n          <button *ngIf=\"s.show_id\" (click)=\"router.navigate(['/show', s.show_id])\">show</button>\n          <button *ngIf=\"s.recording_id\" (click)=\"router.navigate(['/recording', s.recording_id])\">recording</button>\n        </mat-menu>\n        <button (click)=\"delTrack(i)\">X</button>\n    </span>\n  </div>\n\n</div>","import { Component } from '@angular/core';\nimport { PlayerService } from '../services/player.service';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\n// import { CookieService } from 'ngx-cookie-service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-player',\n  templateUrl: './player.component.html',\n  styleUrls: ['./player.component.sass']\n})\nexport class PlayerComponent {\n  public currentUser: any = { userName: '', userId: '' };\n  public loaded = false;\n  public minimized = false;\n  constructor(public player: PlayerService, private data: DataService, private dialog: DialogService, public auth: AuthService, \n              public router: Router) {} //, private cookieService: CookieService) {}\n  \n  ngOnInit() {\n    //if (!this.cookieService.get('auth0.is.authenticated')) { \n    //  this.player.removePlaylistFromStorage() ;\n    //};\n    \n    //if (this.currentUser.userId != '') gtag('set', {'user_id': this.currentUser.userId});\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n        this.player.getPlaylists(this.currentUser.userId);\n      }\n      if (!this.router.url.startsWith('/playlist')) {\n        this.player.loadPlaylistFromsStorage();\n      };\n      \n    });\n\n    \n    \n  }\n\n  async addRandomTrack() {\n    this.player.addToPlaylist(await this.data.getRandomTrack());\n  }\n\n  volumeChange(v){\n    this.player.volume(v);\n  }\n\n  async onClearPlaylist(){\n    this.player.stop();\n    this.player.clearPlaylist();\n    this.minimized = true;\n  }\n\n  async delTrack(i){\n    this.player.deleteFromPlaylist(i);\n  }\n\n  async onSavePlaylist() {\n    this.dialog.openInputDialog(name => {\n      if (name) { \n        this.savePlaylist(name);\n      }\n    });\n  }\n\n  async onLoadPlaylist() {\n    this.loadPlaylist()\n  }\n\n  async savePlaylist(name){\n    console.log('saving playlist');\n    const id = this.makeid();\n    await this.data.addPlaylist(name, this.player.playlist, id, this.currentUser.userId, new Date().getTime());\n    await this.player.getPlaylists(this.currentUser.userId);\n  }\n/*\n\nprotected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      this.song.name+\"', \"+event.venue+\", \"+event.date,\n      [\"Add to playlist\", \"Go to show\"],\n      [() => this.openRecordingsDialog(event),\n        () => this.router.navigate(['/show', event.id])]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openSingleFunction(\n      \"Recordings of '\"+this.song.name+\"', \"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      r => this.addRecordingToPlaylist(r, event)\n    );\n  }\n  */\n \n  private loadPlaylist() {\n    console.log('load playlist');\n    this.dialog.openMultiFunction(\n      'Your current playlist will be lost',\n      this.player.playlists.map(r => r.name),\n      this.player.playlists.map(r => () => {\n        this.player.playlist = [...r.playlist];\n        this.player.storePlaylist();\n      })\n    );\n    \n  }\n\n  private makeid() {\n    var result           = '';\n    var characters       = 'abcdef0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < 24; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n }\n}\n","<div class=\"left\">  <b>{{searchString}}</b></div>\n\n<div class=\"type\" *ngIf=\"result.song.length != 0\">Songs:</div>\n<div class=\"result\" *ngFor=\"let r of result.song, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/song', r[1]]\"> {{r[0]}}</span>\n</div>\n\n<div class=\"type\" *ngIf=\"result.venue.length != 0\">Venues:</div>\n<div class=\"result\" *ngFor=\"let r of result.venue, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/venue', r[1]]\"> {{r[0]}}</span>\n</div>\n\n<div class=\"type\" *ngIf=\"result.show.length != 0\">Shows:</div>\n<div class=\"result\" *ngFor=\"let r of result.show, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/show', r[1]]\"> {{r[0]}}</span>\n</div>\n\n\n\n\n\n\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nexport interface DialogData {\n  title: string,\n  options: string[]\n}\n\n@Component({\n  selector: 'search-dialog',\n  templateUrl: './search-dialog.component.html',\n  styleUrls: ['./search-dialog.component.sass']\n})\nexport class SearchDialogComponent {\n\n  result: any;\n  searchString: string;\n\n  constructor(private dialogRef: MatDialogRef<SearchDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data ) {\n      //this.result = data.result; //this.sortItems(data.result);\n      this.result = this.sortItems(data.result);\n      this.searchString = data.searchString;\n    }\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onItemClick(item: string): void {\n    this.dialogRef.close(item);\n  }\n\n  sortItems(r){\n    var s = { 'show': [], 'venue': [], 'song': [] };\n    r.forEach( i => {\n      s[i.type].push([i.title, i.uri])\n    })\n    Object.keys(s).forEach(k => {\n      s[k].sort();\n    })\n    console.log(s)\n    return s\n  }\n}","\n<p [style.margin-bottom]=\"'5px'\"></p>\n<share-buttons [theme]=\"'default'\"\n [include]=\"['facebook','twitter','pinterest','reddit','tumblr','mix','copy']\"\n [show]=\"7\"\n [size]=\"-4\"\n [title]=\"'Grateful Dead Concert Explorer'\"\n [tags]=\"'GratefulDeadExplorer,GratefulDead'\"\n></share-buttons>\n<p [style.margin-bottom]=\"'5px'\"></p>","import { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'gd-sharebuttons',\n  templateUrl: './sharebuttons.component.html',\n  styleUrls: ['sharebuttons.component.sass']\n})\nexport class ShareButtonsComponent {\n\n  \n  ngOnInit() {\n  }\n\n}","<style>\n.loader {\n  -webkit-animation: spin 1s linear infinite;\n          animation: spin 1s linear infinite;\n  border: 3px solid #ddd;\n  border-top: 3px solid #42a5f5;\n  border-radius: 50%;\n  height: 75px;\n  width: 75px;\n}\n\n@-webkit-keyframes spin {\n  to {\n    border-top-color: #ec407a;\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes spin {\n  to {\n    border-top-color: #ec407a;\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n\n}\n</style>\n\n<div *ngIf=\"!loaded\" class=\"wait\">\n  <div class=\"loader\"></div>\n</div>\n\n<div *ngIf=\"!loaded\" class=\"wait\"><img src=\"/assets/bearsanimated.webp\" width=\"160\"></div>\n<div *ngIf=\"!timeOut && !loaded\" class=\"wait\">connecting to database</div>\n<div *ngIf=\"timeOut && !loaded\" class=\"wait\">loading seems to take a while! retrying...</div>\n\n<div id=\"maploaded\" [style.visibility]=\"!loaded ? 'hidden' : 'visible' \">\n  <div class=\"center\">\n    <select [(ngModel)]=\"selectedTour\" (ngModelChange)=\"tourChanged($event)\">\n        <option *ngFor=\"let l of layerNames\" ngValue=\"{{l}}\"> {{l}}</option>\n    </select>\n  </div>\n  <div id=\"MapContainer\" \n    leaflet\n    [leafletOptions]=\"mapOptions\"\n    (leafletMapReady)=\"onMapReady($event)\">\n  </div>\n</div> \n\n\n","import { Component, Input } from '@angular/core';\nimport { VenueDetails } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n//import * as Fuse from 'fuse.js'; // imported in angular.json\nimport * as _ from 'lodash';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare const L: any;\nimport 'leaflet';\nimport '../../leaflet-fusesearch/src/leaflet.fusesearch.js'\nimport 'leaflet-polylinedecorator'\n\n\n@Component({\n  selector: 'gd-showmap',\n  templateUrl: './showmap.component.html',\n  styleUrls: ['./showmap.component.sass']\n})\n\n\nexport class ShowMapComponent {\n  @Input() zoom: number;\n  //@Input() venues: VenueDetails[];\n  protected venues: VenueDetails[];\n  public mapOptions: L.MapOptions;\n  protected map: L.Map;\n  protected selectLayers: {};\n  public layerNames: string[];\n  protected searchCtrl: any;\n  protected geoJsons: {};\n  protected currentLayer: string;\n  public selectedTour: string;\n  protected tourLine: any;\n  protected lineDecorator: any;\n  public loaded: boolean;\n  public timeOut: boolean;\n  \n\n  constructor(protected data: DataService, private sanitizer: DomSanitizer) {}\n\n\n  ngOnInit() {\n    this.loaded = false;\n    this.timeOut = false;\n    this.selectLayers = {};\n    this.layerNames = [];\n    this.geoJsons = {};\n      this.mapOptions = {\n        layers: [\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/villeda.c4c63d13/{z}/{x}/{y}.png',\n          //L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p4an0/{z}/{x}/{y}.png',\n          L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p72bl/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p92aj/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/aj.03e9e12d/{z}/{x}/{y}.png',\n            { maxZoom: 18, attribution: '...' })],\n        zoom: this.zoom,\n        center: L.latLng(45, -70)\n      };\n  }\n\n\n  async onMapReady(map: L.Map) {\n    setTimeout(() => {\n      this.timeOut = true;\n    }, 35000);\n    //this.document.getElementById(\"maploaded\").style.visibility = \"hidden\";\n    this.map = map\n    let i = 0;\n    while (this.venues == undefined || this.venues.length == 0) {    // retry heroku fetch\n      console.log(\"retry \" + i);\n      this.venues = await this.data.getVenueCoordinates();\n      console.log(this.venues)\n      i++;\n    }\n    var tours = await this.data.getTourCoordinates();\n    console.log(tours)\n    var geoJsonData = this.getGeoJson(this.venues);\n    var tourGeoJsonData = this.getTourJson(tours);\n    var all = this.groupLayers(geoJsonData);\n    this.geoJsons['all shows'] = geoJsonData;\n    this.selectLayers['all shows'] = all;\n    this.layerNames.push('all shows')\n    this.selectLayers['all shows'].addTo(this.map)\n    this.currentLayer = 'all shows';\n\n    tourGeoJsonData.forEach(t =>{\n      this.selectLayers[t[0]] = this.groupLayers(t[1]);\n      this.geoJsons[t[0]] = t[1];\n      this.geoJsons[t[0]].sort(this.dateSort())\n      this.layerNames.push(t[0]); \n    })\n    this.searchCtrl = L.control.fuseSearch({'showResultFct': function(feature, container) {\n      var props = feature.properties;\n      if (props.dates != '') {    // workaround for result list after first click on search button\n        var name = L.DomUtil.create('span', null, container);\n        name.innerHTML = props.name;\n        //container.appendChild(L.DomUtil.create('br', null, container));\n        //container.appendChild(document.createTextNode(props.dates));\n    }\n  }})\n    this.searchCtrl.indexFeatures(geoJsonData, ['name', 'dates']); \n    this.searchCtrl.addTo(this.map);\n    this.searchCtrl.indexFeatures(this.geoJsons['all shows'], ['name', 'dates']); \n    this.selectedTour = 'all shows';\n    this.loaded = true;\n    this.fitZoom();\n   \n  }\n\n  \n  dateStrings(s) {\n    if (s != undefined){\n      var htmlstring = '<br>';\n      var datestring = '';\n      var dates = s.map(e => [e.date, e.id])\n      dates.sort()\n      dates.forEach(e => {\n        htmlstring += '<a style=\"color: black;\" href=\"/#/show/' + e[1] + '\">' + e[0] + '</a><br>' ; // removed #/ url\n        datestring += e[0] + ' '\n      });\n    return [datestring, htmlstring];\n  }}\n\n\n  onEachFeature(feature, layer) {\n    if (feature.properties && feature.properties.popupContent) {\n      layer.bindPopup(feature.properties.popupContent, { maxHeight: 160 });\n    }\n    feature.layer = layer;\n  }\n\n\n  getGeoJson(shows){\n    var geoJsonData = [];\n    var latlongs = [];\n\n    shows.forEach(v => {\n      if (v.long != undefined) {\n        var lat = parseFloat(v.lat);\n        var long = parseFloat(v.long);\n        while (this.searchForArray(latlongs,[lat, long]) != -1){  // prevent markers in same place\n          lat += 0.001;\n        }\n        latlongs.push([lat, long])   \n        var ds = this.dateStrings(v.shows);\n        var datestring = ds[0];\n        var venuehtml = ds[1];\n        if (v.georss == 'city'){ venuehtml += '(marker for city only)' };\n        var geojsonFeature = {\n          'type': 'Feature',\n          'properties': {\n            'name': v.name,\n            'dates': datestring,\n            'popupContent': '<b><a style=\"color: black;\" href=\"/#/venue/' + v.id + '\">' + v.name + '</a></b>' + venuehtml // removed #/ url\n          },\n          'geometry': {\n            'type': 'Point',\n            'coordinates': [lat, long]\n          } };\n          geoJsonData.push(geojsonFeature);\n      }});\n      return geoJsonData;\n  }\n\n groupLayers(g){\n    var l = [];\n    var myIcon = L.icon({\n      iconUrl: 'assets/dead_marker_small_shadow.png',\n      iconSize: [null, 35],\n      iconAnchor: [12, 34],\n      popupAnchor: [-3, -32],\n    });\n    g.forEach(v => {\n      var g = L.geoJSON(v, {\n        onEachFeature: this.onEachFeature,\n        pointToLayer: function (feature, latlng) {\n          return L.marker(latlng, {icon: myIcon, riseOnHover: true});\n        } })\n      l.push(g)\n    });\n    var lg = L.layerGroup(l);\n    return (lg)\n  }\n\n\n  getTourJson(t){\n    var tours = []\n    Object.keys(t).forEach(tour => {\n      var geoJsonData = [];\n      var latlongs = [];\n      Object.keys(t[tour]).forEach(venue => {\n        var venue_id = t[tour][venue].id;\n        var long = parseFloat(t[tour][venue].long);\n        var lat = parseFloat(t[tour][venue].lat);\n        while (this.searchForArray(latlongs,[lat, long]) != -1){  // prevent markers in same place\n          lat += 0.001;\n        }\n        latlongs.push([lat, long])     \n        var shows = []\n        t[tour][venue].shows.forEach(show => shows.push(show));\n        var ds = this.dateStrings(shows);\n        var datestring = ds[0];\n        var venuehtml = ds[1];\n        if (t[tour][venue].georss == 'city'){ venuehtml += '(marker for city only)' };   // todo: make work!\n        var geojsonFeature = {\n          'type': 'Feature',\n          'properties': {\n            'name': venue,\n            'tour': tour,\n            'dates': datestring,\n            'popupContent': '<b><a style=\"color: black; \"href=\"/#/venue/' + venue_id + '\">' + venue + '</a></b>' + venuehtml // removed #/ url\n          },\n          'geometry': {\n            'type': 'Point',\n            'coordinates': [lat, long]\n          } };\n        geoJsonData.push(geojsonFeature);\n      });\n     if (geoJsonData.length > 0) {\n        tours.push([tour, geoJsonData])\n      } });\n    return tours;\n  }\n\n\n  tourChanged(e){\n    if (this.tourLine != undefined) {this.map.removeLayer(this.tourLine) }\n    if (this.lineDecorator != undefined) {this.map.removeLayer(this.lineDecorator) }\n    this.map.removeLayer(this.selectLayers[this.currentLayer])\n    this.selectLayers[e].addTo(this.map)\n    this.searchCtrl.indexFeatures(this.geoJsons[e], ['name', 'dates']); \n    this.currentLayer = e;\n    if (e != 'all shows' && this.geoJsons[e].length > 1){\n      this.connectTheDots(this.geoJsons[e])\n    }\n    this.fitZoom();\n  }\n\n\n  fitZoom(){\n    var group = new L.featureGroup;\n    this.map.eachLayer(l => { if (l['feature'] != undefined){ group.addLayer(l) } });\n    this.map.fitBounds(group.getBounds());\n    if (this.map.getZoom() > 10) { this.map.setZoom(10) }\n  }\n\n\n  connectTheDots(e){\n    var c = [];\n    e.forEach( i => c.push(_.clone(i.geometry.coordinates).reverse()));\n    this.tourLine = L.polyline(c, {color: '#1D3A87', weight: 3}).addTo(this.map);\n    console.log(this.tourLine)\n    this.lineDecorator = L.polylineDecorator(this.tourLine, {\n    patterns: [\n      {offset: '0%', repeat: 40, symbol: L.Symbol.arrowHead(\n        {pixelSize: 9, polygon: false, pathOptions: {weight: 3, color: '#1D3A87', stroke: true}})\n      } ] }).addTo(this.map);\n}\n\n\n  dateSort() {\n    return function (a,b) {\n      var result = (a.properties.dates < b.properties.dates) ? -1 : (a.properties.dates > b.properties.dates) ? 1 : 0;\n      return result;\n    }\n}\n\n\n  searchForArray(haystack, needle){\n    var i, j, current;\n    for(i = 0; i < haystack.length; ++i){\n      if(needle.length === haystack[i].length){\n        current = haystack[i];\n        for(j = 0; j < needle.length && needle[j] === current[j]; ++j);\n        if(j === needle.length)\n          return i;\n      }\n  }\n  return -1;\n}\n\n}","<div fxLayout=\"column\" class=\"gd-container\">\n  <div *ngFor=\"let e of events\" fxLayout=\"row\" fxLayoutAlign=\" center\">\n    <img fxLayout=\"column\" class=\"image field\" fxFlex=\"1 1 15%\"\n      [style.width]=\"'80px'\" [style.height]=\"'60px'\"\n      [defaultImage]=\"'assets/gd_placeholder.png'\"\n      [lazyLoad]=\"e.artifacts[0] ? e.artifacts[0].thumbnail || e.artifacts[0].image: null\"\n      [style.object-fit]=\"'cover'\"\n      [routerLink]=\"['/show', e.id]\">\n      <div fxLayout=\"column\" fxFlex=\"1 1 10%\" fxLayoutAlign=\"center\"\n      [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n        {{ e.date }}\n      </div>\n      <div fxLayout=\"column\" fxFlex=\"1 1 25%\" fxLayoutAlign=\"center\"\n      [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n        {{ e.venue }} \n      </div>\n      <span class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.location }}\n    </span>\n    <button *ngIf=\"onOptions\" mat-icon-button fxLayout=\"column\" class=\"field\" fxFlex=\"1 1 10%\"\n      (click)=\"onOptions(e)\"><mat-icon>more_horiz</mat-icon>\n    </button>\n\n\n    <!--\n    <div fxLayout=\"column\" fxFlex=\"1 1 25%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.date }}\n    </div>\n    <div fxLayout=\"column\" fxFlex=\"1 1 30%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.venue }}\n    </div>\n    <div fxLayout=\"column\" fxFlex=\"1 1 20%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.location }}\n    </div>\n    <button mat-icon-button fxLayout=\"column\" class=\"field\" fxFlex=\"1 1 10%\"\n      (click)=\"onOptions(e)\"><mat-icon>more_horiz</mat-icon>\n    </button>\n    -->\n  </div>\n</div>\n\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component, Input } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { DeadEventInfo } from '../services/types';\n\n@Component({\n  selector: 'gd-shows',\n  templateUrl: './shows.component.html',\n  styleUrls: ['./shows.component.sass']\n})\nexport class ShowsComponent {\n  @Input() eventIds: string[];\n  @Input() onOptions: (s: DeadEventInfo) => any;\n  public events: DeadEventInfo[];\n  \n  constructor(private data: DataService) {}\n  \n  async ngOnInit() {\n    this.events = await this.data.getEventInfos(this.eventIds);\n    //TODO add pagination?\n    //if (this.events) this.events = this.events.slice(0, 20);\n  }\n}\n","\n  <div fxLayout=\"row\" >\n      \n    <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center center\" [style.font-size]=\"'150%'\"[style.padding]=\"'4px'\">\n      <i class=\"wi wc {{ weather.conditionIcon }}\"></i>\n    </div>\n    <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center center\" [style.font-size]=\"'150%'\">\n      <i class=\"wi wc wpadleft {{ weather.windDirectionIcon }}\"></i>\n    </div>\n    <div fxLayout=\"column\" class=\"wf wc wpadleft wpadright\" fxFlex fxLayoutAlign=\"center center\" >\n        {{ weather.maxTemperature }}°F\n      </div>\n  </div>\n  <!--\n  <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center\" [style.padding-left]=\"'30px'\">\n    <span *ngIf=\"weather.condition\">\n      <b>{{ weather.condition }}</b>\n    </span>\n    max. temperature: {{ weather.maxTemperature }} °F<br>\n    precipitation: {{ weather.precipitation }} in<br>\n    wind: {{ weather.wind }} mph\n  </div>\n-->","import { Component, Input } from '@angular/core';\nimport { Weather } from '../services/types';\n\n@Component({\n  selector: 'gd-weather',\n  templateUrl: './weather.component.html',\n  styleUrls: ['./weather.component.sass']\n})\nexport class WeatherComponent {\n  @Input() weather: Weather;\n}\n","<youtube-player videoId=\"{{ videoId }}\" width=\"{{ width }}\"></youtube-player>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  //template: '<youtube-player videoId=\"PRQCAL_RMVo\"></youtube-player>',\n  templateUrl: './youtube.component.html',\n  selector: 'gd-youtube',\n})\n\nexport class YoutubeComponent implements OnInit {\n  @Input() videoId: string;\n  @Input() width: string;\n\n  ngOnInit() {\n    //this.videoId = 'PRQCAL_RMVo';\n    // This code loads the IFrame Player API code asynchronously, according to the instructions at\n    // https://developers.google.com/youtube/iframe_api_reference#Getting_Started\n    const tag = document.createElement('script');\n\n    tag.src = \"https://www.youtube.com/iframe_api\";\n    document.body.appendChild(tag);\n  }\n}\n","<div *ngIf=\"artifacts\" fxLayout=\"column\">\n  <gd-header *ngIf=\"artifacts\" title='Artifacts'\n    [subtitle]='types' imageUrl=\"{{ artifacts[0] }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div *ngIf=\"artifacts.length\" class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\">\n    <div *ngFor=\"let a of artifacts\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"33\" fxFlex.xs=\"100\">\n      <img class=\"image\" [src]=\"a.thumbnail || a.image\" [style.object-fit]=\"'cover'\" [style.width]=\"'100%'\">\n      {{a.description}}<br>\n      {{a.eventInfo}}<br>\n      {{a.type}} in {{a.collection}} collection\n    </div>\n  </div>\n</div>","import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Artifact, ArtifactType } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-artifacts',\n  templateUrl: './artifacts.component.html'\n})\nexport class ArtifactsComponent {\n  \n  public artifacts: Artifact[];\n  protected types: ArtifactType[];\n  protected currentUser: any = { userName: '', userId:''};\n  \n  constructor(protected data: DataService, private route: ActivatedRoute, public auth: AuthService) {\n\n   \n  }\n  \n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n      \n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        //show fullscreen artifact\n      } else if (params.has('types')) {\n        this.types = JSON.parse(params.get('types'));\n        this.artifacts = await this.data.getRandomArtifacts(this.types, 6);\n      } else {\n        this.artifacts = await this.data.getRandomArtifacts(null, 6);\n        console.log(this.artifacts)\n      }\n    });\n  }\n}\n","<div *ngIf=\"artist\" fxLayout=\"column\">\n  <gd-header *ngIf=\"artist\" title=\"{{ artist.name }}\"\n    subtitle=\"{{ artist.instruments.join(', ').split('_').join(' ') }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  \n  <div class=\"gd-container\" fxLayout=\"row\" fxLayout.xs=\"column\">\n    <img *ngIf=\"artist.thumbnail\" class=\"image gd-container\"\n      [defaultImage]=\"'assets/gd_placeholder.png'\"\n      [lazyLoad]=\"artist.thumbnail\" [style.object-fit]=\"'contain'\"\n      fxFlex=\"50\">\n    <div class=\"gd-container\" fxFlex=\"50\">\n      {{ artist.comment }}\n    </div>\n  </div>\n  \n  <p class=\"gd-section\">Songs composed by {{artist.name}}:</p>\n  \n  <div class=\"gd-container\" fxLayout=\"column\">\n    <div class=\"gd-container\" fxLayout=\"column\">\n      <div *ngFor=\"let song of artist.compositions\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n        <span [routerLink]=\"['/song', song.id]\">{{ song.name }}</span>\n        <!--button mat-icon-button (click)=\"openSongOptionsDialog(song)\">\n          <mat-icon>more_horiz</mat-icon>\n        </button-->\n      </div>\n    </div>\n  </div>\n  \n  <p *ngIf=\"artist.eventIds.length\" class=\"gd-section\">{{artist.name}} played with the Dead on:</p>\n  \n  <gd-shows [eventIds]=\"artist.eventIds\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"artist.name+', '+artist.instruments.join(', ').split('_').join(' ')\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ArtistDetails } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { AuthService } from '../auth.service';\nimport { APIResolver } from '../auth.resolve';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-artist',\n  templateUrl: './artist.component.html',\n})\nexport class ArtistComponent {\n  \n  public artist: ArtistDetails;\n  public currentUser: any = { userName: '', userId: ''};\n\n  constructor(private data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, public resolve: APIResolver) {\n\n      \n    }\n\n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.artist = await this.data.getArtistDetails(params.get('id'));\n        //console.log(this.artist);\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n      if (params.has('id') && !this.artist.name) {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n    });\n    /* // not working\n    if (!this.artist) {\n      this.router.navigate(['/artist', (await this.data.getRandomArtistId())],\n        { replaceUrl: true });\n    }\n    */\n  }\n\n}\n","<div *ngIf=\"location\" fxLayout=\"column\">\n  <gd-header *ngIf=\"location\" title='{{ location.name }}'\n    subtitle='{{ location.state }}' imageUrl=\"{{ location.image }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div class=\"container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxFlex=\"100\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <p *ngIf=\"data.event\">The Band played on {{ data.event.date }}</p>\n      <p>{{ location.comment }}</p>\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <img class=\"image\" [defaultImage]=\"'assets/gd_placeholder.png'\" [lazyLoad]=\"location.thumbnail\" fxFlex=\"1 1 auto\">\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 100%\">\n      <gd-map fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"15\"\n        latitude=\"{{ location.geoloc.lat }}\" longitude=\"{{ location.geoloc.long }}\"></gd-map>\n    </div>\n  </div>\n\n  \n  <div *ngIf=\"videos\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <gd-youtube videoId=\"{{ currentVideoId }}\" width=\"100%\"></gd-youtube>\n      <ng-select bindLabel=\"title\"\n                 [clearable]=\"false\"\n                 (change)=\"selectVideo()\"\n                 [searchable]=\"false\"\n                 [(ngModel)]=\"currentVideoId\">         \n        <ng-option [value]=\"v.videoId\" *ngFor=\"let v of videos\">\n            <img src=\"{{v.thumbnail}}\" height=\"40px\"/>\n            {{v.title}}\n        </ng-option>\n      </ng-select>\n    </div>\n  </div>\n\n  \n  <p class=\"gd-section\">All shows in {{ location.name }}:</p>\n  \n  <gd-shows [eventIds]=\"location.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"location.name+', '+location.state\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Location } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DeadEventInfo } from '../services/types';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-location',\n  templateUrl: './location.component.html'//,\n  //styleUrls: ['./location.component.sass']\n})\nexport class LocationComponent {\n  public location: Location;\n  public currentUser: any = { userName: '', userId:'' };\n  public videos: any;\n  public currentVideoId: string;\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, private dialog: DialogService) {\n\n      \n\n    }\n\n    ngOnInit() {\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n      /*\n      if (this.route.snapshot.data['loggedIn']) {\n        this.auth.userProfile$.subscribe(userProfile => {\n          this.currentUser = this.resolve.getUser(userProfile);\n        });\n        console.log(this.currentUser);\n      } */\n   \n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.location = await this.data.getLocation(params.get('id'));\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n\n      if (params.has('id') && this.location.state) {\n        this.videos = await this.data.getYoutubeList(this.location.id, ['Grateful Dead', this.location.name]);\n        this.currentVideoId = this.videos[0].videoId;\n        console.log(this.videos);\n        }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n    });\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      event.venue+\", \"+event.date,\n      [\"Go to show\", \"Go to recording\"],\n      [() => this.router.navigate(['/show', event.id]),\n        () => this.openRecordingsDialog(event)]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.router.navigate(['/recording', r.id]) )\n    );\n  }\n\n  selectVideo(){\n    console.log(this.currentVideoId);\n  }\n\n}\n","\n<div fxLayout=\"column\">\n\n<!-- \n<div *ngIf=\"venues\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 100%\" fxFlex.sm=\"1 1 100%\"> \n  <gd-showmap [venues]=\"venues\" fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"2.5\"></gd-showmap>\n</div>\n-->\n<gd-header title='Map' subtitle=\"Selector\" userId='{{ currentUser.userId }}'></gd-header>\n \n<div class=\"gd-container\" fxLayout=\"row\" fxFlex=\"1 1 100%\" fxFlex.sm=\"1 1 100%\"> \n    <gd-showmap style=\"z-index:0;\" fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"2.5\"></gd-showmap>\n  </div>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>","import { Component } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { VenueDetails } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-mapselect',\n  templateUrl: './mapselect.component.html',\n  //styleUrls: ['./mapselect.component.sass']\n})\n\nexport class MapSelectComponent {\n  public currentUser: any = { userName: '', userId:'' };\n  protected venues: VenueDetails[];\n  protected test: number;\n\n  constructor(private data: DataService, private sanitizer: DomSanitizer,\n  public auth: AuthService) {\n\n    \n\n  }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n\n    //this.venues = await this.data.getVenueCoordinates();\n    //console.log(this.venues);\n\n\n\n\n  }\n\n\n\n}\n","<div *ngIf=\"playlist\" fxLayout=\"column\">\n  <gd-header title='Playlist '\n    subtitle=' – \"{{ playlist.name }}\"' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n  <div><br></div>\n    the playlist \"{{ playlist.name }}\" has been loaded in the audio player:\n    <div><br></div>\n    <div *ngFor=\"let t of playlist.playlist; index as i\">\n        <small>{{i+1}}. {{ t.title }}</small>\n    </div>\n\n\n</div>","import { Component } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { PlayerService } from '../services/player.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-playlist',\n  templateUrl: './playlist.component.html'\n})\nexport class PlaylistComponent {\n\n  public currentUser: any = { userName: '', userId:'' };\n  public playlist: any;\n  public shareUsername: string;\n  protected playlistId: string;\n\n  constructor(private data: DataService,  private router: Router, private route: ActivatedRoute,\n    private player: PlayerService, public auth: AuthService) {}\n\n    async ngOnInit() {\n\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n\n      this.route.paramMap.subscribe(async params => {\n        if (params.has('id')) {\n          this.getPlaylist(params.get('id'));\n        }\n      });\n\n    }\n\n    async getPlaylist(playlistId){\n      //playlistId = '6181aba048dc0b94d09e8664';\n      const res = await this.data.getPlaylist(playlistId);\n      this.playlist = res.playlists[0];\n      console.log(this.playlist);\n      this.player.playlist = [...this.playlist.playlist];\n      this.player.storePlaylist();\n    }\n  }","<!--div *ngIf=\"recording && event\" fxLayout=\"column\">\n  <gd-header *ngIf=\"recording && event\" title='{{ recording.etreeId }}'\n    subtitle='{{ event.location }}'>\n  </gd-header>\n\n  <div *ngIf=\"recording\" class=\"gd-container\" fxLayout=\"column\" class=\"topmargin\" >\n    <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n      <ng-container *ngIf=\"event\">\n        Recorded at: {{ event.venue }}, {{ event.location }}, {{ event.state }}, {{ event.date }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.lineage\">\n        Lineage: {{ recording.info.lineage }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.source\">\n        Source: {{ recording.info.source }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.notes\">\n        Notes: {{ recording.info.notes }}<br/></ng-container>\n      <ng-container *ngIf=\"recording.info.keywords\">\n        Notes: {{ recording.info.keywords }}<br/></ng-container>\n      <br>\n      <ng-container *ngIf=\"recording.tracks\">\n        Tracks:\n        <div *ngFor=\"let t of recording.tracks\">\n          <span [routerLink]=\"['/song', t.id]\"> {{ t.track }}: {{ t.title }}</span>\n          <button mat-icon-button (click)=\"openTrackOptionsDialog(t)\">\n            <mat-icon>more_horiz</mat-icon>\n          </button>\n        </div><br/>\n      </ng-container-->\n\n<div *ngIf=\"recordinginfo\" fxLayout=\"column\">\n  <gd-header title='{{ recordinginfo.etree_id }}'\n    subtitle=' – {{ recordinginfo.location_name }}' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n      <div class=\"gd-container\" fxLayout=\"column\" class=\"topmargin\" >\n        <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n          <ng-container>\n            <i>Recorded at:</i> \n            <span class=\"link\" [routerLink]=\"['/venue', recordinginfo.venue_id]\">{{ recordinginfo.venue_name }}, </span>\n            <span class=\"link\" [routerLink]=\"['/location', recordinginfo.location_id]\">{{ recordinginfo.location_name }}, </span>\n            <span class=\"link\" [routerLink]=\"['/show', recordinginfo.show_id]\">{{ recordinginfo.date }} </span>\n          </ng-container><div><br></div>\n\n          <ng-container *ngIf=\"recordinginfo.lineage\">\n            <i>Lineage:</i> {{ recordinginfo.lineage }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.source\">\n            <i>Source:</i> {{ recordinginfo.source }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.notes\">\n            <i>Notes:</i> {{ recordinginfo.notes }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.subject\">\n            <i>Subject:</i> {{ _array.isArray(recordinginfo.subject) ? recordinginfo.subject.join(', ') : recordinginfo.subject }}</ng-container><div><br></div>\n          <ng-container *ngIf=\"tracklist\">\n            Tracks:\n            <div *ngFor=\"let t of tracklist\">\n              <span> {{ t.track }}: {{ t.title }}</span>\n              <button mat-icon-button (click)=\"openTrackOptionsDialog(t)\">\n                <mat-icon>more_horiz</mat-icon>\n              </button>\n            </div>\n            <span class=\"link\" (click)=\"addAllToPlaylist()\">add all to playlist</span>\n          </ng-container><div><br></div>\n          \n\n     <a href=\"{{ 'https://archive.org/details/' + recordinginfo.etree_id }}\" target=\"_blank\">  <img src=\"https://archive.org/images/glogo.png\" [style.object-fit]=\"'contain'\"></a>\n     \n    </div>\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"recordinginfo.etree_id+', '+recordinginfo.location_name\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { RecordingDetails, DeadEventInfo, AudioTrack, RecordingInfo, Recording } from '../services/types';\nimport { PlayerService } from '../services/player.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-recording',\n  templateUrl: './recording.component.html'\n})\nexport class RecordingComponent {\n  protected recording: RecordingDetails;\n  protected event: DeadEventInfo;\n  public currentUser: any = { userName: '', userId: ''};\n  protected tracklist: any[];\n  public recordinginfo: RecordingInfo;\n  protected _array = Array;\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, private dialog: DialogService,\n    private player: PlayerService, public auth: AuthService) {\n\n      \n\n    }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        //this.recording = await this.data.getRecording(params.get('id'));\n        //this.event = await this.data.getEventInfoForRecording(this.recording.id);\n\n        //const rec_id = params.get('id');\n        this.recordinginfo = await this.data.getRecordingInfo(params.get('id'));\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n\n      if (params.has('id') && this.recordinginfo) {\n        var tracklist = await this.data.getTracklist(params.get('id'));\n        tracklist.forEach(t =>{  // format to Audiotrack, take first song_id for now\n          if (t.song) {\n            t['id'] = t.song[0].song_id;\n            delete t.song;\n          }\n          t.track = t.track.toString();\n        })\n        this.tracklist = tracklist;\n        //console.log(this.recordinginfo)\n        //console.log(this.tracklist);\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n\n      /*\n      if (!this.recording) {\n        this.router.navigate(['/recording', (await this.data.getRandomRecording()).id],\n          { replaceUrl: true });\n      } */\n    });\n  }\n  \n  protected openTrackOptionsDialog(audio: AudioTrack) {    \n    if (audio.id) {\n      this.dialog.openMultiFunction(\n        audio.track + \" \" + audio.title,\n        [\"add to playlist\", \"go to song\"], [() => this.addTrackToPlaylist(audio), \n          () => this.router.navigate(['/song', audio.id])]);\n    }\n    else {\n      this.dialog.openMultiFunction(\n        audio.track + \" \" + audio.title,\n        [\"add to playlist\"], [() => this.addTrackToPlaylist(audio)]);\n    }\n  }\n  \n  \n  /*\n  private async addTrackToPlaylist(audio: AudioTrack) {\n    console.log(audio.id)\n    const info = await this.data.getEventInfo(this.event.id);\n    const track = await this.data.getTrackFromAudio(audio, info, this.recording.etreeId);\n    if (track) this.player.addToPlaylist(track);\n  }\n  */\n\n  private async addTrackToPlaylist(audio: AudioTrack) {\n    const track = this.data.toPlayerTrack(this.recordinginfo.venue_name, \n                                          this.recordinginfo.location_name, \n                                          this.recordinginfo.date, \n                                          this.recordinginfo.show_id,\n                                          this.recordinginfo.etree_id,\n                                          audio,\n                                          this.recordinginfo.recording_id);\n                                          \n    this.player.addToPlaylist(track);\n  }\n\n\n  public addAllToPlaylist() {\n    if (this.tracklist) this.tracklist.forEach(t => this.addTrackToPlaylist(t));\n  }\n\n}\n","<div *ngIf=\"event\" fxLayout=\"column\">\n  <gd-header style=\"position: fixed; width: 100%\" *ngIf=\"event\" title='{{event.location.name}}, {{event.location.state}}' subtitle='{{formatDate}}'\n    imageUrl=\"{{eventImage}}\" userId='{{ currentUser.userId }}'>\n    <gd-weather [weather]=\"event.weather\"></gd-weather>\n  </gd-header>\n  <div class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" class=\"topmargin\" >\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\" [routerLink]=\"['/location', event.location.id]\">\n      <h2 class=\"titlef\">Location: <span class=\"normweight\">{{ event.location.name }}</span></h2>\n      <img class=\"image\" *ngIf=\"event.location.thumbnail\" [lazyLoad]=\"event.location.thumbnail\" fxFlex=\"1 1 auto\"  [style.object-fit]=\"'contain'\">\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\" [routerLink]=\"['/venue', event.venue.id]\">\n      <h2 class=\"titlef\">Venue: <span class=\"normweight\">{{ event.venue.name }}</span></h2>\n      <img class=\"image\" *ngIf=\"event.venue.thumbnail\" [lazyLoad]=\"event.venue.thumbnail\" fxFlex=\"1 1 auto\"  [style.object-fit]=\"'contain'\">\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n        <h2 class=\"titlef\">Setlist </h2>\n      <div fxLayout=\"column\" *ngFor=\"let set of event.setlist\">\n        <h3>{{ set.name }}</h3>\n        <!-- <div *ngFor=\"let song of set.songs\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\"> -->\n        <div *ngFor=\"let song of set.songs, let i = index\" fxLayout=\"row\">\n          <span [routerLink]=\"['/song', song.id]\">{{( \"0\"+(i+1)).slice(-2) }} {{ song.name }}</span>\n          <button mat-icon-button (click)=\"openSongOptionsDialog(song, set.name, i+1)\">\n            <mat-icon>more_horiz</mat-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <h2 class=\"titlef\">Lineup</h2>\n        <div *ngFor=\"let p of event.performers\" [routerLink]=\"['/artist', p.id]\"> \n          <img class=\"image\" [lazyLoad]=\"p.thumbnail\"\n          [style.width]=\"'70px'\" [style.height]=\"'70px'\"> \n          <span>&nbsp;&nbsp;&nbsp;&nbsp;{{ p.name }} ({{ p.instruments.join(', ') }})</span>\n        </div>\n \n    <!--div fxLayout=\"column\" fxFlex=\"1 1 auto\">\n      <iframe [src]=\"recordingUrls[0]\" [style.min-width]=\"'350px'\" [style.height]=\"'100%'\" frameborder=\"0\"></iframe>\n    </div-->\n    \n  </div>\n  \n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"titlef\">News of the week</h2>\n    <div *ngFor=\"let n of event.news\">\n      <a [href]=\"n.url\" target=\"_blank\" [style.text-decoration]=\"'none'\">\n        {{ n.date+\": \"+n.title+\" (\"+n.source+\")\" }}\n      </a>\n    </div>\n  </div>\n  \n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"titlef\">Available recordings</h2>\n    <div *ngFor=\"let r of event.recordings\">\n      <span [routerLink]=\"['/recording', r.id]\">{{ r.etreeId }}</span>\n      <button mat-icon-button (click)=\"openRecordingOptionsDialog(r)\">\n        <mat-icon>more_horiz</mat-icon>\n      </button>\n    </div>\n  </div>\n  \n\n    <!-- \n  <h2 *ngIf=\"photos.length\" class=\"gd-section\"><span class=\"titlef\">Photos from the show</span></h2>\n  \n  <div *ngIf=\"photos.length\" class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\">\n    <div *ngFor=\"let s of photos\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"33\" fxFlex.xs=\"100\">\n      <img style=\"max-width: 200px;\" class=\"image\" [lazyLoad]=\"s\" [style.object-fit]=\"'contain'\">\n    </div>\n  </div>\n-->\n  \n<div *ngIf=\"photos.length>0\">\n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"gd-section\"><span class=\"titlef\">Photos</span></h2>\n    <div id=\"galleryContainer\">\n      <div style=\"width: 100%;\"\n        ng2-carouselamos\n        class=\"slides-wrapper\"\n        [items]=\"photos\"\n        [width] = auto\n        [$prev]=\"prev\"\n        [$next]=\"next\"\n        [$item]=\"item\"\n      >\n      </div>\n\n      <ng-template #prev>\n        <img style=\"cursor: pointer;\" *ngIf=\"photos.length>1\" src=\"assets/arrow_left.png\" id=\"left\" height=\"30\" />\n      </ng-template>\n      <ng-template #next>\n        <img style=\"cursor: pointer;\" *ngIf=\"photos.length>1\" src=\"assets/arrow_right.png\" id=\"right\" height=\"30\"/>\n      </ng-template>\n      <ng-template #item let-item let-i=\"index\">\n\n      <div class=\"slide-items\">\n        <img src=\"{{ item.thumbnail }}\" (click)=\"onClickPhoto(item)\" height=\"200px\" width=\"auto\">\n        <!--div>{{ item.description }}</div>\n        <u><a href=\"{{ item.source }}\" target=\"_blank\">({{ item.collection }})</a></u-->\n      </div>\n    </ng-template>\n    </div>\n    <div *ngIf=\"currentPhoto\" class=\"photo-text\">\n      <span *ngIf=\"currentPhoto.description\">{{ currentPhoto.description }} <br> </span>\n      <a *ngIf=\"currentPhoto.collection=='GDAO'\" href=\"{{ currentPhoto.source }}\" target=\"_blank\">\n        <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" height=\"50px\" width=\"auto\">\n      </a>\n      <a *ngIf=\"currentPhoto.collection=='Psilo'\" href=\"http://www.psilo.com/dead/\" target=\"_blank\">\n        <img src=\"http://www.psilo.com/dead/images/logo_psilo.jpg\" height=\"50px\" width=\"auto\">\n      </a>\n    </div>\n  </div>\n\n  \n  <!--div *ngIf=\"currentPhoto\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <p [style.margin-bottom]=\"'25px'\"></p>\n    <img class=\"current-photo\" src=\"{{ currentPhoto.image }}\" (click)=\"lightbox.openLightboxArray(photosLightbox, currentPhoto.index)\"> \n  </div-->\n</div>\n\n\n<div *ngIf=\"artifacts.length>0\">\n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"gd-section\"><span class=\"titlef\">Other Artifacts</span></h2>\n    <div id=\"galleryContainer\">\n      <div style=\"width: 100%;\"\n        ng2-carouselamos\n        class=\"slides-wrapper\"\n        [items]=\"artifacts\"\n        [width] = auto\n        [$prev]=\"prev\"\n        [$next]=\"next\"\n        [$item]=\"item\"\n      >\n      </div>\n\n      <ng-template #prev>\n        <img style=\"cursor: pointer;\" *ngIf=\"artifacts.length>1\" src=\"assets/arrow_left.png\" id=\"left\" height=\"30\" />\n      </ng-template>\n      <ng-template #next>\n        <img style=\"cursor: pointer;\" *ngIf=\"artifacts.length>1\" src=\"assets/arrow_right.png\" id=\"right\" height=\"30\"/>\n      </ng-template>\n      <ng-template #item let-item let-i=\"index\">\n\n      <div class=\"slide-items\">\n        <img src=\"{{ item.thumbnail }}\" (click)=\"onClickArtifact(item)\" height=\"200px\" width=\"auto\">\n        <!--div>{{ item.description }}</div>\n        <u><a href=\"{{ item.source }}\" target=\"_blank\">({{ item.collection }})</a></u-->\n      </div>\n    </ng-template>\n    </div>\n    <div *ngIf=\"currentArtifact\" class=\"photo-text\">\n      {{ currentArtifact.type }} <br>\n      <span *ngIf=\"currentArtifact.description\">{{ currentArtifact.description }} <br> </span>\n      <a *ngIf=\"currentArtifact.collection=='GDAO'\" href=\"{{ currentArtifact.source }}\" target=\"_blank\">\n        <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" height=\"50px\" width=\"auto\">\n      </a>\n      <a *ngIf=\"currentArtifact.collection=='Psilo'\" href=\"http://www.psilo.com/dead/\" target=\"_blank\">\n        <img src=\"http://www.psilo.com/dead/images/logo_psilo.jpg\" height=\"50px\" width=\"auto\">\n      </a>\n    </div>\n  </div>\n\n  <!--div *ngIf=\"currentArtifact\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <p [style.margin-bottom]=\"'25px'\"></p>\n    <img class=\"current-photo\" src=\"{{ currentArtifact.image }}\" (click)=\"lightbox.openLightboxArray(artifactsLightbox, currentArtifact.index)\"> \n  </div-->\n</div>\n\n\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"event.location.name+', '+event.location.state+' – '+event.date\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component, ChangeDetectorRef } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { DeadEventDetails, Artifact, SongInfo, ArtifactType, Recording, AudioTrack } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { PlayerService } from '../services/player.service';\nimport { AuthService } from '../auth.service';\nimport { LightboxService } from '../services/lightbox.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-show',\n  templateUrl: './show.component.html',\n  styleUrls:['./show.component.sass']\n})\nexport class ShowComponent {\n  \n  public event: DeadEventDetails;\n  protected recordingUrls: SafeStyle[];\n  //protected photos: string[];\n  protected photos: Artifact[];\n  protected artifacts: Artifact[];\n  protected eventImage: string;\n  public currentUser: any = { userName: '', userId:'' };\n  protected formatDate: string;\n  public currentPhoto: Artifact;\n  public photosLightbox: any;\n  public currentArtifact: Artifact;\n  public artifactsLightbox: any;\n  \n  constructor(private data: DataService, private sanitizer: DomSanitizer,\n    private router: Router, private route: ActivatedRoute,\n    private dialog: DialogService, private player: PlayerService, public auth: AuthService, \n    private changeDetectorRef: ChangeDetectorRef, private lightbox: LightboxService) {\n\n    }\n\n    async ngOnInit() {\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n\n      /*\n      this.currentUser = { userName: '', userId: ''}\n      if (this.route.snapshot.data['loggedIn']) {\n        this.auth.userProfile$.subscribe(userProfile => {\n          this.currentUser = this.resolve.getUser(userProfile);\n        });\n        console.log(this.currentUser);\n      }*/\n      \n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.event = await this.data.getEventDetails(params.get('id'));\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n      if (this.event.date) {\n        this.formatDate = this.data.formatDate(this.event.date);\n        this.recordingUrls = this.event.recordings.map(r => \n          this.sanitizer.bypassSecurityTrustResourceUrl(\"https://archive.org/embed/\"+r.etreeId+\"&playlist=1\")\n        );\n        console.log(this.event)\n        this.photos = this.event.artifacts\n          .filter(a => a.type === ArtifactType.Photo)//.map(a => a.image);\n        this.artifacts = this.event.artifacts.filter(a => a.type !== ArtifactType.Photo);\n        const poster = this.event.artifacts.filter(a => a.type == ArtifactType.Poster)[0];\n        const pass = this.event.artifacts.filter(a => a.type == ArtifactType.Pass)[0];\n        const ticket = this.event.artifacts.filter(a => a.type == ArtifactType.Ticket)[0];\n        this.eventImage = this.photos.length ? this.photos[0].image\n          : poster ? poster.image : pass ? pass.image : ticket ? ticket.image\n          : this.event.location.thumbnail;\n        var gl;\n        if (this.photos.length>0) {\n          gl = this.lightbox.makeGallery(this.photos);\n          this.photosLightbox = gl[0];\n          this.photos = gl[1];\n          this.currentPhoto = this.photos[0];\n        } \n        if (this.artifacts.length) {\n          gl = this.lightbox.makeGallery(this.artifacts);\n          this.artifactsLightbox = gl[0];\n          this.artifacts = gl[1];\n          this.currentArtifact = this.artifacts[0];\n          console.log(this.currentArtifact);\n        }\n        this.changeDetectorRef.detectChanges();\n\n\n      } else {\n        //this.router.navigate(['/show', await this.data.getRandomEventId()],\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n      \n    });\n  }\n\n  /*\n  protected openSongOptionsDialog(song: SongInfo, set: string, idx: number) {\n    this.dialog.openMultiFunction(\n      //song.name+\"', \"+this.event.venue.name+\", \"+this.event.date,\n      set + \"/Track \" + idx + \": \" + '\"'+song.name+'\"',\n      [\"add to playlist\", \"go to song\"],\n      [() => this.addSongToPlaylist(song),\n        () => this.router.navigate(['/song', song.id])]\n    );\n  }\n*/\n\n  protected openSongOptionsDialog(song: SongInfo, set: string, idx: number) {\n    this.dialog.openMultiFunction(\n      //song.name+\"', \"+this.event.venue.name+\", \"+this.event.date,\n      set + \"/Track \" + idx + \": \" + '\"'+song.name+'\"',\n      [\"add to playlist\", \"go to song\"],\n      [() => this.openRecordingsDialog(song),\n        () => this.router.navigate(['/song', song.id])]\n    );\n  }\n\n\n  private openRecordingsDialog(song: SongInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+song.name+\"', \"+this.event.venue+\", \"+this.event.date,\n      this.event.recordings.map(r => r.etreeId),\n      this.event.recordings.map(r => () => this.addTrackToPlaylist(song, r.etreeId, r.id))\n    );\n  }\n\n  \n  protected openRecordingOptionsDialog(recording: Recording) {\n    this.dialog.openMultiFunction(\n      \"Recording \"+recording.etreeId,\n      [\"add all to playlist\", \"go to recording\"],\n      [() => this.addRecordingToPlaylist(recording),\n        () => this.router.navigate(['/recording', recording.id])]\n    );\n  }\n  \n  /*\n  private async addSongToPlaylist(song: SongInfo) {\n    const info = await this.data.getEventInfo(this.event.id);\n    const track = await this.data.getTrack(song, info);\n    if (track) this.player.addToPlaylist(track);\n  }\n\n\n private async addSongToPlaylist(song: SongInfo) {\n  const info = await this.data.getEventInfo(this.event.id);\n  const track = await this.data.getTrack(song, info);\n  if (track) this.player.addToPlaylist(track);\n}\n  */\n\n\n\nprivate async addTrackToPlaylist(song: SongInfo, recordingEtreeId: string, recordingId: string) {\n  const eventInfo = { \n    id: this.event.id,\n    date: this.event.date,\n    location: this.event.location.name,\n    state: '',\n    venue: this.event.venue.name,\n    recordings: this.event.recordings,\n    artifacts: null //this.artifacts\n  }\n  var songDetails = await this.data.getSong(song.id);\n  this.data.getTracks(songDetails, eventInfo, recordingEtreeId, recordingId)\n    .forEach(t => this.player.addToPlaylist(t));\n}\n  /*\n  private async addRecordingToPlaylist(recording: Recording) {\n    const info = await this.data.getEventInfo(this.event.id);\n    const tracks = await this.data.getRecordingTracks(recording, info);\n    if (tracks) tracks.forEach(t => this.player.addToPlaylist(t));\n  }\n*/\n\n  private async addRecordingToPlaylist(recording: Recording) {\n    //const info = await this.data.getEventInfo(this.event.id);\n    var tracklist = await this.data.getTracklist(recording.id);\n    tracklist.forEach(t =>{  // format to Audiotrack, take first song_id for now\n      if (t.song) {\n        t['id'] = t.song[0].song_id;\n        delete t.song;\n      }\n      t.track = t.track.toString();\n    })\n    //console.log(tracklist)\n    if (tracklist) tracklist.forEach(t => this.addRecordingTrackToPlaylist(t, recording));\n  }\n\n  private async addRecordingTrackToPlaylist(audio: AudioTrack, recording: Recording) {\n    //console.log(audio)\n    const track = this.data.toPlayerTrack(this.event.venue.name, \n                                          this.event.location.name, \n                                          this.event.date, \n                                          this.event.id,\n                                          recording.etreeId,\n                                          audio,\n                                          recording.id\n                                          );\n    this.player.addToPlaylist(track);\n  }\n  \n  onClickPhoto(p){\n    this.currentPhoto = p;\n    this.lightbox.openLightboxArray(this.photosLightbox, p.index)\n  }\n\n  onClickArtifact(a){\n    this.currentArtifact = a;\n    this.lightbox.openLightboxArray(this.artifactsLightbox, a.index)\n  }\n\n}\n","<div *ngIf=\"song\" fxLayout=\"column\">\n  <gd-header *ngIf=\"song\" title=\"{{ song.name }}\"\n    subtitle=\"{{ subtitle }}\" userId='{{ currentUser.userId }}'></gd-header>\n  <div fxLayout=\"column\" class=\"gd-container\">\n    \n    <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n      <ng-container *ngIf=\"song.composedBy && song.composedBy.length\">\n        Composed by:\n        <div *ngFor=\"let a of song.composedBy\"\n          [routerLink]=\"['/artist', a.id]\">{{a.name}}</div><br/>\n      </ng-container>\n      <ng-container *ngIf=\"song.lyricsBy && song.lyricsBy.length\">\n        Lyrics by:\n        <div *ngFor=\"let a of song.lyricsBy\"\n          [routerLink]=\"['/artist', a.id]\">{{a.name}}</div><br/>\n      </ng-container>\n      <ng-container *ngIf=\"firstPlayed\">\n        First played on: {{ firstPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"lastPlayed\">\n        Last played on: {{ lastPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"timesPlayed\">\n        Number of performances: {{ timesPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"totalRecordings\">\n        Total number of recordings: {{ totalRecordings }}<br/></ng-container>\n    </div>\n    \n    <p class=\"gd-container\">All performances of {{song.name}}:</p>\n    \n    <gd-shows [eventIds]=\"song.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"song.name\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import * as _ from 'lodash';\nimport { Component } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { SongDetails, DeadEventInfo } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { PlayerService } from '../services/player.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-song',\n  templateUrl: './song.component.html'\n})\nexport class SongComponent {\n  \n  public song: SongDetails;\n  protected subtitle: string;\n  protected firstPlayed: string;\n  protected lastPlayed: string;\n  protected timesPlayed: number;\n  protected totalRecordings: number;\n  protected events: DeadEventInfo[];\n  public currentUser: any = { userName: '', userId: ''};\n\n  constructor(private data: DataService, private player: PlayerService,\n    private router: Router, private route: ActivatedRoute,\n    private dialog: DialogService, public auth: AuthService) {\n\n      \n\n    }\n\n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.song = await this.data.getSong(params.get('id'));\n        this.subtitle = _.uniq(this.song.composedBy.concat(this.song.lyricsBy)\n          .map(a => a.name)).join(', ');\n        this.events = await this.data.getEventInfos(this.song.eventIds);\n        if (this.events.length) {\n          this.firstPlayed = this.events[0].date;\n          this.lastPlayed = this.events[this.events.length-1].date;\n          this.timesPlayed = this.events.length;\n          this.totalRecordings = _.sum(this.events.map(e => e.recordings.length));\n        }\n      }\n      if (!this.song) {\n        this.router.navigate(['/song', (await this.data.getRandomSong()).id],\n          { replaceUrl: true });\n      }\n    });\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      this.song.name+\"', \"+event.venue+\", \"+event.date,\n      [\"Add to playlist\", \"Go to show\"],\n      [() => this.openRecordingsDialog(event),\n        () => this.router.navigate(['/show', event.id])]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+this.song.name+\"', \"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.addRecordingToPlaylist(r.etreeId, event, r.id))\n    );\n  }\n\n  private addRecordingToPlaylist(recordingEtreeId: string, event: DeadEventInfo, recordingId: string) {\n    this.data.getTracks(this.song, event, recordingEtreeId, recordingId)\n      .forEach(t => this.player.addToPlaylist(t));\n  }\n\n}\n","<gd-header title='{{ \"About\" }}'\n    subtitle='{{ \"\" }}' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\">\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Lato\">\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\n<style>\ndiv {font-family: \"Lato\", sans-serif; color:rgb(59, 59, 59)}\na.disabled {\n  pointer-events: none;\n  cursor: default;\n}\n</style>\n\n\n<!-- Page content -->\n<div class=\"w3-content\" style=\"max-width:2000px;margin-top:32px\">\n\n  <!-- The Band Section -->\n  <div class=\"w3-container w3-content w3-center w3-padding-16\" style=\"max-width:800px\" id=\"top\">\n    <!-- <h2 class=\"w3-wide\" [routerLink]=\"['/mapselect']\">THE GRATEFUL DEAD CONCERT EXPLORER</h2> -->\n    <img src=\"/assets/gd_logo1_start.png\" class=\"w3-round w3-margin-bottom\" alt=\"grateful dead explorer logo\" style=\"width:65%\" [routerLink]=\"['/mapselect']\">\n    <p style=\"cursor:pointer\" class=\"w3-opacity\"><i><u routerLink=\"/mapselect\">click to enter</u></i></p>\n      </div>\n\n  <div class=\"w3-container w3-content w3-center\" style=\"max-width:800px\" id=\"overviewstart\">\n      <p class=\"w3-justify\">\n          The Grateful Dead Concert Explorer is a Web application that enables user to navigate and explore digital libraries of live music recordings and discover and share associated artifacts that are dynamically linked within the application. It aims to demonstrate how Semantic Audio and Linked Data technologies can produce an improved user experience for browsing and exploring live music collections, by collecting information from a variety of different Web sources and employing Music Information Retrieval (MIR) techniques. \n        </p>\n          <p class=\"w3-justify\">\n          This prototype demonstrator focuses on the concerts of the Grateful Dead, motivated by the ongoing interest in detailed descriptions of their performances, evidenced by the large amount of information available on the Web detailing various aspects of those events. The application links the large number of concert recordings by the Grateful Dead available in the Internet Archive with audio analysis data and retrieves additional information and artifacts (e.g. band lineup, photos, scans of tickets and posters, reviews) from existing Web sources, to explore and visualize the collection. The project demonstrates mechanisms for musicians and the music industry to provide services for consumers to enjoy live music performances recognizing the social and cultural value of live music and fan communities.\n      </p>\n      <p class=\"w3-justify\">\n        This is an ongoing project in its early stages and not yet optimzed for mobile devices. \n      </p>\n      <p class=\"w3-justify\">\n        The technologies exploited in this work that were developed in the <a href=\"http://www.semanticaudio.ac.uk/\" target=\"_blank\"><u>EPSRC FAST IMPACt</u></a> project include:\n      </p>\n      <ul class=\"w3-justify\">\n          <li>Ontological data models for the representation of performed music as cultural artifacts, and its linkage to associated non-musical artifacts</li>\n          <li>Music information retrieval and processing algorithms for the automatic generation of playlists and audio mixes based on user-selected criteria</li>\n          <li>Music-structure analysis for the comparison of performances</li>\n          <li>Audio alignment of different user-generated recordings of live-music performances</li>\n      </ul>\n      <p class=\"w3-justify\">\n      The main functions of the current version are described in the following. Clicking on the top left logo opens a menu with links to this start page and the <a href=\"#mapstart\"><u><i>Map View</i></u></a>.\n    </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"mapstart\">\n      <h3 class=\"w3-wide\">Map View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_map.png\" alt=\"map view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Map View</i> shows the world map with markers indicating the locations of concerts. Clicking on a marker opens a menu with links to the pages for the venue (<a href=\"#venuestart\"><u><i>Venue View</i></u></a>), and to the pages for the concerts at that location (<a href=\"#showstart\"><u><i>Show View</i></u></a>). While by default all concert locations are displayed, specific tours can be selected from the pull-down menu on the top left. When selecting a tour, only the concerts from the tour are displayed on the map and connected by arrows indicating the order of concerts. The map also has a separate search function covering the concerts on the map.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"showstart\">\n      <h3 class=\"w3-wide\">Show View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_show.png\" alt=\"show view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Show View</i>&nbsp; shows information about a specific concert, including the location, venue, the setlist, the lineup and the additional recordings available in the archive. The button next to the recording IDs opens a dialogue to either go to the <a href=\"#recordingstart\"><u><i>Recording View</i></u></a>&nbsp; for the selected recording, or add all songs of the concert recording to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. One can navigate to other pages by clicking on any item, for instance, clicking on the venue opens the <a href=\"#venuestart\"><u><i>Venue View</i></u></a>&nbsp; for the respective venue. Clicking on the button next to a song opens a dialogue to either go to the <a href=\"#songstart\"><u><i>Song View</i></u></a>&nbsp; or add the song to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. Clicking on photos or other artifacts either opens a higher resolution image or opens the source page at the <a href=\"https://www.gdao.org/\" target=\"_blank\"><u>Grateful Dead Archive Online (GDAO)</u></a> in a new tab.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"songstart\">\n      <h3 class=\"w3-wide\">Song View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_song.png\" alt=\"song view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Song View</i> shows information about a selected song. This includes the composers at the top of the page and the number of performances and recordings available. Clicking on an item in the list of shows opens the <a href=\"#showstart\"><u><i>Show View</i></u></a>. The button next to the location opens a dialogue which additionally lets the user add the song from the respective show to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. The dialogue shows all available recordings from the selected concert.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"locationstart\">\n      <h3 class=\"w3-wide\">Location View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_location.png\" alt=\"location view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Location View</i> shows information about a city where concerts were held. The list of shows provides links to the <a href=\"#showstart\"><u><i>Show View</i></u></a>&nbsp; for all shows at that location.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"venuestart\">\n      <h3 class=\"w3-wide\">Venue View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_venue.png\" alt=\"venue view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n          The <i>Venue View</i> shows information about a venue where concerts were held. The list of shows provides links to the <a href=\"#showstart\"><u><i>Show View</i></u></a>&nbsp; for all shows at that venue.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"recordingstart\">\n      <h3 class=\"w3-wide\">Recording View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_recording.png\" alt=\"recording view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Recording View</i> shows information about a specific recording from the <a href=\"https://archive.org/details/etree\" target=\"_blank\"><u>Live Music Archive</u></a> at the <a href=\"https://archive.org/\" target=\"_blank\"><u>Internet Archive</u></a>. The information includes source and lineage information of the recording, as well as the list of songs. Clicking on the button next to a song opens a dialogue to add the selected song to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. Clicking on the logo under the track list opens the page for the recording at the <a href=\"https://archive.org/\" target=\"_blank\"><u>Internet Archive</u></a> in a new tab.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"playerstart\">\n      <h3 class=\"w3-wide\">Audio Player</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_player.png\" alt=\"audio player\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The audio player at the bottom of the page streams audio directly from the <a href=\"https://archive.org/details/etree\" target=\"_blank\"><u>Live Music Archive</u></a>. Songs can be added to the playlist from the Web application where songs are listed, for instance in the <a href=\"#showstart\"><u><i>Show View</i></u></a>, <a href=\"#recordingstart\"><u><i>Recording View</i></u></a>&nbsp; or <a href=\"#songstart\"><u><i>Song View</i></u></a>. In addition to the standard functions (play, stop, volume, etc.), the button with the eye symbol expands/hides the waveform view and playlist.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"additionalstart\">\n      <h3 class=\"w3-wide\">Additional Functions</h3>\n      <p class=\"w3-justify\">\n        Not all functions of the demo application are listed here, and there are more functions planned to be implemented in the near future including social media aspects and MIR, e.g. user discussions of concerts and the automatic generation of playlist mixes based on user-defined parameters and audio feature analysis results. \n      </p>\n        <p class=\"w3-justify\">\n          <s>A demo of a an automated mix playing excerpts of recordings of a specified song spanning the career of the Grateful Dead in a seamless mix while retrieving and displaying artifacts in real-time can be found <a class=\"disabled\" href=\"https://grateful-dead-live.github.io/plunderphonics/\" target=\"_blank\"><u><b>here</b></u></a>.</s> &nbsp; <b><i>down for maintenance</i></b>\n      </p>\n      <p class=\"w3-justify\">\n        Here is a demo video of a an automated mix playing excerpts of recordings of a specified song spanning the career of the Grateful Dead in a seamless mix while retrieving and displaying artifacts in real-time:\n      </p>\n      <div style=\"position:relative;padding-top:56.25%;\">\n        <iframe src=\"https://www.youtube.com/embed/M-zvJYRhnL8\" allowfullscreen style=\"position:absolute;top:0;left:0;width:100%;height:100%;\"></iframe>\n      </div>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-16\" style=\"max-width:800px\" id=\"logostart\">\n      <a href=\"https://archive.org\" target=\"_blank\"> <img src=\"https://archive.org/images/glogo.png\" class=\"w3-round w3-margin-right\" alt=\"internet archive logo\" style=\"width:8%\"></a>\n      <a href=\"http://c4dm.eecs.qmul.ac.uk\" target=\"_blank\"> <img src=\"https://sites.google.com/site/mathemusicalconversations/_/rsrc/1396930666900/about/c4dm_qml-logo.jpg\" class=\"w3-round w3-margin-right w3-margin-left\" alt=\"c4dm qmul logo\" style=\"width:18%\"></a>\n      <a href=\"https://epsrc.ukri.org/\" target=\"_blank\"> <img src=\"/assets/epsrc.jpg\" class=\"w3-round w3-margin-right w3-margin-left\" alt=\"epsrc logo\" style=\"width:17%\"></a>\n      <a href=\"https://www.gdao.org\" target=\"_blank\"> <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" class=\"w3-round w3-margin-left\" alt=\"gdao logo\" style=\"width:8%\"></a>\n  </div>\n  \n  <div class=\"w3-container w3-content w3-center\" style=\"max-width:800px\" id=\"emailstart\">\n      <!--a href=\"{{ 'mai' + 'lto' + ':' + part1 + part2 + part3 + part4 + part5 + part6 + part7 }}\"><u>Email us</u> </a-->\n      <a href=\"{{ 'mai' + 'lto' + ':' + email }}\"><u>Email us</u> </a>\n  </div>\n  \n  <p style=\"padding: 0 0 5em 0\"></p>\n<!-- End Page Content -->\n</div>\n\n","import { Component } from '@angular/core';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { AuthService } from '../auth.service';\nimport { EMAILADDRESS, DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-start',\n  templateUrl: './start.component.html'\n})\nexport class StartComponent {\n\n  public currentUser: any = { userName: '', userId: ''};\n  public email: string;\n  \n  constructor(private sanitizer: DomSanitizer,\n    public auth: AuthService) {\n\n      \n\n    }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.email = EMAILADDRESS;\n\n  }\n\n}\n","<div *ngIf=\"venue\" fxLayout=\"column\">\n  <gd-header *ngIf=\"venue\" title='{{ venue.name }}'\n    subtitle='{{ location }}' imageUrl=\"{{ venue.image }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div class=\"container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxFlex=\"100\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <p *ngIf=\"data.event\">The Band played on {{ data.event.date }}</p>\n      <p>{{ venue.comment }}</p>\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <img class=\"image\" [lazyLoad]=\"venue.thumbnail\" fxFlex=\"1 1 auto\">\n    </div>\n    <div *ngIf=\"venue.geoloc\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 100%\">\n      <gd-map fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"15\"\n        latitude=\"{{ venue.geoloc.lat }}\" longitude=\"{{ venue.geoloc.long }}\"></gd-map>\n    </div>\n  </div>\n\n  <div *ngIf=\"videos\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <gd-youtube videoId=\"{{ currentVideoId }}\" width=\"100%\"></gd-youtube>\n      <ng-select bindLabel=\"title\"\n                 [clearable]=\"false\"\n                 (change)=\"selectVideo()\"\n                 [searchable]=\"false\"\n                 [(ngModel)]=\"currentVideoId\">         \n        <ng-option [value]=\"v.videoId\" *ngFor=\"let v of videos\">\n            <img src=\"{{v.thumbnail}}\" height=\"40px\"/>\n            {{v.title}}\n        </ng-option>\n      </ng-select>\n    </div>\n  </div>\n  \n  <p class=\"gd-section\">All shows at the {{ venue.name }}:</p>\n  \n  <gd-shows [eventIds]=\"venue.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"venue.name+', '+location\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Venue } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DeadEventInfo } from '../services/types';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-venue',\n  templateUrl: './venue.component.html'\n})\nexport class VenueComponent {\n  public venue: Venue;\n  protected location: string;\n  public videos: any;\n  public currentVideoId: string;\n\n  protected currentUser: any = { userName: '', userId: ''};\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, private dialog: DialogService) {}\n  \n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.venue = await this.data.getVenue(params.get('id'));\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n\n\n      if (params.has('id') && this.venue.name) {\n        console.log(this.venue)\n        //this.venue = await this.data.getVenue(params.get('id'));\n        this.location = (await this.data.getEventInfo(this.venue.eventIds[0])).location;\n        if (this.venue) {\n          this.videos = await this.data.getYoutubeList(this.venue.id, ['Grateful Dead', this.location, this.venue.name]);\n          this.currentVideoId = this.videos[0].videoId;\n          console.log(this.videos);\n        }\n      }\n      else {\n        this.router.navigate(['/mapselect'], { replaceUrl: true });\n      }\n    });\n\n\n\n    /*\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.venue = await this.data.getVenue(params.get('id'));\n        this.location = (await this.data.getEventInfo(this.venue.eventIds[0])).location;\n        if (this.venue) {\n          this.videos = await this.data.getYoutubeList(this.venue.id, ['Grateful Dead', this.location, this.venue.name]);\n          this.currentVideoId = this.videos[0].videoId;\n          console.log(this.videos);\n        }\n      }\n      if (!this.venue) {\n        this.router.navigate(['/venue', (await this.data.getRandomVenue()).id],\n          { replaceUrl: true });\n      }\n    }); */\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      event.venue+\", \"+event.date,\n      [\"Go to show\", \"Go to recording\"],\n      [() => this.router.navigate(['/show', event.id]),\n        () => this.openRecordingsDialog(event)]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.router.navigate(['/recording', r.id]) )\n    );\n  }\n\n  selectVideo(){\n    console.log(this.currentVideoId);\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","\n// From http://www.tutorialspoint.com/javascript/array_map.htm\n\nif (!Array.prototype.map)\n{\n  Array.prototype.map = function(fun /*, thisp*/)\n  {\n    var len = this.length;\n    if (typeof fun !== \"function\")\n      throw new TypeError();\n\n    var res = new Array(len);\n    var thisp = arguments[1];\n    for (var i = 0; i < len; i++)\n    {\n      if (i in this)\n        res[i] = fun.call(thisp, this[i], i, this);\n    }\n\n    return res;\n  };\n}\n\nL.Control.FuseSearch = L.Control.extend({\n    \n    includes: L.Evented.prototype,\n    \n    options: {\n        position: 'topright',\n        title: 'Search',\n        panelTitle: '',\n        placeholder: 'Search',\n        caseSensitive: false,\n        threshold: 0.3,\n        maxResultLength: null,\n        showResultFct: null,\n        showInvisibleFeatures: true,\n        shouldSort: true\n    },\n    \n    initialize: function(options) {\n        L.setOptions(this, options);\n        this._panelOnLeftSide = (this.options.position.indexOf(\"left\") !== -1);\n    },\n    \n    onAdd: function(map) {\n        \n        var ctrl = this._createControl();\n        this._createPanel(map);\n        this._setEventListeners();\n        map.invalidateSize();\n        \n        return ctrl;\n    },\n    \n    onRemove: function(map) {\n        \n        this.hidePanel(map);\n        this._clearEventListeners();\n        this._clearPanel(map);\n        this._clearControl();\n        \n        return this;\n    },\n    \n    _createControl: function() {\n\n        var className = 'leaflet-fusesearch-control',\n            container = L.DomUtil.create('div', className);\n\n        // Control to open the search panel\n        var butt = this._openButton = L.DomUtil.create('a', 'button', container);\n        butt.href = '#';\n        butt.title = this.options.title;\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.on(butt, 'click', stop)\n                  .on(butt, 'mousedown', stop)\n                  .on(butt, 'touchstart', stop)\n                  .on(butt, 'mousewheel', stop)\n                  .on(butt, 'MozMousePixelScroll', stop);\n        L.DomEvent.on(butt, 'click', L.DomEvent.preventDefault);\n        L.DomEvent.on(butt, 'click', this.showPanel, this);\n\n        return container;\n    },\n    \n    _clearControl: function() {\n        // Unregister events to prevent memory leak\n        var butt = this._openButton;\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.off(butt, 'click', stop)\n                  .off(butt, 'mousedown', stop)\n                  .off(butt, 'touchstart', stop)\n                  .off(butt, 'mousewheel', stop)\n                  .off(butt, 'MozMousePixelScroll', stop);\n        L.DomEvent.off(butt, 'click', L.DomEvent.preventDefault);\n        L.DomEvent.off(butt, 'click', this.showPanel);\n    },\n    \n    _createPanel: function(map) {\n        var _this = this;\n\n        // Create the search panel\n        var mapContainer = map.getContainer();\n        var className = 'leaflet-fusesearch-panel',\n            pane = this._panel = L.DomUtil.create('div', className, mapContainer);\n        \n        // Make sure we don't drag the map when we interact with the content\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.on(pane, 'click', stop)\n                .on(pane, 'dblclick', stop)\n                .on(pane, 'mousedown', stop)\n                .on(pane, 'touchstart', stop)\n                .on(pane, 'mousewheel', stop)\n                .on(pane, 'MozMousePixelScroll', stop);\n\n        // place the pane on the same side as the control\n        if (this._panelOnLeftSide) {\n            L.DomUtil.addClass(pane, 'left');\n        } else {\n            L.DomUtil.addClass(pane, 'right');\n        }\n\n        // Intermediate container to get the box sizing right\n        var container = L.DomUtil.create('div', 'content', pane);\n        \n        var header = L.DomUtil.create('div', 'header', container);\n        if (this.options.panelTitle) {\n           var title = L.DomUtil.create('p', 'panel-title', header);\n            title.innerHTML = this.options.panelTitle;\n        }\n        \n        // Search image and input field\n        L.DomUtil.create('img', 'search-image', header);\n        this._input = L.DomUtil.create('input', 'search-input', header);\n        this._input.maxLength = 30;\n        this._input.placeholder = this.options.placeholder;\n        this._input.onkeyup = function(evt) {\n            var searchString = evt.currentTarget.value;\n            _this.searchFeatures(searchString);\n        };\n\n        // Close button\n        var close = this._closeButton = L.DomUtil.create('a', 'close', header);\n        close.innerHTML = '&times;';\n        L.DomEvent.on(close, 'click', this.hidePanel, this);\n        \n        // Where the result will be listed\n        this._resultList = L.DomUtil.create('div', 'result-list', container); \n        \n        return pane;\n    },\n    \n    _clearPanel: function(map) {\n\n        // Unregister event handlers\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.off(this._panel, 'click', stop)\n                  .off(this._panel, 'dblclick', stop)\n                  .off(this._panel, 'mousedown', stop)\n                  .off(this._panel, 'touchstart', stop)\n                  .off(this._panel, 'mousewheel', stop)\n                  .off(this._panel, 'MozMousePixelScroll', stop);\n\n        L.DomEvent.off(this._closeButton, 'click', this.hidePanel);\n        \n        var mapContainer = map.getContainer();\n        mapContainer.removeChild(this._panel);\n        \n        this._panel = null;\n    },\n    \n    _setEventListeners : function() {\n        var that = this;\n        var input = this._input;\n        this._map.addEventListener('overlayadd', function() {\n            that.searchFeatures(input.value);\n        });\n        this._map.addEventListener('overlayremove', function() {\n            that.searchFeatures(input.value);\n        });\n    },\n    \n    _clearEventListeners: function() {\n        this._map.removeEventListener('overlayadd');\n        this._map.removeEventListener('overlayremove');        \n    },\n    \n    isPanelVisible: function () {\n        return L.DomUtil.hasClass(this._panel, 'visible');\n    },\n\n    showPanel: function () {\n        if (! this.isPanelVisible()) {\n            L.DomUtil.addClass(this._panel, 'visible');\n            // Preserve map centre\n            this._map.panBy([this.getOffset() * 0.5, 0], {duration: 0.5});\n            this.fire('show');\n            this._input.select();\n            // Search again as visibility of features might have changed\n            this.searchFeatures(this._input.value);\n        }\n    },\n\n    hidePanel: function (e) {\n        if (this.isPanelVisible()) {\n            L.DomUtil.removeClass(this._panel, 'visible');\n            // Move back the map centre - only if we still hold this._map\n            // as this might already have been cleared up by removeFrom()\n            if (null !== this._map) {\n                this._map.panBy([this.getOffset() * -0.5, 0], {duration: 0.5});\n            };\n            this.fire('hide');\n            if(e) {\n                L.DomEvent.stopPropagation(e);\n            }\n        }\n    },\n    \n    getOffset: function() {\n        if (this._panelOnLeftSide) {\n            return - this._panel.offsetWidth;\n        } else {\n            return this._panel.offsetWidth;\n        }\n    },\n\n    indexFeatures: function(data, keys) {\n\n        var jsonFeatures = data.features || data;\n        \n        this._keys = keys;\n        var properties = jsonFeatures.map(function(feature) {\n            // Keep track of the original feature\n            feature.properties._feature = feature;\n            return feature.properties;\n        });\n        \n        var options = {\n            keys: keys,\n            caseSensitive: this.options.caseSensitive,\n            threshold : this.options.threshold\n        };\n        \n        this._fuseIndex = new Fuse(properties, options);\n    },\n    \n    searchFeatures: function(string) {\n        \n        var result = this._fuseIndex.search(string);\n\n        // Empty result list\n        var listItems = document.querySelectorAll(\".result-item\");\n        for (var i = 0 ; i < listItems.length ; i++) {\n            listItems[i].remove();\n        }\n\n        var resultList = document.querySelector('.result-list');\n        var num = 0;\n        var max = this.options.maxResultLength;\n        for (var i in result) {\n            var props = result[i].item;         // fix: added .item\n            var feature = props._feature;\n            var popup = this._getFeaturePopupIfVisible(feature);\n            \n            if (undefined !== popup || this.options.showInvisibleFeatures) {\n                this.createResultItem(props, resultList, popup);\n                if (undefined !== max && ++num === max)\n                    break;\n            }\n        }\n    },\n    \n    refresh: function() {\n        // Reapply the search on the indexed features - useful if features have been filtered out\n        if (this.isPanelVisible()) {\n            this.searchFeatures(this._input.value);\n        }\n    },\n    \n    _getFeaturePopupIfVisible: function(feature) {\n        var layer = feature.layer;\n        if (undefined !== layer && this._map.hasLayer(layer)) {\n            return layer.getPopup();\n        }\n    },\n    \n    createResultItem: function(props, container, popup) {\n\n        var _this = this;\n        var feature = props._feature;\n\n        // Create a container and open the associated popup on click\n        var resultItem = L.DomUtil.create('p', 'result-item', container);\n        \n        if (undefined !== popup) {\n            L.DomUtil.addClass(resultItem, 'clickable');\n            resultItem.onclick = function() {\n                \n                if (window.matchMedia(\"(max-width:480px)\").matches) {\n                    _this.hidePanel();\n                    feature.layer.openPopup();\n                } else {\n                    _this._panAndPopup(feature, popup);\n                }\n            };\n        }\n\n        // Fill in the container with the user-supplied function if any,\n        // otherwise display the feature properties used for the search.\n        if (null !== this.options.showResultFct) {\n            this.options.showResultFct(feature, resultItem);\n        } else {\n            str = '<b>' + props[this._keys[0]] + '</b>';\n            for (var i = 1; i < this._keys.length; i++) {\n                str += '<br/>' + props[this._keys[i]];\n            }\n            resultItem.innerHTML = str;\n        };\n\n        return resultItem;\n    },\n    \n    _panAndPopup : function(feature, popup) {\n        // Temporarily adapt the map padding so that the popup is not hidden by the search pane\n        if (this._panelOnLeftSide) {\n            var oldPadding = popup.options.autoPanPaddingTopLeft;\n            var newPadding = new L.Point(- this.getOffset(), 10);\n            popup.options.autoPanPaddingTopLeft = newPadding;\n            feature.layer.openPopup();\n            popup.options.autoPanPaddingTopLeft = oldPadding;\n        } else {\n            var oldPadding = popup.options.autoPanPaddingBottomRight;\n            var newPadding = new L.Point(this.getOffset(), 10);\n            popup.options.autoPanPaddingBottomRight = newPadding;\n            feature.layer.openPopup();\n            popup.options.autoPanPaddingBottomRight = oldPadding;\n        }\n    }\n});\n\nL.control.fuseSearch = function(options) {\n    return new L.Control.FuseSearch(options);\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}