{"version":3,"sources":["webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/auth.resolve.ts","webpack:///src/app/auth.service.ts","webpack:///src/app/comments/chatter-box.component.html","webpack:///src/app/comments/chatter-box.component.ts","webpack:///src/app/comments/comments.component.html","webpack:///src/app/comments/comments.component.ts","webpack:///src/app/config.ts","webpack:///src/app/cookie-banner/cookie-banner.component.html","webpack:///src/app/cookie-banner/cookie-banner.component.ts","webpack:///src/app/cookie-banner/privacy-policy.component.html","webpack:///src/app/cookie-banner/privacy-policy.component.ts","webpack:///src/app/profile/profile.component.html","webpack:///src/app/profile/profile.component.ts","webpack:///src/app/services/data.service.ts","webpack:///src/app/services/dead-api.service.ts","webpack:///src/app/services/dialog.service.ts","webpack:///src/app/services/google-analytics.service.ts","webpack:///src/app/services/lightbox.service.ts","webpack:///src/app/services/player.service.ts","webpack:///src/app/services/types.ts","webpack:///src/app/shared/header.component.html","webpack:///src/app/shared/header.component.ts","webpack:///src/app/shared/input-dialog.component.html","webpack:///src/app/shared/input-dialog.component.ts","webpack:///src/app/shared/list-dialog.component.html","webpack:///src/app/shared/list-dialog.component.ts","webpack:///src/app/shared/map.component.html","webpack:///src/app/shared/map.component.ts","webpack:///src/app/shared/player.component.html","webpack:///src/app/shared/player.component.ts","webpack:///src/app/shared/search-dialog.component.html","webpack:///src/app/shared/search-dialog.component.ts","webpack:///src/app/shared/sharebuttons.component.html","webpack:///src/app/shared/sharebuttons.component.ts","webpack:///src/app/shared/showmap.component.html","webpack:///src/app/shared/showmap.component.ts","webpack:///src/app/shared/shows.component.html","webpack:///src/app/shared/shows.component.ts","webpack:///src/app/shared/weather.component.html","webpack:///src/app/shared/weather.component.ts","webpack:///src/app/shared/youtube.component.html","webpack:///src/app/shared/youtube.component.ts","webpack:///src/app/views/artifacts.component.html","webpack:///src/app/views/artifacts.component.ts","webpack:///src/app/views/artist.component.html","webpack:///src/app/views/artist.component.ts","webpack:///src/app/views/location.component.html","webpack:///src/app/views/location.component.ts","webpack:///src/app/views/mapselect.component.html","webpack:///src/app/views/mapselect.component.ts","webpack:///src/app/views/playlist.component.html","webpack:///src/app/views/playlist.component.ts","webpack:///src/app/views/recording.component.html","webpack:///src/app/views/recording.component.ts","webpack:///src/app/views/show.component.html","webpack:///src/app/views/show.component.ts","webpack:///src/app/views/song.component.html","webpack:///src/app/views/song.component.ts","webpack:///src/app/views/start.component.html","webpack:///src/app/views/start.component.ts","webpack:///src/app/views/venue.component.html","webpack:///src/app/views/venue.component.ts","webpack:///src/environments/environment.ts","webpack:///src/leaflet-fusesearch/src/leaflet.fusesearch.js","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","redirectTo","pathMatch","component","loggedIn","AppRoutingModule","AppComponent","router","auth","doc","player","currentUser","userName","userId","userProfile$","subscribe","userProfile","sub","split","gtag","events","event","urlAfterRedirects","googleAnalytics","html","src","s","createElement","type","innerHTML","head","getElementsByTagName","appendChild","scriptHtml","replace","window","document","AppModule","APIResolver","console","log","isAuthenticated$","AuthService","auth0Client$","domain","client_id","redirect_uri","location","origin","pipe","err","client","isAuthenticated","res","handleRedirectCallback$","handleRedirectCallback","userProfileSubject$","asObservable","localAuthSetup","handleAuthCallback","options","getUser","user","next","checkAuth$","getUser$","redirectPath","url","loginWithRedirect","appState","target","params","search","includes","targetRoute","authComplete$","cbRes","navigate","logout","returnTo","ChatterBoxComponent","valueChange","onKeyupEnter","onKeyup","emitReport","emitDelete","emitRefresh","comment","userImagePath","emit","commentText","input","typedCommentTextLength","length","warn","CommentsComponent","data","dialog","changeDetectorRef","heading","errorMsg","inputMaxLength","placeholderText","getComments","msgPayload","msgId","makeid","timestamp","Date","payload","msg","getTime","toString","currentUserId","addComment","error","checkComment","formatTime","allComments","push","sort","a","b","i","Number","detectChanges","p","title","Boolean","d","z","n","getMonth","getDate","getYear","getHours","getMinutes","openMultiFunction","reportComment","deleteComment","sendCommentReport","m","startsWith","dm","openSingleFunction","indexOf","splice","result","characters","charactersLength","charAt","Math","floor","random","AUTH0DOMAIN","AUTH0CLIENTID","EMAILADDRESS","TRACKINGID","TRACKING","API_URL","FRONTEND_URL","DEBUG","CookieBannerComponent","cookieService","consent","get","showBanner","cname","cvalue","exdays","setTime","set","setCookie","PrivacyPolicyComponent","reload","ProfileComponent","route","frontend_url","snapshot","getBookmarks","getLikes","bookmarks","reverse","forEach","likes","l","getUserComments","comments","r","some","playlistid","name","deletePlaylist","playlist","storePlaylist","bookmark","deleteBookmark","delBookmark","like","unlike","ARCHIVE_URI","DataService","apiService","loading","initEvents","eventId","getEventInfos","eventIds","filter","getEventDetails","locationId","getLocation","venueId","getVenue","getVenueCoordinates","getTourCoordinates","artistId","getArtistDetails","songId","getSong","recordingId","recordings","getRecordingDetails","recording","getRecordingTracks","tracks","map","t","toTrack","etreeId","audio","song","songDetails","sbd","isSoundboard","getTracks","getRandomEventId","loadRandomEvent","venue","types","count","artifacts","Object","assign","eventInfo","date","performers","getEventInfo","randomEvent","getSetlist","getRandomSetlist","songs","randomSong","getRandomSong","randomRecordingEtreeId","randomAudio","correspondingEvent","uri","filename","show_id","waveform","etree_id","recording_id","song_id","track","getEvents","parseFloat","toLocaleDateString","weekday","year","month","day","objects","o","formatDate","q","getSearchResult","userid","time","addBookmark","checkBookmark","checkLike","countLikes","encodeURIComponent","JSON","stringify","addPlaylist","getPlaylists","getPlaylist","delPlaylist","msgid","recordingid","getRecordingInfo","getTracklist","showId","searchArray","getYoutubeList","DeadApiService","api_url","getJsonFromApi","audioUri","songName","skip","fetch","text","parse","getTextFromApi","cmt","searcharray","DialogService","funcs","open","func","getDialogConfig","afterClosed","items","dialogConfig","autoFocus","callback","dialogRef","width","GoogleAnalyticsService","eventName","eventCategory","eventAction","eventLabel","eventValue","event_category","event_label","event_action","value","LightboxService","lightbox","lightboxConfig","wrapAround","carousel","lightboxa","thumbnail","image","caption","description","lightboxArray","index","thumb","PlayerService","googleAnalyticsService","maxTime","currentTime","currentTrackIndex","muted","paused","playlists","playlistsLoaded","skipToTrackAtIndex","currentAudio","play","pause","playPlaylist","reset","stop","playPause","eventEmitter","getCurrentTrack","playCurrentTrack","Audio","ontimeupdate","duration","onended","v","volume","localStorage","setItem","btoa","removeItem","getItem","atob","ArtifactType","HeaderComponent","sanitizer","titleService","setTitle","subtitle","bookmarked","liked","searchState","bypassSecurityTrustStyle","imageUrl","removePlaylistFromStorage","openDialog","position","right","top","maxHeight","searchString","InputDialogComponent","close","ListDialogComponent","item","MapComponent","layers","maxZoom","attribution","latitude","longitude","icon","iconSize","iconAnchor","iconUrl","zoom","center","PlayerComponent","loaded","minimized","loadPlaylistFromsStorage","getRandomTrack","addToPlaylist","clearPlaylist","deleteFromPlaylist","openInputDialog","savePlaylist","loadPlaylist","SearchDialogComponent","sortItems","k","ShareButtonsComponent","ShowMapComponent","timeOut","selectLayers","layerNames","geoJsons","mapOptions","L","tileLayer","latLng","setTimeout","venues","undefined","tours","geoJsonData","getGeoJson","tourGeoJsonData","getTourJson","all","groupLayers","addTo","currentLayer","dateSort","searchCtrl","control","fuseSearch","feature","container","props","properties","dates","DomUtil","create","indexFeatures","selectedTour","fitZoom","htmlstring","datestring","layer","popupContent","bindPopup","shows","latlongs","lat","long","searchForArray","ds","dateStrings","venuehtml","georss","geojsonFeature","g","myIcon","popupAnchor","geoJSON","onEachFeature","pointToLayer","latlng","marker","riseOnHover","lg","layerGroup","tour","venue_id","show","tourLine","removeLayer","lineDecorator","connectTheDots","group","featureGroup","eachLayer","addLayer","fitBounds","getBounds","getZoom","setZoom","c","geometry","coordinates","polyline","color","weight","polylineDecorator","patterns","offset","repeat","symbol","Symbol","arrowHead","pixelSize","polygon","pathOptions","stroke","haystack","needle","j","current","ShowsComponent","WeatherComponent","videoId","YoutubeComponent","tag","body","ArtifactsComponent","paramMap","has","getRandomArtifacts","ArtistComponent","artist","LocationComponent","state","videos","currentVideoId","getRandomLocation","replaceUrl","openRecordingsDialog","MapSelectComponent","PlaylistComponent","playlistId","RecordingComponent","_array","Array","recordinginfo","tracklist","addTrackToPlaylist","toPlayerTrack","venue_name","location_name","ShowComponent","recordingUrls","bypassSecurityTrustResourceUrl","photos","Photo","poster","Poster","pass","Pass","ticket","Ticket","eventImage","gl","makeGallery","photosLightbox","currentPhoto","artifactsLightbox","currentArtifact","idx","addRecordingToPlaylist","recordingEtreeId","addRecordingTrackToPlaylist","openLightboxArray","SongComponent","composedBy","concat","lyricsBy","join","firstPlayed","lastPlayed","timesPlayed","totalRecordings","StartComponent","email","VenueComponent","getRandomVenue","environment","production","prototype","fun","len","TypeError","thisp","arguments","call","Control","FuseSearch","extend","Evented","panelTitle","placeholder","caseSensitive","threshold","maxResultLength","showResultFct","showInvisibleFeatures","shouldSort","initialize","setOptions","_panelOnLeftSide","onAdd","ctrl","_createControl","_createPanel","_setEventListeners","invalidateSize","onRemove","hidePanel","_clearEventListeners","_clearPanel","_clearControl","className","butt","_openButton","href","DomEvent","stopPropagation","on","preventDefault","showPanel","off","_this","mapContainer","getContainer","pane","_panel","addClass","header","_input","maxLength","onkeyup","evt","currentTarget","searchFeatures","_closeButton","_resultList","removeChild","that","_map","addEventListener","removeEventListener","isPanelVisible","hasClass","panBy","getOffset","fire","select","removeClass","offsetWidth","jsonFeatures","features","_keys","_feature","_fuseIndex","Fuse","string","listItems","querySelectorAll","remove","resultList","querySelector","num","max","popup","_getFeaturePopupIfVisible","createResultItem","refresh","hasLayer","getPopup","resultItem","onclick","matchMedia","matches","openPopup","_panAndPopup","str","oldPadding","autoPanPaddingTopLeft","newPadding","Point","autoPanPaddingBottomRight"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ShowComponent } from './views/show.component';\nimport { LocationComponent } from './views/location.component';\nimport { VenueComponent } from './views/venue.component';\nimport { SongComponent } from './views/song.component';\nimport { RecordingComponent } from './views/recording.component';\nimport { ArtistComponent } from './views/artist.component';\nimport { ArtifactsComponent } from './views/artifacts.component';\nimport { MapSelectComponent } from './views/mapselect.component';\nimport { StartComponent } from './views/start.component';\nimport { ProfileComponent } from './profile/profile.component';\nimport { APIResolver } from './auth.resolve';\nimport { CommentsComponent } from './comments/comments.component';\nimport { PrivacyPolicyComponent } from './cookie-banner/privacy-policy.component';\nimport { PlaylistComponent } from './views/playlist.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/mapselect', pathMatch: 'full' },\n  //{ path: '', component: MapSelectComponent, resolve: { loggedIn: APIResolver} },\n  { path: 'show', component: ShowComponent },\n  { path: 'show/:id', component: ShowComponent },\n  { path: 'location', component: LocationComponent },\n  { path: 'location/:id', component: LocationComponent },\n  { path: 'venue', component: VenueComponent },\n  { path: 'venue/:id', component: VenueComponent },\n  { path: 'song', component: SongComponent },\n  { path: 'song/:id', component: SongComponent },\n  { path: 'recording', component: RecordingComponent },\n  { path: 'recording/:id', component: RecordingComponent },\n  { path: 'artist', component: ArtistComponent },\n  { path: 'artist/:id', component: ArtistComponent },\n  { path: 'artifacts', component: ArtifactsComponent },\n  { path: 'artifacts/:types', component: ArtifactsComponent },\n  { path: 'mapselect', component: MapSelectComponent },\n  { path: 'about', component: StartComponent },\n  { path: 'profile', component: ProfileComponent, resolve: { loggedIn: APIResolver} },\n  { path: 'comments', component: CommentsComponent },\n  { path: 'dataprivacy', component: PrivacyPolicyComponent },\n  { path: 'playlist/:id', component: PlaylistComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","<div fxLayout=\"column\" fxFlexFill>\n  <div fxFlex><router-outlet></router-outlet>\n  </div>\n  <!--<footer *ngIf=\"!start\"><gd-player></gd-player></footer>-->\n  <footer>\n    <gd-player></gd-player>\n    <app-cookie-banner></app-cookie-banner>\n  </footer>\n</div>\n","import { Component, Inject } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { AuthService } from './auth.service';\nimport { TRACKINGID, TRACKING } from './config';\nimport { DOCUMENT } from '@angular/common';\nimport { PlayerService } from './services/player.service';\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.sass']\n})\n\n\nexport class AppComponent {\n  //protected start: Boolean;\n  //private cookieValue: string;\n  protected currentUser: any = { userName: '', userId: '' };\n\n  constructor(public router:Router, public auth: AuthService, @Inject(DOCUMENT) private doc: any, private player: PlayerService) {\n    //router.events.forEach((event) => {\n    //  if (router.url.includes('/about')) {  \n    //    this.start = true; \n    //  } else {\n    //    this.start = false; \n    //  }\n    //});\n\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    \n    this.router.events.subscribe(event => {\n      if(event instanceof NavigationEnd && TRACKING){\n          gtag('config', TRACKINGID, \n                {\n                  'page_path': event.urlAfterRedirects\n                }\n               );\n       }\n    }); \n\n\n  }\n\n  public ngOnInit() {\n    this.googleAnalytics();\n  }\n\n\n  private scriptHtml(html, src){\n    const s = this.doc.createElement('script');\n    s.type = 'text/javascript';\n    if (src) s.src = src;\n    if (html) s.innerHTML = html;\n    const head = this.doc.getElementsByTagName('head')[0];\n    head.appendChild(s);\n  }\n\n\n  private googleAnalytics() {\n    this.scriptHtml(`\n      // Set to the same value as the web property used on the site\n      var gaProperty = \"` + TRACKINGID + `\";\n  \n      // Disable tracking if the opt-out cookie exists.\n      var disableStr = 'ga-disable-' + gaProperty;\n  \n      // if (document.cookie.indexOf(disableStr + '=true') > -1) {\n      if (document.cookie.indexOf('gd-cookieconsent=') < 0) {\n        //alert('revoke!');\n        window[disableStr] = true;\n      }\n  \n      // Opt-in function\n      function gaOptIn() {\n        var oneYearFromNow = new Date();\n        oneYearFromNow.setFullYear(oneYearFromNow.getFullYear() + 1);\n        document.cookie = 'gd-cookieconsent=allow; expires=\"' + oneYearFromNow.toGMTString() + '\"';\n        \n        window[disableStr] = false;\n        //document.getElementById(\"cookiebanner\").remove();\n        window.location.reload()\n      }\n  \n      // Opt-out function\n      function gaOptOut() {\n        document.cookie = 'gd-cookieconsent=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_ga=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_gid=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = '_gat_gtag_` + TRACKINGID.replace(/-/g, '_') + `=; expires = Thu, 01 Jan 1970 00:00:00 GMT';\n        window[disableStr] = true;\n        window.location.reload()\n      }\n    `, null);\n\n    // <!-- Global site tag (gtag.js) - Google Analytics -->\n    this.scriptHtml(null, 'https://www.googletagmanager.com/gtag/js');\n    this.scriptHtml( `\n      window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n    `, null)\n    this.scriptHtml(null, 'https://cdn.auth0.com/js/lock/11.23.1/lock.min.js');\n\n  }\n\n\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatMenuModule } from '@angular/material/menu';\n\nimport { LazyLoadImageModule } from 'ng-lazyload-image';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { ShowComponent } from './views/show.component';\nimport { LocationComponent } from './views/location.component';\nimport { VenueComponent } from './views/venue.component';\nimport { SongComponent } from './views/song.component';\nimport { RecordingComponent } from './views/recording.component';\nimport { ArtistComponent } from './views/artist.component';\nimport { ArtifactsComponent } from './views/artifacts.component';\nimport { MapSelectComponent} from './views/mapselect.component';\nimport { StartComponent} from './views/start.component';\n\n\nimport { HeaderComponent } from './shared/header.component';\nimport { MapComponent } from './shared/map.component';\nimport { WeatherComponent } from './shared/weather.component';\nimport { ShowsComponent } from './shared/shows.component';\nimport { PlayerComponent } from './shared/player.component';\nimport { ListDialogComponent } from './shared/list-dialog.component';\nimport { SearchDialogComponent } from './shared/search-dialog.component';\nimport { ShowMapComponent } from './shared/showmap.component';\n\nimport { DeadApiService } from './services/dead-api.service';\nimport { DataService } from './services/data.service';\nimport { PlayerService } from './services/player.service';\nimport { DialogService } from './services/dialog.service';\n\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\n\nimport { CookieService } from 'ngx-cookie-service';\n//import { ButtonDirective } from './button.directive';\nimport { ProfileComponent } from './profile/profile.component';\n\nimport { APIResolver } from './auth.resolve';\n//import { ChatterBoxModule } from './chatter-box';\nimport { CommentsComponent } from './comments/comments.component';\nimport { InputDialogComponent } from './shared/input-dialog.component';\nimport { CookieBannerComponent } from './cookie-banner/cookie-banner.component';\nimport { PrivacyPolicyComponent } from './cookie-banner/privacy-policy.component';\nimport {GoogleAnalyticsService} from './services/google-analytics.service';\n\nimport { ShareButtonsComponent } from './shared/sharebuttons.component';\nimport { ShareButtonsModule } from 'ngx-sharebuttons/buttons';\nimport { ShareIconsModule } from 'ngx-sharebuttons/icons';\n\nimport { ChatterBoxComponent } from './comments/chatter-box.component';\nimport { PlaylistComponent } from './views/playlist.component';\nimport { YouTubePlayerModule } from '@angular/youtube-player';\nimport { YoutubeComponent } from './shared/youtube.component';\n\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { Ng2CarouselamosModule } from 'ng2-carouselamos';\nimport { LightboxModule } from 'ngx-lightbox';\nimport { LightboxService } from './services/lightbox.service'\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ShowComponent,\n    LocationComponent,\n    VenueComponent,\n    SongComponent,\n    RecordingComponent,\n    ArtistComponent,\n    ArtifactsComponent,\n    HeaderComponent,\n    MapComponent,\n    WeatherComponent,\n    ShowsComponent,\n    PlayerComponent,\n    ListDialogComponent,\n    SearchDialogComponent,\n    ShowMapComponent,\n    MapSelectComponent,\n    StartComponent,\n    //ButtonDirective,\n    ProfileComponent,\n    CommentsComponent,\n    InputDialogComponent,\n    CookieBannerComponent,\n    PrivacyPolicyComponent,\n    ShareButtonsComponent,\n    ChatterBoxComponent,\n    PlaylistComponent,\n    YoutubeComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FlexLayoutModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    LazyLoadImageModule,\n    LeafletModule.forRoot(),\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    //ChatterBoxModule,\n    ShareButtonsModule,\n    ShareIconsModule,\n    YouTubePlayerModule,\n    NgSelectModule,\n    Ng2CarouselamosModule,\n    LightboxModule\n  ],\n  providers: [\n    DeadApiService,\n    DataService,\n    PlayerService,\n    DialogService,\n    {provide: LocationStrategy, useClass: HashLocationStrategy},\n    CookieService,\n    APIResolver,\n    {\n      provide: 'window',\n      useValue: window,\n    },\n    {\n      provide: 'document',\n      useValue: document,\n    },\n    GoogleAnalyticsService,\n    LightboxService\n  ],\n  bootstrap: [AppComponent],\n  entryComponents: [ListDialogComponent, SearchDialogComponent, InputDialogComponent], \n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { AuthService } from './auth.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class APIResolver implements Resolve<any> {\n  constructor(private auth: AuthService) {}\n\n  resolve(): Observable<boolean> {\n    console.log('resolve');\n    return this.auth.isAuthenticated$;\n    }\n\n\n  getUser(loggedIn) {\n    return {\n      userId: loggedIn.sub.split(\"|\")[1],\n      userName: loggedIn['http://example.com/username']\n    }\n  }\n\n}","import { Injectable } from '@angular/core';\nimport createAuth0Client from '@auth0/auth0-spa-js';\nimport Auth0Client from '@auth0/auth0-spa-js/dist/typings/Auth0Client';\nimport { from, of, Observable, BehaviorSubject, combineLatest, throwError } from 'rxjs';\nimport { tap, catchError, concatMap, shareReplay } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { AUTH0DOMAIN, AUTH0CLIENTID} from './config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // Create an observable of Auth0 instance of client\n  auth0Client$ = (from(\n    createAuth0Client({\n      domain: AUTH0DOMAIN,\n      client_id: AUTH0CLIENTID,\n\n\n      redirect_uri: `${window.location.origin}`\n    })\n  ) as Observable<Auth0Client>).pipe(\n    shareReplay(1), // Every subscription receives the same shared value\n    catchError(err => throwError(err))\n  );\n  // Define observables for SDK methods that return promises by default\n  // For each Auth0 SDK method, first ensure the client instance is ready\n  // concatMap: Using the client instance, call SDK method; SDK returns a promise\n  // from: Convert that resulting promise into an observable\n  isAuthenticated$ = this.auth0Client$.pipe(\n    concatMap((client: Auth0Client) => from(client.isAuthenticated())),\n    tap(res => this.loggedIn = res)\n  );\n  handleRedirectCallback$ = this.auth0Client$.pipe(\n    concatMap((client: Auth0Client) => from(client.handleRedirectCallback()))\n  );\n  // Create subject and public observable of user profile data\n  private userProfileSubject$ = new BehaviorSubject<any>(null);\n  userProfile$ = this.userProfileSubject$.asObservable();\n  // Create a local property for login status\n  loggedIn: boolean = null;\n\n  constructor(private router: Router) {\n    // On initial load, check authentication state with authorization server\n    // Set up local auth streams if user is already authenticated\n    this.localAuthSetup();\n    // Handle redirect from Auth0 login\n    this.handleAuthCallback();\n  }\n\n  // When calling, options can be passed if desired\n  // https://auth0.github.io/auth0-spa-js/classes/auth0client.html#getuser\n  getUser$(options?): Observable<any> {\n    return this.auth0Client$.pipe(\n      concatMap((client: Auth0Client) => from(client.getUser(options))),\n      tap(user => this.userProfileSubject$.next(user))\n    );\n  }\n\n  private localAuthSetup() {\n    // This should only be called on app initialization\n    // Set up local authentication streams\n    const checkAuth$ = this.isAuthenticated$.pipe(\n      concatMap((loggedIn: boolean) => {\n        if (loggedIn) {\n          // If authenticated, get user and set in app\n          // NOTE: you could pass options here if needed\n          return this.getUser$();\n        }\n        // If not authenticated, return stream that emits 'false'\n        return of(loggedIn);\n      })\n    );\n    checkAuth$.subscribe();\n  }\n\n  login(redirectPath: string = this.router.url) {\n    // A desired redirect path can be passed to login method\n    // (e.g., from a route guard)\n    // Ensure Auth0 client instance exists\n    this.auth0Client$.subscribe((client: Auth0Client) => {\n      // Call method to log in\n      client.loginWithRedirect({\n        redirect_uri: `${window.location.origin}`,\n        appState: { target: redirectPath }\n      });\n    });\n  }\n\n  private handleAuthCallback() {\n    // Call when app reloads after user logs in with Auth0\n    const params = window.location.search;\n    if (params.includes('code=') && params.includes('state=')) {\n      let targetRoute: string; // Path to redirect to after login processsed\n      const authComplete$ = this.handleRedirectCallback$.pipe(\n        // Have client, now call method to handle auth callback redirect\n        tap(cbRes => {\n          // Get and set target redirect route from callback results\n          targetRoute = cbRes.appState && cbRes.appState.target ? cbRes.appState.target : this.router.url;\n        }),\n        concatMap(() => {\n          // Redirect callback complete; get user and login status\n          return combineLatest([\n            this.getUser$(),\n            this.isAuthenticated$\n          ]);\n        })\n      );\n      // Subscribe to authentication completion observable\n      // Response will be an array of user and login status\n      authComplete$.subscribe(([user, loggedIn]) => {\n        // Redirect to target route after callback processing\n        this.router.navigate([targetRoute]);\n      });\n    }\n  }\n\n  logout() {\n    // Ensure Auth0 client instance exists\n    this.auth0Client$.subscribe((client: Auth0Client) => {\n      // Call method to log out\n      client.logout({\n        client_id: AUTH0CLIENTID,\n        returnTo: `${window.location.origin}`\n      });\n    });\n  }\n\n}","<!-- based on iam_vishalkhare-chatter-box -->\n\n<div class=\"vis-chat-window\">\n    <div class=\"vis-chat-window-header\">\n\n    <!-- <img *ngIf=\"headerImage !== null && headerImage !== undefined\"\n                            [src]=\"headerImage\"\n                            alt=\"user\"\n                            class=\"user-image\"/> -->\n\n        <div class=\"vis-chat-window-header-text\">\n            Comments <!--{{heading}}-->\n        </div>\n    </div>\n    <div class=\"vis-chat-window-body\" #scrollMe [scrollTop]=\"scrollMe.scrollHeight\">\n        <div class=\"error-div\" *ngIf=\"showErrorDiv\">\n            {{errorMsg}}\n        </div>\n        <div *ngIf=\"!showErrorDiv\">\n            <div *ngFor=\"let comment of allComments\">\n              <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'comment-currentUser' : 'comment') :'comment'\">\n\n                <!-- <div class=\"col-2\">\n                    <img *ngIf=\"!showImageOrDiv(comment)\"\n                            src=\"{{comment.userImagePath}}\"\n                            alt=\"user\"\n                            class=\"user-image\"\n                    />\n                    <div *ngIf=\"showImageOrDiv(comment)\" class=\"user-image color-gray\">\n                      {{comment.userName[0]}}\n                    </div>\n                </div> -->\n\n                <div class=\"comment-bubble col-10\" [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'comment-bubble-currentUser col-10' : 'comment-bubble col-10') :'comment-bubble col-10'\">\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'user-name' : 'user-name color-gray') :'user-name color-gray'\">\n                        {{comment.userName}}\n                    </div>\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'user-comment' : 'user-comment color-gray') :'user-comment color-gray'\">\n                        {{comment.msg}}\n                    </div>\n                    <div [ngClass]=\"(comment.userId !== null && comment.userId !== undefined) ? ((comment.userId == currentUserId) ? 'timestamp' : 'timestamp color-gray') :'timestamp color-gray'\">\n                        {{comment.timestamp}} \n                        <button *ngIf=\"comment.userId == currentUserId\" (click)=\"onDeleteButton(comment)\">delete</button>\n                        <button *ngIf=\"comment.userId != currentUserId\"(click)=\"onReportButton(comment)\">report</button>\n                    </div>\n                    \n                </div>\n              </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"vis-chat-window-footer\">\n        <div>\n          <textarea id=\"vis-comment-textField\" placeholder=\"{{placeholderText}}\"\n                [(ngModel)]=\"commentText\"\n                (keyup)=\"onKeyUp(commentText)\"\n                maxlength=\"{{inputMaxLength}}\"></textarea>\n          <button type=\"button\" (click)=\"addComment(commentText)\">send</button> \n          <button style=\"float: right; margin-right: 16px;\" (click)=\"onRefreshButton()\">refresh</button>\n        </div>\n        <div class=\"character-count\">\n            {{typedCommentTextLength}} / {{inputMaxLength}} characters\n        </div>\n        \n    </div>\n  </div>","import { EventEmitter, Component, Input, Output } from '@angular/core';\nimport { isUndefined } from 'util';\nimport { CommentPayload } from '../services/types'\n\n\n@Component({\n    selector: 'gd-chatterbox',\n    templateUrl: './chatter-box.component.html',\n    styleUrls: ['./chatter-box.component.css']\n  })\n\n\n  export class ChatterBoxComponent {\n    constructor() {}\n\n    @Input() heading: string;\n    @Input() headerImage: string;\n    @Input() showErrorDiv: string;\n    @Input() errorMsg: string;\n    @Input() allComments: CommentPayload[];\n    @Input() inputMaxLength: number;\n    @Input() placeholderText: string;\n    @Input() currentUserId: string;\n\n    @Output() valueChange = new EventEmitter();\n    @Output() onKeyupEnter = new EventEmitter();\n    @Output() onKeyup = new EventEmitter();\n    @Output() emitReport = new EventEmitter();\n    @Output() emitDelete = new EventEmitter();\n    @Output() emitRefresh = new EventEmitter();\n\n    public typedCommentTextLength: number;\n    public commentText: string;\n\n\n\n\n    ngOnInit() { }\n\n    protected showImageOrDiv(comment){\n        return isUndefined(comment.userImagePath);\n    }\n\n    addComment(comment){\n        this.onKeyupEnter.emit(comment);\n        this.commentText = '';\n    }\n\n    onKeyUp(input){\n        this.onKeyup.emit(input);\n        this.typedCommentTextLength = input.length;\n    }\n\n    protected onDeleteButton(input){\n        this.emitDelete.emit(input);\n    }\n\n    onRefreshButton(){\n        this.emitRefresh.emit();\n    }\n\n    protected onReportButton(input){\n        this.emitReport.emit(input);\n    }\n\n  }","\n<div  style=\"height: auto; width: auto;\">\n  <gd-chatterbox *ngIf='heading != \"\"'\n      [heading]=heading\n      [headerImage]=headerImage\n      [allComments]=allComments\n      [inputMaxLength]=1000\n      [currentUserId]=currentUserId\n      [showErrorDiv]=showErrorDiv\n      [errorMsg]=errorMsg\n      [placeholderText]=placeholderText\n      (onKeyupEnter)=sendMessage($event)\n      (emitReport)=onReportComment($event)\n      (emitDelete)=onDeleteComment($event)\n      (emitRefresh)=getComments()\n  >\n  </gd-chatterbox>\n\n  <gd-chatterbox *ngIf='heading == \"\"'\n      heading=\"\"\n      [headerImage]=headerImage\n      [allComments]=allComments\n      [inputMaxLength]=0\n      [showErrorDiv]=showErrorDiv\n      [errorMsg]=errorMsg\n      placeholderText=\"please log in to comment\"\n  >\n  </gd-chatterbox>\n</div>\n\n\n\n","import { Component, OnInit, Input, ChangeDetectorRef } from '@angular/core';\nimport { CommentPayload } from '../services/types';\nimport { Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n@Component({\n  selector: 'gd-comments',\n  templateUrl: './comments.component.html',\n  styleUrls: ['./comments.component.sass']\n})\nexport class CommentsComponent implements OnInit {\n  constructor(private data: DataService, private router: Router,  private dialog: DialogService, private changeDetectorRef: ChangeDetectorRef) { }\n\n  @Input() title: string;\n  @Input() userName: string;\n  @Input() heading = 'comments';\n  //headerImage  =  '../assets/logo.png';\n  showErrorDiv:  boolean;\n  errorMsg  =  'This is an error';\n  inputMaxLength  =  100;\n  placeholderText=  'Write a comment!';\n  @Input() currentUserId:  string;\n  allComments:  Array<CommentPayload>;\n\n\n  ngOnInit() { \n   this.getComments();\n  }\n\n  async sendMessage(msgPayload:  string) {\n      // Constructing a desired object of type CommentPayload to be added to allComments\n      if (msgPayload){\n        //var msgId = Math.floor(1000000000000000 + Math.random() * 9000000000000000);\n        var msgId = this.makeid()\n        var timestamp = new Date;\n        const  payload  = {\n            msgId:  msgId,\n            msg:  msgPayload,\n            timestamp:  timestamp.getTime().toString(),\n            userName:  this.userName,\n            userId: this.currentUserId\n        };\n        try {\n          await this.addComment(payload);\n      } catch (e) {\n          console.error(e);\n      } \n      if (await this.checkComment(msgId)){\n        payload.timestamp = this.formatTime(timestamp);\n        this.allComments.push(payload);\n      }\n    }\n  }\n      \n  onKeyUp(msgPayload:  string) {\n      //console.log(msgPayload);  // doesn't work\n  }\n\n  async getComments(){\n    var res =  await this.data.getComments(this.router.url);\n    if (res != []){\n      res.sort(function(a, b) { return a.timestamp - b.timestamp });\n      for (var i in res) {\n        res[i].timestamp = this.formatTime(new Date(Number(res[i].timestamp)));\n      }\n      this.allComments = res;\n    } else {\n      this.allComments = [];\n    }\n    this.changeDetectorRef.detectChanges();\n  }\n\n\n\n  async addComment(p){\n    await this.data.addComment(p, this.router.url, this.currentUserId, this.title);\n  }\n\n  async checkComment(msgId) {\n    //console.log(msgId)\n    var b = Boolean(Number(await this.data.checkComment(msgId)));\n    //console.log(b);\n    return b\n  }\n\n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  protected onReportComment(msg) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to report this message?\",\n      [\"yes\", \"no\"],\n      [() => this.reportComment(msg), \n        () => null]\n    );\n  }\n\n  protected onDeleteComment(msgId) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to delete this message?\",\n      [\"yes\", \"no\"],\n      [() => this.deleteComment(msgId), \n        () => null]\n    );\n  }\n\n  async reportComment(msg) {\n    var m = await this.data.sendCommentReport(msg, this.currentUserId);\n    if (m.startsWith('250')) {\n      var dm = 'Report sent';\n    } else {\n      var dm = 'Error sending report';\n    }\n    this.dialog.openSingleFunction( dm, [\"ok\"], () => null );\n  }\n\n  async deleteComment(msg) {\n    //console.log(msg.msgId)\n    var d = await this.data.deleteComment(msg.msgId, this.currentUserId);\n    if (!(await this.checkComment(msg.msgId))){\n      console.log('comment '+msg.msgId+' deleted');\n      const i = this.allComments.indexOf(msg);\n      if (i > -1) {\n        this.allComments.splice(i, 1);\n        this.changeDetectorRef.detectChanges();\n      }\n    }\n  }\n\n  private makeid() {\n    var result           = '';\n    var characters       = 'abcdef0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < 24; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n }\n   \n}\n","export const AUTH0DOMAIN = 'gdconcertexplorer.eu.auth0.com';\nexport const AUTH0CLIENTID = 'MgqjkApiGjSzMcFwjzUiyoNJK6z8iWEb';\nexport const EMAILADDRESS = 'gdconcertexplorer@gmail.com';\nexport const TRACKINGID = 'UA-165369751-1';\nexport const TRACKING = false;\n//export const API_URL = 'http://localhost:8060/';\n//export const API_URL = 'http://25.86.166.144:8060/';\n//export const FRONTEND_URL = 'http://localhost:4200/';\nexport const API_URL = 'https://grateful-dead-api.herokuapp.com/';\nexport const FRONTEND_URL = 'https://grateful-dead-live.github.io/';\nexport const DEBUG = true;\n","<div *ngIf=\"showBanner\" class=\"banner\" id=\"cookiebanner\">\n  <p>\n    For continuous improvement of user experience this website uses  cookies for collecting your IP address and individual statistics.\n    See our <a routerLink=\"/dataprivacy\">data protection guideline</a> for further information and opt-out.\n    By clicking OK you agree to share your data. \n  </p>\n\n  <!--button (click)=\"agreeToShare()\">OK</button-->\n  <button onclick=\"gaOptIn()\">Agree</button>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service'; // https://itnext.io/angular-8-how-to-use-cookies-14ab3f2e93fc\n\n@Component({\n  selector: 'app-cookie-banner',\n  templateUrl: './cookie-banner.component.html',\n  styleUrls: ['./cookie-banner.component.sass']\n})\nexport class CookieBannerComponent implements OnInit {\n\npublic constructor(private cookieService: CookieService) { //, @Inject('window')  private window) {\n}\n\npublic showBanner: Boolean;\n\npublic ngOnInit() {\n  const consent = this.cookieService.get('gd-cookieconsent')\n  if (consent == 'allow') {\n    this.showBanner = false;\n  } else {\n    this.showBanner = true;\n  }\n}\n\n  private setCookie(cname, cvalue, exdays) {\n    const d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    this.cookieService.set(cname, cvalue, d, '/');\n  }\n\n  public agreeToShare() {\n    this.setCookie('gd-cookieconsent', 'allow', 365);\n    //this.window.location.reload();\n  }\n\n}\n","\n<div>\n <gd-header title=\"Privacy Policy\" subtitle=\"\">\n</gd-header>\n    <div>\n        Privacy Policy\n    </div>\n    <!--button (click)=\"agreeToShare()\">Agree</button-->\n    <!--button (click)=\"removeCookie()\">Revoke</button-->\n    <br>\n    <button onclick=\"gaOptIn()\">Agree</button>\n    <button onclick=\"gaOptOut()\">Revoke</button>\n\n</div>","import { Component, OnInit, Inject } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service'; \nimport { TRACKINGID } from '../config'\n\n@Component({\n  selector: 'privacy-policy',\n  templateUrl: './privacy-policy.component.html',\n  styleUrls: ['./privacy-policy.component.sass']\n})\nexport class PrivacyPolicyComponent implements OnInit {\n\n  public constructor(private cookieService: CookieService,\n              @Inject('window') private window) {\n  }\n\n  public showBanner: Boolean;\n\n\n  public ngOnInit() {\n  }\n\n  public removeCookie() {\n      this.cookieService.delete('gd-cookieconsent');\n      this.cookieService.delete('_ga');\n      this.cookieService.delete('_gid');\n      this.cookieService.delete('_gat_gtag_' + TRACKINGID.replace(/-/g, '_'));\n      this.window.location.reload();\n  }\n\n  private setCookie(cname, cvalue, exdays) {\n    const d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    this.cookieService.set(cname, cvalue, d);\n  }\n\n  public agreeToShare() {\n    this.setCookie('gd-cookieconsent', 'allow', 365);\n    this.window.location.reload();\n  }\n\n\n}\n","\n<!--<div *ngIf=\"auth.userProfile$ | async as profile\">\n<gd-header title='Profile' subtitle='{{ profile[\"http://example.com/username\"]}}'></gd-header>-->\n<div *ngIf=\"currentUser\">\n  <gd-header title='Profile' subtitle='{{ currentUser.userName }}' userId='{{ currentUser.userId }}'></gd-header>\n  <br><b>User Info</b><br>\n  <!--pre>\n    <code>{{ userProfile | json }}</code>\n  </pre-->\n\n  <i>{{'Username:  '}} </i>{{ userProfile['http://example.com/username'] }}\n  <br><i>{{'Email:  '}} </i> {{ userProfile.email }}\n\n\n  <br><br><b>Bookmarks</b><br>\n  <div *ngIf=\"!bookmarks\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n  <div *ngIf=\"bookmarks\">\n      <div *ngFor=\"let b of bookmarks\">\n            {{b.timestamp}} <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"b.route\">{{ b.title }}</u>\n            <button mat-icon-button (click)=\"onDeleteBookmark(b)\"><mat-icon>clear</mat-icon></button>  \n      </div>\n  </div>\n\n  <br><b>Likes</b><br>\n  <div *ngIf=\"!likes || likes.length==0\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n\n  <div *ngIf=\"likes\">\n      <div *ngFor=\"let l of likes\">\n          {{l.timestamp}} <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"l.route\">{{ l.title }}</u>\n          <button mat-icon-button (click)=\"onUnlike(l)\"><mat-icon>clear</mat-icon></button>  \n      </div>\n  </div>\n\n  <br><b>Commented on</b><br>\n  <div *ngIf=\"!comments\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n    <mat-spinner diameter=\"30\"></mat-spinner>\n  </div>\n  <div *ngIf=\"comments\"> \n    <div *ngFor=\"let c of comments\">\n      <u class=\"field\" style=\"cursor:pointer\" [routerLink]=\"c.route\">{{ c.title }}</u>\n    </div>\n  </div>\n\n  <br><b>Playlists</b><br>\n  \n  <div *ngIf=\"player.playlists\">\n    <div *ngIf=\"!player.playlistsLoaded\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\">\n      <mat-spinner diameter=\"30\"></mat-spinner>\n    </div>\n    <div *ngFor=\"let p of player.playlists\">\n      <div> {{ p.timestamp }} \"{{ p.name }}\"\n        <button mat-icon-button (click)=\"loadPlaylist(p.playlist)\"><mat-icon>library_music</mat-icon></button> \n        <button mat-icon-button (click)=\"delPlaylist(p.id, p.name)\"><mat-icon>clear</mat-icon></button>   \n        \n      </div>\n      <div *ngFor=\"let t of p.playlist; index as i\">\n        <small>{{i+1}}. {{ t.title }}</small>\n      </div>\n      <share-buttons [theme]=\"'default'\"\n        [include]=\"['facebook','twitter','pinterest','reddit','tumblr','mix','copy']\"\n        url = \"{{frontend_url + '#/playlist/' + p.id}}\"\n        [show]=\"7\"\n        [size]=\"-7\"\n        [title]=\"'Grateful Dead Concert Explorer Playlist'\"\n        [tags]=\"'GratefulDeadExplorer,GratefulDead,playlist'\"\n        >\n      </share-buttons>\n    <br>\n    </div>\n  </div>\n</div>\n\n<div *ngIf=\"!currentUser\">\n  <gd-header title='Profile'></gd-header>\n  <pre>you are not logged in</pre>\n</div>\n\n<p [style.margin-bottom]=\"'75px'\"></p>\n\n\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport { DataService } from '../services/data.service';\nimport { APIResolver } from '../auth.resolve';\nimport { ActivatedRoute } from '@angular/router';\nimport { DialogService } from '../services/dialog.service';\nimport { PlayerService } from '../services/player.service';\nimport { FRONTEND_URL, DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.sass']\n})\nexport class ProfileComponent implements OnInit {\n  constructor(public auth: AuthService, private data: DataService, public resolve: APIResolver, private route: ActivatedRoute,\n    private dialog: DialogService, private player: PlayerService) { \n\n      \n    }\n\n  public currentUser: any;\n  //protected authenticated: boolean;\n  protected userProfile: any;\n  protected bookmarks: any;\n  protected likes: any;\n  protected comments: any;\n  public frontend_url = FRONTEND_URL;\n  //public domain = DOMAIN;\n  //protected playlists: any;\n    \n\n  ngOnInit() {  \n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.userProfile = userProfile;\n        this.currentUser = this.resolve.getUser(userProfile);\n        gtag('set', {'user_id': this.currentUser.userId});\n        this.getBookmarks();\n        this.getLikes();\n        this.getComments();\n      });\n    }\n\n    /*\n    if (this.currentUser){\n      this.getBookmarks();\n        this.getComments();\n        this.getPlaylists();\n    }\n    */\n\n/*\n    if (this.authenticated == true) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = userProfile;\n        this.userId = this.currentUser.sub.split(\"|\")[1];\n        this.userName = this.currentUser['http://example.com/username'];\n      });\n    console.log(this.userId)\n    }*/\n  }\n\n  async getBookmarks(){\n    var result = await this.data.getBookmarks(this.currentUser.userId);\n    if (result[0].bookmarks) {\n      var m = result[0].bookmarks;\n      m.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      m.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.bookmarks = m;\n    };\n  }\n\n  async getLikes(){\n    var result = await this.data.getLikes(this.currentUser.userId);\n    if (result[0].likes) {\n      var l = result[0].likes;\n      l.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      l.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.likes = l;\n    };\n  }\n\n\n  async getComments(){\n    var result = await this.data.getUserComments(this.currentUser.userId);\n    if (result[0].comments) {\n      var res = [];\n      result[0].comments.forEach(r => {\n        if (!(res.some(res => res.title === r.title) && res.some(res => res.route === r.route))){\n          res.push({'title': r.title, 'route': r.route});\n        }        \n      })\n      this.comments = res;\n      //this.comments = result[0].comments;\n    };\n  }\n\n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  delPlaylist(playlistid, name) {\n    this.dialog.openMultiFunction(\n      'Are you sure you want to delete playlist \"' + name + '\"?',\n      [\"yes\", \"no\"],\n      [async () => {\n        await this.player.deletePlaylist(this.currentUser.userId, playlistid);\n      },\n        () => null]\n    );\n  } \n\n  loadPlaylist(playlist) {\n    this.dialog.openMultiFunction(\n      'Your current playlist will be lost',\n      [\"ok\", \"cancel\"],\n      [() => { \n        this.player.playlist = [...playlist];\n        this.player.storePlaylist();\n      },\n        () => {}]\n    );\n    \n  }\n\n  protected onDeleteBookmark(bookmark) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to delete this bookmark?\",\n      [\"yes\", \"no\"],\n      [() => this.deleteBookmark(bookmark), \n        () => null]\n    );\n  }\n\n  async deleteBookmark(bookmark){\n    await this.data.delBookmark(this.currentUser.userId, bookmark.route);\n    this.getBookmarks();\n  }\n\n  protected onUnlike(like) {\n    this.dialog.openMultiFunction(\n      \"Are you sure you want to unlike?\",\n      [\"yes\", \"no\"],\n      [() => this.unlike(like), \n        () => null]\n    );\n  }\n\n  async unlike(like){\n    await this.data.unlike(this.currentUser.userId, like.route);\n    this.getLikes();\n  }\n\n\n}","import * as _ from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { DeadApiService } from './dead-api.service';\nimport { DeadEventInfo, DeadEventDetails, SongInfo, SongDetails, AudioTrack,\n  Location, Venue, VenueDetails, ArtifactType, Artifact, Set, Recording,\n  RecordingDetails } from './types';\nimport { Track } from './player.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nconst ARCHIVE_URI = 'https://archive.org/download/';\n\nexport interface EventArtifact extends Artifact {\n  eventInfo: string\n}\n\n@Injectable()\nexport class DataService {\n\n  private loading: Promise<any>;\n  private events: DeadEventInfo[];\n  public event: DeadEventDetails;\n\n  constructor(private apiService: DeadApiService) {\n    this.loading = this.initEvents();\n  }\n  \n  async getEventInfo(eventId: string) {\n    return (await this.getEventInfos([eventId]))[0];\n  }\n  \n  async getEventInfos(eventIds: string[]) {\n    if (eventIds) {\n      await this.loading;\n      return this.events.filter(e => eventIds.indexOf(e.id) >= 0);\n    }\n  }\n  \n  async getEventDetails(eventId: string) {\n    this.event = await this.apiService.getEventDetails(eventId);\n    return this.event;\n  }\n  \n  async getLocation(locationId: string) {\n    return await this.apiService.getLocation(locationId);\n  }\n  \n  async getVenue(venueId: string) {\n    return await this.apiService.getVenue(venueId);\n  }\n  \n  async getVenueCoordinates(): Promise<VenueDetails[]> {\n    return this.apiService.getVenueCoordinates();\n  }\n\n  async getTourCoordinates(): Promise<VenueDetails[]> {\n    return this.apiService.getTourCoordinates();\n  }\n  \n  async getArtistDetails(artistId: string) {\n    return this.apiService.getArtistDetails(artistId);\n  }\n  \n  async getSong(songId: string): Promise<SongDetails> {\n    return this.apiService.getSong(songId);\n  }\n  \n  async getEventInfoForRecording(recordingId: string): Promise<DeadEventInfo> {\n    await this.loading;\n    return this.events.filter(e => e.recordings.some(r => r.id === recordingId))[0];\n  }\n  \n  async getRecording(recordingId: string) {\n    return this.apiService.getRecordingDetails(recordingId);\n  }\n  \n  async getRecordingTracks(recording: Recording, event: DeadEventInfo): Promise<Track[]> {\n    const tracks = await this.apiService.getRecordingTracks(recording.id);\n    return tracks.map(t => this.toTrack(event, recording.etreeId, t, recording.id, t.id)); \n  }\n  \n  async getTrackFromAudio(audio: AudioTrack, event: DeadEventInfo, etreeId: string) {\n    return this.toTrack(event, etreeId, audio, event.id, audio.id);  \n  }\n  \n  async getTrack(song: SongInfo, event: DeadEventInfo, etreeId?: string, recordingId?: string) {\n    const songDetails = await this.apiService.getSong(song.id);\n    if (!etreeId) {\n      const sbd = event.recordings.filter(r => r.isSoundboard);\n      var e = sbd.length ? sbd[0] : _.sample(event.recordings);\n      etreeId = e.etreeId;\n      recordingId = e.id;\n    } \n    return this.getTracks(songDetails, event, etreeId, recordingId)[0];\n  }\n  \n  getTracks(song: SongDetails, event: DeadEventInfo, etreeId: string, recordingId: string): Track[] {\n    return song.audio && song.audio[etreeId] ?\n      song.audio[etreeId].map(a => this.toTrack(event, etreeId, a, recordingId, song.id)) : [];\n  }\n  \n  async loadRandomEvent(): Promise<DeadEventDetails> {\n    return (await this.getEventDetails(await this.getRandomEventId()));\n  }\n  \n  async getRandomEventId(): Promise<string> {\n    await this.loading;\n    return this.events[Math.floor(Math.random()*this.events.length)].id;\n  }\n  \n  async getRandomVenue(): Promise<Venue> {\n    return (await this.loadRandomEvent()).venue;\n  }\n  \n  async getRandomLocation(): Promise<Location> {\n    return (await this.loadRandomEvent()).location;\n  }\n  \n  async getRandomArtifacts(types?: ArtifactType[], count = 20): Promise<EventArtifact[]> {\n    await this.loading;\n    let artifacts = _.flatten(this.events.map(e => e.artifacts.map(a =>\n      Object.assign(a, {eventInfo: e.venue + \", \" + e.location + \", \" + e.date}))));\n    if (types) {\n      artifacts = artifacts.filter(a => types.indexOf(a.type) >= 0);\n    }\n    return _.sampleSize(artifacts, count);\n  }\n  \n  async getRandomArtistId(): Promise<string> {\n    await this.loading;\n    return _.sample(this.event.performers).id;\n  }\n  \n  async getRandomRecording(): Promise<RecordingDetails> {\n    const randomEvent = await this.getEventInfo(await this.getRandomEventId());\n    return this.apiService.getRecordingDetails(_.sample(randomEvent.recordings).id);\n  }\n  \n  async getRandomSetlist(): Promise<Set[]> {\n    return this.apiService.getSetlist(await this.getRandomEventId());\n  }\n  \n  async getRandomSong(): Promise<SongDetails> {\n    const randomSong = _.sample(_.sample(await this.getRandomSetlist()).songs);\n    console.log(randomSong)\n    return this.apiService.getSong(randomSong.id);\n  }\n  \n  async getRandomTrack(): Promise<Track> {\n    const randomSong = await this.getRandomSong();\n   \n    const randomRecordingEtreeId = _.sample(_.keys(randomSong.audio));\n    const randomAudio = _.sample(randomSong.audio[randomRecordingEtreeId]);\n    const correspondingEvent = this.events.filter(e =>\n      e.recordings.map(r => r.etreeId).indexOf(randomRecordingEtreeId) >= 0)[0];\n    return this.toTrack(correspondingEvent, randomRecordingEtreeId, randomAudio, '', randomSong.id);  // TODO: fix recordingId\n  }\n  \n  private toTrack(event: DeadEventInfo, etreeId: string, audio: AudioTrack, recordingId: string, songId: string): Track {\n    const uri = ARCHIVE_URI+etreeId+'/'+audio.filename;\n    return {\n      title: audio.title + \", \" + event.venue + \", \"\n        + event.location + \", \" + event.date,\n      uri: uri,\n      show_id: event.id,\n      waveform: uri.replace('.mp3', '.png'),\n      etree_id: etreeId,\n      recording_id: recordingId,\n      song_id: songId,\n      track: audio.track\n    };\n  }\n  \n  private async initEvents() {\n    this.events = await this.apiService.getEvents();\n    this.events.sort((a, b) => parseFloat(a.date.replace(/-/g, ''))\n      - parseFloat(b.date.replace(/-/g, '')));\n  }\n  \n  formatDate(date: string) {\n    return new Date(date).toLocaleDateString(\"en-US\",\n      { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\n  }\n\n  formatDates(objects: {date: string}[]) {\n    objects.forEach(o => o.date = this.formatDate(o.date));\n  }\n\n  async getSearchResult(q: string): Promise<any> {\n    return this.apiService.getSearchResult(q);\n  }\n\n  async addBookmark(userid: string, route: string, time: number, title: string): Promise<any> {\n    return this.apiService.addBookmark(userid, route, time, title);\n  }\n\n  async delBookmark(userid: string, route: string): Promise<any> {\n    return this.apiService.delBookmark(userid, route);\n  }\n\n  async getBookmarks(userid: string): Promise<any> {\n    return this.apiService.getBookmarks(userid);\n  }\n\n  async checkBookmark(userid: string, route: string): Promise<any> {\n    return this.apiService.checkBookmark(userid, route);\n  }\n  \n  async like(userid: string, route: string, time: number, title: string): Promise<any> {\n    return this.apiService.like(userid, route, time, title);\n  }\n\n  async unlike(userid: string, route: string): Promise<any> {\n    return this.apiService.unlike(userid, route);\n  }\n\n  async checkLike(userid: string, route: string): Promise<any> {\n    return this.apiService.checkLike(userid, route);\n  }\n\n  async countLikes(route: string): Promise<any> {\n    return this.apiService.countLikes(route);\n  }\n  \n  async getLikes(userid: string): Promise<any> {\n    return this.apiService.getLikes(userid);\n  }\n\n  async getComments(route: string): Promise<any> {\n    return this.apiService.getComments(route);\n  }\n\n  async addComment(comment: any, route: string, userid: string, title: string): Promise<any> {\n    return this.apiService.addComment(comment, route, userid, title);\n  }\n\n  async checkComment(msgId: string): Promise<any> {\n    return this.apiService.checkComment(msgId);\n  }\n\n  async getUserComments(userid: string): Promise<any> {\n    return this.apiService.getUserComments(userid);\n  }\n\n  async sendCommentReport(msg: any, userid: string): Promise<any> {\n    const comment = encodeURIComponent(JSON.stringify(msg));\n    return this.apiService.sendCommentReport(comment, userid);\n  }\n\n  async addPlaylist(name: string, playlist: Track[], playlistid: string, userid: string, time: number): Promise<any> {\n    const p = encodeURIComponent(JSON.stringify(playlist));\n    return this.apiService.addPlaylist(name, p, playlistid, userid, time);\n  }\n\n  async getPlaylists(userid: string): Promise<any> {\n    return this.apiService.getPlaylists(userid);\n  }\n\n  async getPlaylist(playlistid: string): Promise<any> {\n    return this.apiService.getPlaylist(playlistid);\n  }\n\n  async delPlaylist(userid: string, playlistid: string): Promise<any> {\n    return this.apiService.delPlaylist(userid, playlistid);\n  }\n\n  async deleteComment(msgid: string, userid: string): Promise<any> {\n    return this.apiService.deleteComment(msgid, userid);\n  }\n\n  async getRecordingInfo(recordingid: string){\n    return this.apiService.getRecordingInfo(recordingid);\n  }\n\n  async getTracklist(recordingid: string){\n    return this.apiService.getTracklist(recordingid);\n  }\n\n  toPlayerTrack(venue: string, location: string, date: string, showId: string, etreeId: string, \n                        audio: AudioTrack, recordingId: string): Track {\n    const uri = ARCHIVE_URI+etreeId+'/'+audio.filename;\n    return {\n      title: audio.title + \", \" + venue + \", \"\n        + location + \", \" + date,\n      uri: uri,\n      show_id: showId,\n      waveform: uri.replace('.mp3', '.png'),\n      etree_id: etreeId,\n      recording_id: recordingId,\n      song_id: audio.id,\n      track: audio.track\n    };\n  }\n\n  async getYoutubeList(id: string, searchArray: string[]){\n    return this.apiService.getYoutubeList(id, searchArray);\n  }\n\n}","import { Injectable } from '@angular/core';\r\nimport { SafeResourceUrl } from '@angular/platform-browser';\r\nimport { DeadEventInfo, DeadEventDetails, Location, Venue, Set,\r\n  SongDetails, ArtistDetails, VenueDetails, RecordingDetails, AudioTrack } from './types';\r\nimport { API_URL, DEBUG } from '../config';\r\n\r\nconsole.log = function(s){\r\n  if (DEBUG) {\r\n    console.warn(s);\r\n  }; \r\n};\r\n\r\n\r\nexport interface Recording {\r\n  id: string,\r\n  url: SafeResourceUrl\r\n}\r\n\r\n@Injectable()\r\nexport class DeadApiService {\r\n\r\n  //private API_URL = \"https://grateful-dead-api.herokuapp.com/\";\r\n  //private API_URL = \"http://localhost:8060/\";\r\n  private api_url = API_URL;\r\n\r\n  constructor() {}\r\n\r\n  async getEvents(): Promise<DeadEventInfo[]> {\r\n    return this.getJsonFromApi('events');\r\n  }\r\n\r\n  async getVenueCoordinates(): Promise<VenueDetails[]> {\r\n    return this.getJsonFromApi('coordinates');\r\n  }\r\n\r\n  async getTourCoordinates(): Promise<any> {\r\n    return this.getJsonFromApi('tours');\r\n  }\r\n\r\n  async getEventDetails(eventId: string): Promise<DeadEventDetails> {\r\n    return this.getJsonFromApi('details?event='+encodeURIComponent(eventId))\r\n  }\r\n  \r\n  getLocation(locationId: string): Promise<Location> {\r\n    return this.getJsonFromApi('location?id='+encodeURIComponent(locationId));\r\n  }\r\n  \r\n  getVenue(venueId: string): Promise<Venue> {\r\n    return this.getJsonFromApi('venue?id='+encodeURIComponent(venueId));\r\n  }\r\n  \r\n  getSetlist(eventId: string): Promise<Set[]> {\r\n    return this.getJsonFromApi('setlist?event='+encodeURIComponent(eventId));\r\n  }\r\n  \r\n  getSong(songId: string): Promise<SongDetails> {\r\n    return this.getJsonFromApi('song?id='+encodeURIComponent(songId));\r\n  }\r\n  \r\n  getRecordingDetails(recordingId: string): Promise<RecordingDetails> {\r\n    return this.getJsonFromApi('recording?id='+encodeURIComponent(recordingId));\r\n  }\r\n  \r\n  getRecordingTracks(recordingId: string): Promise<AudioTrack[]> {\r\n    return this.getJsonFromApi('tracks?id='+encodeURIComponent(recordingId));\r\n  }\r\n\r\n  getRecordingId(eventId: string): Promise<any> {\r\n    return this.getJsonFromApi('recordingid?id='+encodeURIComponent(eventId));\r\n  }\r\n  \r\n  getArtistDetails(artistId: string): Promise<ArtistDetails> {\r\n    return this.getJsonFromApi('artist?id='+encodeURIComponent(artistId));\r\n  }\r\n\r\n  getFeatureSummary(audioUri: string): Promise<{}> {\r\n    return this.getJsonFromApi('featuresummary?audiouri='+encodeURIComponent(audioUri));\r\n  }\r\n\r\n  getDiachronicVersionsAudio(songName: string, count = 100, skip = 0): Promise<string[]> {\r\n    return this.getJsonFromApi('diachronic?songname='+encodeURIComponent(songName)\r\n      +\"&count=\"+count+\"&skip=\"+skip);\r\n  }\r\n\r\n  async getJsonFromApi(path: string): Promise<any> {\r\n    return fetch(this.api_url+path)\r\n      .then(r => r.text())\r\n      .then(t => JSON.parse(t))\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n  async getTextFromApi(path: string): Promise<any> {\r\n    return fetch(this.api_url+path)\r\n      .then(r => r.text())\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n  async getSearchResult(q: string): Promise<any> {\r\n    return this.getJsonFromApi('search?q='+encodeURIComponent(q));\r\n  }\r\n\r\n  async addBookmark(userid: string, route: string, time: number, title: string): Promise<any> {\r\n    return this.getTextFromApi('addBookmark?userid='+userid+'&route='+route+'&time='+time+'&title='+title);\r\n  }\r\n\r\n  async delBookmark(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('delBookmark?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async getBookmarks(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getBookmarks?userid='+userid);\r\n  }\r\n\r\n  async checkBookmark(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('checkBookmark?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async getComments(route: string): Promise<any> {\r\n    return this.getJsonFromApi('getComments?route='+route);\r\n  }\r\n\r\n\r\n\r\n  async like(userid: string, route: string, time: number, title: string): Promise<any> {\r\n    return this.getTextFromApi('like?userid='+userid+'&route='+route+'&time='+time+'&title='+title);\r\n  }\r\n\r\n  async unlike(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('unlike?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async checkLike(userid: string, route: string): Promise<any> {\r\n    return this.getTextFromApi('checkLike?userid='+userid+'&route='+route);\r\n  }\r\n\r\n  async countLikes(route: string): Promise<any> {\r\n    return this.getTextFromApi('countLikes?route='+route);\r\n  }\r\n\r\n  async getLikes(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getLikes?userid='+userid);\r\n  }\r\n  \r\n\r\n\r\n\r\n  async addComment(comment: any, route: string, userid: string, title: string): Promise<any> {\r\n    const cmt = encodeURIComponent(JSON.stringify(comment));\r\n    return this.getTextFromApi('addComment?comment='+cmt+'&route='+route+'&userid='+userid+'&title='+title);\r\n  }\r\n\r\n  async checkComment(msgId: string): Promise<any> {\r\n    return this.getJsonFromApi('checkComment?msgId='+msgId);\r\n  }\r\n\r\n  async getUserComments(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getUserComments?userid='+userid);\r\n  }\r\n\r\n  async sendCommentReport(comment: string, userid: string): Promise<any> {\r\n    return this.getTextFromApi('sendCommentReport?comment='+comment+'&userid='+userid);\r\n  }\r\n\r\n  async addPlaylist(name: string, playlist: string, playlistid: string, userid: string, time: number): Promise<any> {\r\n    return this.getTextFromApi('addPlaylist?name='+name+'&playlist='+playlist+'&playlistid='+playlistid+'&userid='+userid+'&time='+time);\r\n  }\r\n\r\n  async getPlaylists(userid: string): Promise<any> {\r\n    return this.getJsonFromApi('getPlaylists?userid='+userid);\r\n  }\r\n\r\n  async getPlaylist(playlistid: string): Promise<any> {\r\n    return this.getJsonFromApi('getPlaylist?playlistid='+playlistid);\r\n  }\r\n\r\n  async delPlaylist(userid: string, playlistid: string): Promise<any> {\r\n    return this.getTextFromApi('delPlaylist?userid='+userid+'&playlistid='+playlistid);\r\n  }\r\n\r\n  async deleteComment(msgid: string, userid: string): Promise<any> {\r\n    return this.getTextFromApi('deleteComment?msgid='+msgid+'&userid='+userid);\r\n  }\r\n\r\n  async getRecordingInfo(recordingid: string): Promise<any> {\r\n    return this.getJsonFromApi('getRecordingInfo?recordingid='+recordingid);\r\n  }\r\n\r\n  async getTracklist(recordingid: string): Promise<any> {\r\n    return this.getJsonFromApi('getTracklist?recordingid='+recordingid);\r\n  }\r\n\r\n  async getYoutubeList(id: string, searcharray: string[]): Promise<any> {\r\n    const s = encodeURIComponent(JSON.stringify(searcharray));\r\n    return this.getJsonFromApi('youtube?id='+id+'&searcharray='+s);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { ListDialogComponent } from '../shared/list-dialog.component';\nimport { InputDialogComponent } from '../shared/input-dialog.component';\nimport { DataService } from '../services/data.service';\n\n@Injectable()\nexport class DialogService {\n  constructor(private dialog: MatDialog, private data: DataService) {}\n  \n  async openMultiFunction(title: string, options: string[], funcs: Function[]) {\n    this.open(title, options).subscribe(result => {\n     if (result) {funcs[options.indexOf(result)]() }\n  });\n  }\n  \n  async openSingleFunction(title: string, options: string[], func: (s: string) => any) {\n    this.open(title, options).subscribe(result => func(result));\n  }\n  \n  private open(title: string, options: string[]) {\n    return this.dialog.open(ListDialogComponent,\n      this.getDialogConfig(title, options)).afterClosed();\n  }\n  \n  private getDialogConfig(title: string, items: string[]) {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.data = { title: title, items: items };\n    return dialogConfig;\n  }\n\n  \n  async openInputDialog(callback) {\n    const dialogRef = this.dialog.open(InputDialogComponent, {\n      width: '250px',\n      data: {input: ''}\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      callback(result);\n    });\n  }\n\n\n\n}","import { Injectable } from '@angular/core';\nimport { TRACKING } from '../config';\n\ndeclare let gtag:Function;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n  constructor() { }\n\n  public eventEmitter(eventName: string, eventCategory: string, eventAction: string, eventLabel: string = null, eventValue: number = null ){ \n    if (TRACKING){\n      gtag('event', eventName, { \n              event_category: eventCategory, \n              event_label: eventLabel, \n              event_action: eventAction, \n              value: eventValue\n            })\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Lightbox, LightboxConfig } from 'ngx-lightbox';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LightboxService {\n\n  constructor(private lightbox: Lightbox, private lightboxConfig: LightboxConfig) {\n    lightboxConfig.wrapAround = true;\n    //lightboxConfig.showZoom = true;  \n    // results in ExpressionChangedAfterItHasBeenCheckedError\n    // workaround: set [hidden]=\\\"!ui.showZoomButton\\\"> to [hidden]=\\\"ui.showZoomButton\\\"> in lightbox.component.metadata.json\n   }\n\n  makeGallery(a) {\n    var carousel = [];\n    var lightboxa = [];\n    a.forEach(function (value, i){\n      var t = value;\n      t['index'] = i;\n      if (!value.thumbnail) t['thumbnail'] = t.image;\n      carousel.push(t);\n      lightboxa.push({\n        src: value.image,\n        caption: value.description\n      });\n    });\n    return [lightboxa, carousel];\n  }\n\n  openLightboxArray(lightboxArray, index: number): void {\n    this.lightbox.open(lightboxArray, index);\n  }\n\n  openLightBoxSingle(a): void {\n    this.lightbox.open([{ src: a.image, caption: a.description, thumb: '' }], 0)\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport{GoogleAnalyticsService} from './google-analytics.service';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nexport interface Track {\n  title: string,\n  uri: string,\n  waveform: string,\n  show_id: string,\n  etree_id: string,\n  recording_id: string,\n  song_id: string,\n  track: string\n}\n\n@Injectable()\nexport class PlayerService {\n  \n  public maxTime: number = 0;\n  public currentTime: number = 0;\n  private currentAudio: HTMLAudioElement;\n  public playlist: Track[] = [];\n  private currentTrackIndex = 0;\n  public muted = false;\n  public paused = true;\n  public playlists = [];\n  public playlistsLoaded = false;\n  \n  constructor(protected googleAnalyticsService: GoogleAnalyticsService, private data: DataService, private dialog: DialogService) {}\n  \n  addToPlaylist(track: Track) {\n    if (this.playlist.length < 100) {\n      this.playlist.push(track);\n      this.storePlaylist();\n    }\n    else {\n      this.dialog.openSingleFunction( 'Playlist is limited to 100 tracks.', [\"ok\"], () => null );\n    }\n  }\n\n  deleteFromPlaylist(i){\n    this.playlist.splice(i, 1);\n    this.storePlaylist();\n  }\n\n  clearPlaylist(){\n    this.playlist = [];\n    this.storePlaylist();\n  }\n  \n  getCurrentTrack() {\n    return this.playlist[this.currentTrackIndex]\n      || {title:\"\", uri:\"\", waveform:\"\"};\n  }\n  \n  skipToTrack(track: Track) {\n    this.skipToTrackAtIndex(this.playlist.indexOf(track));\n  }\n\n\n/*\n    eventName: string, \n    eventCategory: string, \n    eventAction: string, \n    eventLabel: string = null,  \n    eventValue: number = null ){ \n      */\n\n\n  playPause() {\n    if (this.playlist.length > 0){\n      if (this.currentAudio) {\n        if (this.currentAudio.paused) {\n          this.currentAudio.play();\n          this.paused = false;\n        } else {\n          this.currentAudio.pause();\n          this.paused = true;\n        }\n      } else {\n        this.playPlaylist();\n      }\n  }\n  }\n  \n  stop() {\n    if (this.currentAudio) {\n      this.reset();\n    }\n  }\n  \n  setTime(time: number) {\n    if (this.currentAudio && time != Math.floor(this.currentAudio.currentTime)) {\n      this.currentAudio.currentTime = time;\n    }\n  }\n  \n  toggleMute() {\n    this.muted = !this.muted;\n    if (this.currentAudio) {\n      this.currentAudio.muted = this.muted;\n    }\n  }\n  \n  isMuted() {\n    return this.muted;\n  }\n  \n  nextTrack() {\n    if (this.playlist.length) {\n      this.skipToTrackAtIndex((this.currentTrackIndex+1) % this.playlist.length);\n    }\n  }\n  \n  previousTrack() {\n    if (this.playlist.length) {\n      this.skipToTrackAtIndex((this.currentTrackIndex-1) % this.playlist.length);\n    }\n  }\n  \n  private skipToTrackAtIndex(index: number) {\n    this.currentTrackIndex = index;\n    if (this.currentAudio) {\n      this.stop();\n      this.playPause();\n    }\n  }\n  \n  private async playPlaylist() {\n    if (this.currentTrackIndex < this.playlist.length) {\n      console.log('Google Analytics')\n      this.googleAnalyticsService.eventEmitter(\"play\", \"audio_player\", \"play\", this.getCurrentTrack().uri);\n      await this.playCurrentTrack();\n      this.currentTrackIndex++;\n      //this.playPlaylist();  // why was this here?\n    } else {\n      this.reset();\n    }\n  }\n  \n  private async playCurrentTrack() {\n    const audio = new Audio(this.playlist[this.currentTrackIndex].uri);\n    audio.muted = this.muted;\n    audio.play();\n    this.paused = false;\n    this.currentAudio = audio;\n    audio.ontimeupdate = () => {\n      this.maxTime = audio.duration;\n      this.currentTime = audio.currentTime;\n    };\n    return new Promise(resolve => audio.onended = resolve);\n  }\n  \n  private reset() {\n    this.currentAudio.ontimeupdate = null;\n    this.currentAudio.pause();\n    this.currentAudio = null;\n    this.currentTime = 0;\n    this.paused = true;\n  }\n\n  volume(v) {\n    if (this.currentAudio) {\n      this.currentAudio.volume = v / 100;\n    }\n  }\n\n  async getPlaylists(userId){\n    var result = await this.data.getPlaylists(userId);\n    if (result[0].playlists){\n      var p = result[0].playlists;\n      p.sort(function(a, b) { return a.timestamp - b.timestamp }).reverse();\n      p.forEach(i => i.timestamp = this.formatTime(new Date(Number(i.timestamp))));\n      this.playlists = p;\n      this.playlistsLoaded = true;      \n    }\n  }\n\n  async deletePlaylist(userid, playlistid){\n    await this.data.delPlaylist(userid, playlistid);\n    this.getPlaylists(userid);\n  }\n  \n  formatTime(d) {\n    function z(n){return (n<10?'0':'')+n}\n    return z(d.getMonth()+1) + '-' + z(d.getDate()) + '-' + (d.getYear()+1900) + ' ' +  d.getHours() + ':' + z(d.getMinutes());\n  }\n\n  storePlaylist(){\n    localStorage.setItem('playlist', btoa(JSON.stringify(this.playlist)));\n  }\n  \n  removePlaylistFromStorage(){\n    localStorage.removeItem('playlist');\n  }\n\n  loadPlaylistFromsStorage(){\n    var p = localStorage.getItem('playlist');\n    if (p) this.playlist = JSON.parse(atob(p));\n  }\n\n}","export interface DeadEventInfo {\n  id: string,\n  date: string,\n  location: string,\n  state: string,\n  venue: string,\n  recordings: Recording[],\n  artifacts: Artifact[]\n}\n\nexport interface DeadEventDetails {\n  id: string,\n  date: string,\n  location: Location,\n  venue: Venue,\n  setlist: Set[],\n  weather: Weather,\n  news: News[],\n  recordings: Recording[],\n  performers: Artist[],\n  artifacts: Artifact[]\n}\n\nexport enum ArtifactType {\n  Ticket = 'ticket',\n  Poster = 'poster',\n  Pass = 'backstage pass',\n  Photo = 'photo',\n  Envelope = 'envelope',\n  Tshirt = 'T-shirt',\n  Fanart = 'fan art'\n}\n\nexport interface Artifact {\n  type: ArtifactType,\n  thumbnail: string,\n  image: string,\n  description: string,\n  collection: string,\n  source: string\n  index?: number,\n}\n\nexport type Venue = GdEventsObject;\n\nexport interface Location extends GdEventsObject {\n  state: string\n}\n\nexport interface Set {\n  name: string,\n  songs: SongInfo[]\n}\n\nexport interface SongInfo extends GdObject {\n  composedBy: Artist[],\n  lyricsBy: Artist[]\n};\n\nexport interface SongDetails extends SongInfo, GdEventsObject {\n  audio?: AudioTrackMap\n}\n\nexport interface AudioTrackMap {\n  [recordingId: string]: AudioTrack[]\n}\n\nexport interface RecordingDetails extends Recording {\n  info: EtreeInfo\n  tracks: AudioTrack[]\n}\n\nexport interface Recording {\n  id: string,\n  etreeId: string,\n  isSoundboard: boolean\n}\n\nexport interface AudioTrack {\n  filename: string,\n  //format: string,\n  title: string,\n  track: string,\n  id: string\n}\n\nexport interface ArtistDetails extends Artist, GdEventsObject {\n  compositions: SongInfo[]\n}\n\nexport interface Artist extends GdObject {\n  musicbrainzId: string,\n  dbpediaId?: string,\n  instruments?: string[]\n}\n\nexport interface GdEventsObject extends GdObject {\n  eventIds: string[]\n}\n\nexport interface GdObject extends DbpediaObject {\n  id: string,\n  name: string\n}\n\nexport interface DbpediaObject {\n  image?: string,\n  thumbnail?: string,\n  comment?: string,\n  geoloc?: Geolocation\n}\n\nexport interface Geolocation {\n  lat: number,\n  long: number\n}\n\nexport interface Weather {\n  maxTemperature: number,\n  minTemperature: number,\n  precipitation: string,\n  wind: number,\n  windDirection: string,\n  windDirectionIcon: string,\n  condition: string,\n  conditionIcon: string\n}\n\nexport interface News {\n  source: string,\n  title: string,\n  date: string,\n  url: string\n}\n\nexport interface EtreeInfo {\n  tracks: string[],\n  id: string,\n  notes: string,\n  source: string,\n  lineage: string,\n  keywords: string[],\n}\n\nexport interface VenueDetails {\n  name: string,\n  id: string,\n  long: number,\n  lat: number,\n  shows: [],\n  georss: string\n}\n\nexport interface RecordingInfo {\n  date: string,\n  description: string,\n  etree_id: string,\n  lineage: string,\n  location_id: string,\n  location_name: string,\n  notes: string,\n  recording_id: string,\n  show_id: string,\n  source: string,\n  subject: string[],\n  venue_id: string,\n  venue_name: string\n}\n\nexport interface CommentPayload {\n  msgId: string,\n  userId?: number | string,\n  msg: string,\n  timestamp: string,\n  userName: string,\n  userImagePath?: string\n}","<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n<div *ngIf=\"title\" fxLayout=\"row\" fxLayout.xs=\"column\"\n    [style.background-color]=\"'#ededed'\" [style.background-size]=\"'cover'\"\n    [style.background-position]=\"'center'\" [style.padding]=\"'3px'\">\n  <div class=\"container\" fxLayout=\"column\" fxFlex=\"1 1 auto\">\n    <span>\n        <button mat-button [matMenuTriggerFor]=\"menu\"><img src=\"assets/gd_logo2.png\" height=\"25\"></button>        \n        <mat-menu #menu=\"matMenu\">\n          <!-- <button *ngFor=\"let v of views\" mat-menu-item [routerLink]=\"[v.url]\">{{v.name}}</button> -->\n          <button mat-menu-item routerLink=\"/mapselect\">Concert Map</button>\n          <button mat-menu-item routerLink=\"/profile\" *ngIf=\"userId\">Profile Page</button>\n          <button mat-menu-item (click)=\"auth.login()\" *ngIf=\"!userId\">Log In</button>\n          <button mat-menu-item (click)=\"logout()\" *ngIf=\"userId\">Log Out</button>\n          <!--button mat-menu-item (click)=\"auth.logout()\" *ngIf=\"userId\">Log Out</button-->\n          <button mat-menu-item routerLink=\"/about\">About</button>\n          <button mat-menu-item routerLink=\"/dataprivacy\">Privacy</button>\n        </mat-menu>\n    </span>\n  </div>\n\n\n  <div class=\"container hf1\" fxLayout=\"column\" fxFlex=\"1 1 auto\" [style.padding]=\"'4px'\">\n    <span>\n      {{ title }} {{ subtitle }}\n      <span *ngIf=\"!((router.url == '/about') || (router.url == '/mapselect') || (router.url == '/profile') || \n                      (router.url == '/dataprivacy') || (router.url.startsWith('/playlist')))\">\n        <button *ngIf=\"userId\" mat-icon-button color=\"\" (click)=\"onBookmarkButton()\">\n          <mat-icon>{{bookmarked ? 'bookmark' : 'bookmark_border'}}</mat-icon>\n        </button>\n\n      <!--span *ngIf=\"auth.loggedIn && !((router.url == '/about') || (router.url == '/mapselect') || (router.url == '/profile') || (router.url == '/dataprivacy'))\"-->\n        <button *ngIf=\"userId\" mat-icon-button color=\"\" (click)=\"onLikeButton()\">\n          <mat-icon>{{liked ? 'thumb_up_alt' : 'thumb_up_off_alt'}}</mat-icon>\n        </button>\n        <button *ngIf=\"!userId\" mat-icon-button color=\"\">\n          <mat-icon>thumb_up_off_alt</mat-icon>\n        </button>\n        {{likes}}\n      </span>\n\n\n    </span>\n    \n  </div>\n  <!--<div fxFlex=\"5 1 auto\"></div>-->\n  <ng-content></ng-content>\n\n  <p *ngIf=\"!searchState\" [style.margin-right]=\"'25px'\"></p>\n  <div *ngIf=\"searchState\" [style.margin-top]=\"'8px'\" [style.margin-right]=\"'5px'\"><mat-spinner diameter=\"20\"></mat-spinner></div>\n  <input [disabled]=\"searchState==1\" #searchfield placeholder=\"Search\" (keydown.enter)=\"onSubmit(searchfield.value)\">\n\n\n  \n \n\n</div>","import { Component, Input, ElementRef, AfterViewInit, ViewChild, Inject } from '@angular/core';\nimport { Title, DomSanitizer, SafeStyle } from '@angular/platform-browser';\n//import { VIEWS } from '../globals';\n//import * as Fuse from 'fuse.js';\nimport { MatDialog, MatDialogConfig } from \"@angular/material/dialog\";\nimport { SearchDialogComponent } from '../shared/search-dialog.component';\nimport { DataService } from '../services/data.service';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\nimport { PlayerService } from '../services/player.service';\n//import { CookieService } from 'ngx-cookie-service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n//declare var require: any;\n//const searchjson = require(\"../../assets/search.json\");\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.sass']\n})\nexport class HeaderComponent {\n  \n  \n  @Input() imageUrl: string;\n  @Input() title: string;\n  @Input() subtitle: string;\n  @Input() userId: string;\n  //@ViewChild('input') input: ElementRef;\n  protected image: SafeStyle;\n  //protected views = VIEWS;\n  //protected fuse: any;\n  protected result: any;\n  protected searchState: any;\n  //protected currentUser: any = { userName: '', userId:''};\n  protected bookmarked: boolean;\n  protected liked: boolean;\n  protected likes: number;\n  //protected number_liked: number;\n\n  \n  constructor(private sanitizer: DomSanitizer, private titleService: Title, private dialog: MatDialog, private data: DataService, \n    private router: Router, public auth: AuthService, private player: PlayerService) {\n\n      \n    }\n  \nngOnInit() {\n  this.titleService.setTitle('Grateful Live - '+this.title+', '+this.subtitle);\n\n  if (this.userId) {\n    gtag('set', {'user_id': this.userId});\n    if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n          { \n            this.checkBookmark();\n            this.checkLike()\n          };\n  }\n  \n  this.bookmarked = false;\n  this.liked = false;\n  this.searchState = 0;\n  this.image = this.sanitizer.bypassSecurityTrustStyle('url('+this.imageUrl+')');\n  \n  if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n    this.countLikes();\n  /*\n    if (this.auth.loggedIn) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n        if (!( (this.router.url == '/about') || (this.router.url == '/mapselect') || (this.router.url == '/profile') ))\n        { this.checkBookmark() };\n      });\n    }\n    */\n  }\n\n  //       else { this.player.removePlaylistFromStorage() }\n\n  logout(){\n    this.auth.logout();\n    this.player.removePlaylistFromStorage();\n  }\n\n  async onSubmit(e){\n    console.log(e);\n    this.searchState = 1;\n    var result = await this.data.getSearchResult(e);\n    if (result.length > 0){\n      this.openDialog(result, e)\n    }\n    this.searchState = 0;\n  }\n\n  openDialog(r, s) {\n    var dialogConfig = new MatDialogConfig();\n    dialogConfig.position = { right: '0', top: '0' };\n    dialogConfig.maxHeight = 400;\n    dialogConfig.data = {\n      id: 1,\n      result: r,\n      searchString: s\n     };\n    //dialogConfig.disableClose = true;\n    //dialogConfig.autoFocus = true;\n    this.dialog.open(SearchDialogComponent, dialogConfig);\n  }\n\n  async onBookmarkButton(){\n    if (this.bookmarked == false){\n      await this.data.addBookmark(this.userId, this.router.url, new Date().getTime(), this.title+' '+this.subtitle);\n    } else {\n      await this.data.delBookmark(this.userId, this.router.url);\n    }\n    this.checkBookmark();\n  }\n\n  async checkBookmark(){\n    var b = await this.data.checkBookmark(this.userId, this.router.url);\n    this.bookmarked = Boolean(JSON.parse(b));\n    console.log(\"bookmark: \"+this.bookmarked)\n  }\n\n  async onLikeButton(){\n    if (this.liked == false){\n      await this.data.like(this.userId, this.router.url, new Date().getTime(), this.title+' '+this.subtitle);\n    } else {\n      await this.data.unlike(this.userId, this.router.url);\n    }\n    this.checkLike();\n  }\n\n  async checkLike(){\n    var b = await this.data.checkLike(this.userId, this.router.url);\n    this.liked = Boolean(JSON.parse(b));\n    this.countLikes()\n    console.log(\"like: \"+this.liked)\n  }\n\n  async countLikes(){\n    this.likes  = await this.data.countLikes(this.router.url);\n    console.log(\"likes: \"+this.likes)\n  }\n\n}\n","<div mat-dialog-content>\n  <p>Save playlist</p>\n  <mat-form-field>\n    <mat-label>Enter name</mat-label>\n    <input matInput [(ngModel)]=\"data.input\" maxlength=\"50\">\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <!--button mat-button [mat-dialog-close]=\"data.input\" cdkFocusInitial>Ok</button-->\n  <button mat-button [disabled]=\"data.input.length == 0\" (click)=\"onOkClick(data.input)\">Ok</button> <!--cdkFocusInitial-->\n</div>\n\n\n<!--div mat-dialog-content>\n  <p class=\"mat-dialog-title\" >{{data.title}}</p>\n  <input matInput [(ngModel)]=\"data.input\">\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <button mat-button [mat-dialog-close]=\"data\" cdkFocusInitial>Ok</button>\n</div-->","import { Component, Inject } from '@angular/core';\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\n\n\nexport interface DialogData {\n  title: string,\n  options: string[],\n  input: string\n}\n\n@Component({\n  selector: 'input-dialog',\n  templateUrl: './input-dialog.component.html'\n})\nexport class InputDialogComponent {\n  constructor(private dialogRef: MatDialogRef<InputDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData) {}\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onOkClick(input: string): void {\n    this.dialogRef.close(input);\n  }\n}","<!--h1 mat-dialog-title>{{data.title}}</h1-->\n<div mat-dialog-content>\n  <p class=\"mat-dialog-title\" >{{data.title}}</p>\n  <button *ngFor=\"let i of data.items\" (click)=\"onItemClick(i)\"\n    [style.margin-bottom]=\"'5px'\">{{ i }}</button>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onCancelClick()\">Cancel</button>\n  <button mat-button [mat-dialog-close]=\"data\" cdkFocusInitial>Ok</button>\n</div>","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nexport interface DialogData {\n  title: string,\n  options: string[],\n  items: any\n}\n\n@Component({\n  selector: 'list-dialog',\n  templateUrl: './list-dialog.component.html'\n})\nexport class ListDialogComponent {\n  constructor(private dialogRef: MatDialogRef<ListDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData) {}\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onItemClick(item: string): void {\n    this.dialogRef.close(item);\n  }\n}","<div class=\"map\" leaflet [leafletOptions]=\"options\"></div>","import { Component, Input } from '@angular/core';\nimport { tileLayer, latLng, marker, icon, MapOptions } from 'leaflet';\n\n@Component({\n  selector: 'gd-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.sass']\n})\nexport class MapComponent {\n  \n  @Input() latitude: number;\n  @Input() longitude: number;\n  @Input() zoom: number;\n  public options: MapOptions;\n  \n  ngOnInit() {\n    this.options = {\n      layers: [\n        //tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n        tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p72bl/{z}/{x}/{y}.png',\n          { maxZoom: 17, attribution: '...' }),\n        marker([this.latitude, this.longitude], {\n          icon: icon({\n            iconSize: [ 25, 41 ],\n            iconAnchor: [ 13, 41 ],\n            iconUrl: 'assets/marker-icon-2x.png',\n            //shadowUrl: 'assets/marker-shadow.png'\n          })\n        })\n      ],\n      zoom: this.zoom,\n      center: latLng(this.latitude, this.longitude)\n    };\n  }\n\n}","<div fxLayout=\"column\" [style.height]=\"loaded && !minimized ? '120px' : '20px'\">\n  <img *ngIf=\"player.getCurrentTrack().waveform\" class=\"image\"\n    [lazyLoad]=\"player.getCurrentTrack().waveform\" [style.height]=\"'100px'\"\n    [class.flashy]=\"loaded\" (load)=\"loaded = true\" [hidden]=\"minimized\" class=\"waveform\">\n  <input type=\"range\" min=\"0\" max=\"{{player.maxTime}}\"\n    [(ngModel)]=\"player.currentTime\" (ngModelChange)=\"player.setTime($event)\"/>\n</div>\n<div fxLayout=\"row\" style=\"margin-top: 10px; margin-left: 3px; margin-right: 3px;\">\n  <button mat-flat-button fxFlex (click)=\"player.playPause()\"> \n    <mat-icon *ngIf=\"!player.paused\">pause</mat-icon>\n    <mat-icon *ngIf=\"player.paused\">play_arrow</mat-icon>\n  </button>\n  <!--button mat-flat-button fxFlex (click)=\"player.pause()\">\n    <mat-icon>pause</mat-icon></button-->\n  <button mat-flat-button fxFlex (click)=\"player.stop()\">\n    <mat-icon>stop</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.previousTrack()\">\n    <mat-icon>skip_previous</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.nextTrack()\">\n    <mat-icon>skip_next</mat-icon></button>\n  <button mat-flat-button fxFlex (click)=\"player.toggleMute()\">\n    <mat-icon>{{player.muted ? 'volume_up' : 'volume_off'}}</mat-icon></button>\n  <!-- <button mat-flat-button fxFlex (click)=\"addRandomTrack()\">\n    <mat-icon>playlist_add</mat-icon></button> -->\n  <button mat-flat-button fxFlex (click)=\"minimized = !minimized\">\n    <mat-icon>{{minimized ? 'visibility' : 'visibility_off'}}</mat-icon></button>\n  <mat-slider type=\"range\" min=\"0\" max=\"100\" value=\"100\" step=\"1\" (input)=\"volumeChange($event.value)\"></mat-slider>\n\n  <button *ngIf=\"currentUser.userId && (!player.playlists || player.playlists.length==0)\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    load\n  </button>\n  <button *ngIf=\"currentUser.userId && (!player.playlists || player.playlists.length>0)\"mat-flat-button fxFlex (click)=\"onLoadPlaylist()\">\n    load\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length==0\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    save\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length>0\" mat-flat-button fxFlex (click)=\"onSavePlaylist()\">\n    save\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length==0\" mat-flat-button disabled=true style=\"color: rgb(194, 192, 192)\" fxFlex>\n    clear\n  </button>\n  <button *ngIf=\"currentUser.userId && player.playlist.length>0\" mat-flat-button fxFlex (click)=\"onClearPlaylist()\">\n    clear\n  </button>\n\n</div>\n\n<div fxLayout=\"column\">\n\n  <div class=\"playlist\" *ngFor=\"let s of player.playlist; index as i\" [hidden]=\"minimized && s !== player.getCurrentTrack()\" style=\"text-align:left; margin-left: 3px;\">\n    <span [style.color]=\"s === player.getCurrentTrack() ? '#3d3d3d' : 'grey'\" (click)=\"player.skipToTrack(s)\">\n      {{s.track + '. ' + s.title + ' [' + s.etree_id + ']'}} \n    </span>\n    <span style=\"float:right; margin-right: 3px;\">\n      <button [matMenuTriggerFor]=\"menu\">>></button>        \n        <mat-menu #menu=\"matMenu\">\n          <button *ngIf=\"s.song_id\" (click)=\"router.navigate(['/song', s.song_id])\">song</button>\n          <button *ngIf=\"s.show_id\" (click)=\"router.navigate(['/show', s.show_id])\">show</button>\n          <button *ngIf=\"s.recording_id\" (click)=\"router.navigate(['/recording', s.recording_id])\">recording</button>\n        </mat-menu>\n        <button (click)=\"delTrack(i)\">X</button>\n    </span>\n  </div>\n\n</div>","import { Component } from '@angular/core';\nimport { PlayerService } from '../services/player.service';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\n// import { CookieService } from 'ngx-cookie-service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-player',\n  templateUrl: './player.component.html',\n  styleUrls: ['./player.component.sass']\n})\nexport class PlayerComponent {\n  public currentUser: any = { userName: '', userId: '' };\n  public loaded = false;\n  public minimized = false;\n  constructor(public player: PlayerService, private data: DataService, private dialog: DialogService, public auth: AuthService, \n              public router: Router) {} //, private cookieService: CookieService) {}\n  \n  ngOnInit() {\n    //if (!this.cookieService.get('auth0.is.authenticated')) { \n    //  this.player.removePlaylistFromStorage() ;\n    //};\n    \n    //if (this.currentUser.userId != '') gtag('set', {'user_id': this.currentUser.userId});\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n        this.player.getPlaylists(this.currentUser.userId);\n      }\n      if (!this.router.url.startsWith('/playlist')) {\n        this.player.loadPlaylistFromsStorage();\n      };\n      \n    });\n\n    \n    \n  }\n\n  async addRandomTrack() {\n    this.player.addToPlaylist(await this.data.getRandomTrack());\n  }\n\n  volumeChange(v){\n    this.player.volume(v);\n  }\n\n  async onClearPlaylist(){\n    this.player.stop();\n    this.player.clearPlaylist();\n    this.minimized = true;\n  }\n\n  async delTrack(i){\n    this.player.deleteFromPlaylist(i);\n  }\n\n  async onSavePlaylist() {\n    this.dialog.openInputDialog(name => {\n      if (name) { \n        this.savePlaylist(name);\n      }\n    });\n  }\n\n  async onLoadPlaylist() {\n    this.loadPlaylist()\n  }\n\n  async savePlaylist(name){\n    console.log('saving playlist');\n    const id = this.makeid();\n    await this.data.addPlaylist(name, this.player.playlist, id, this.currentUser.userId, new Date().getTime());\n    await this.player.getPlaylists(this.currentUser.userId);\n  }\n/*\n\nprotected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      this.song.name+\"', \"+event.venue+\", \"+event.date,\n      [\"Add to playlist\", \"Go to show\"],\n      [() => this.openRecordingsDialog(event),\n        () => this.router.navigate(['/show', event.id])]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openSingleFunction(\n      \"Recordings of '\"+this.song.name+\"', \"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      r => this.addRecordingToPlaylist(r, event)\n    );\n  }\n  */\n \n  private loadPlaylist() {\n    console.log('load playlist');\n    this.dialog.openMultiFunction(\n      'Your current playlist will be lost',\n      this.player.playlists.map(r => r.name),\n      this.player.playlists.map(r => () => {\n        this.player.playlist = [...r.playlist];\n        this.player.storePlaylist();\n      })\n    );\n    \n  }\n\n  private makeid() {\n    var result           = '';\n    var characters       = 'abcdef0123456789';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < 24; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n }\n}\n","<div class=\"left\">  <b>{{searchString}}</b></div>\n\n<div class=\"type\" *ngIf=\"result.song.length != 0\">Songs:</div>\n<div class=\"result\" *ngFor=\"let r of result.song, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/song', r[1]]\"> {{r[0]}}</span>\n</div>\n\n<div class=\"type\" *ngIf=\"result.venue.length != 0\">Venues:</div>\n<div class=\"result\" *ngFor=\"let r of result.venue, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/venue', r[1]]\"> {{r[0]}}</span>\n</div>\n\n<div class=\"type\" *ngIf=\"result.show.length != 0\">Shows:</div>\n<div class=\"result\" *ngFor=\"let r of result.show, let i = index\">\n  <span style=\"cursor:pointer\" [routerLink]=\"['/show', r[1]]\"> {{r[0]}}</span>\n</div>\n\n\n\n\n\n\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\nexport interface DialogData {\n  title: string,\n  options: string[]\n}\n\n@Component({\n  selector: 'search-dialog',\n  templateUrl: './search-dialog.component.html',\n  styleUrls: ['./search-dialog.component.sass']\n})\nexport class SearchDialogComponent {\n\n  result: any;\n  searchString: string;\n\n  constructor(private dialogRef: MatDialogRef<SearchDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data ) {\n      //this.result = data.result; //this.sortItems(data.result);\n      this.result = this.sortItems(data.result);\n      this.searchString = data.searchString;\n    }\n\n  onCancelClick(): void {\n    this.dialogRef.close();\n  }\n  \n  onItemClick(item: string): void {\n    this.dialogRef.close(item);\n  }\n\n  sortItems(r){\n    var s = { 'show': [], 'venue': [], 'song': [] };\n    r.forEach( i => {\n      s[i.type].push([i.title, i.uri])\n    })\n    Object.keys(s).forEach(k => {\n      s[k].sort();\n    })\n    console.log(s)\n    return s\n  }\n}","\n<p [style.margin-bottom]=\"'5px'\"></p>\n<share-buttons [theme]=\"'default'\"\n [include]=\"['facebook','twitter','pinterest','reddit','tumblr','mix','copy']\"\n [show]=\"7\"\n [size]=\"-4\"\n [title]=\"'Grateful Dead Concert Explorer'\"\n [tags]=\"'GratefulDeadExplorer,GratefulDead'\"\n></share-buttons>\n<p [style.margin-bottom]=\"'5px'\"></p>","import { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'gd-sharebuttons',\n  templateUrl: './sharebuttons.component.html',\n  styleUrls: ['sharebuttons.component.sass']\n})\nexport class ShareButtonsComponent {\n\n  \n  ngOnInit() {\n  }\n\n}","<style>\n.loader {\n  -webkit-animation: spin 1s linear infinite;\n          animation: spin 1s linear infinite;\n  border: 3px solid #ddd;\n  border-top: 3px solid #42a5f5;\n  border-radius: 50%;\n  height: 75px;\n  width: 75px;\n}\n\n@-webkit-keyframes spin {\n  to {\n    border-top-color: #ec407a;\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes spin {\n  to {\n    border-top-color: #ec407a;\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n\n}\n</style>\n\n<div *ngIf=\"!loaded\" class=\"wait\">\n  <div class=\"loader\"></div>\n</div>\n\n<div *ngIf=\"!loaded\" class=\"wait\"><img src=\"/assets/bearsanimated.webp\" width=\"160\"></div>\n<div *ngIf=\"!timeOut && !loaded\" class=\"wait\">connecting to database</div>\n<div *ngIf=\"timeOut && !loaded\" class=\"wait\">loading seems to take a while! retrying...</div>\n\n<div id=\"maploaded\" [style.visibility]=\"!loaded ? 'hidden' : 'visible' \">\n  <div class=\"center\">\n    <select [(ngModel)]=\"selectedTour\" (ngModelChange)=\"tourChanged($event)\">\n        <option *ngFor=\"let l of layerNames\" ngValue=\"{{l}}\"> {{l}}</option>\n    </select>\n  </div>\n  <div id=\"MapContainer\" \n    leaflet\n    [leafletOptions]=\"mapOptions\"\n    (leafletMapReady)=\"onMapReady($event)\">\n  </div>\n</div> \n\n\n","import { Component, Input } from '@angular/core';\nimport { VenueDetails } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n//import * as Fuse from 'fuse.js'; // imported in angular.json\nimport * as _ from 'lodash';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare const L: any;\nimport 'leaflet';\nimport '../../leaflet-fusesearch/src/leaflet.fusesearch.js'\nimport 'leaflet-polylinedecorator'\n\n\n@Component({\n  selector: 'gd-showmap',\n  templateUrl: './showmap.component.html',\n  styleUrls: ['./showmap.component.sass']\n})\n\n\nexport class ShowMapComponent {\n  @Input() zoom: number;\n  //@Input() venues: VenueDetails[];\n  protected venues: VenueDetails[];\n  public mapOptions: L.MapOptions;\n  protected map: L.Map;\n  protected selectLayers: {};\n  public layerNames: string[];\n  protected searchCtrl: any;\n  protected geoJsons: {};\n  protected currentLayer: string;\n  public selectedTour: string;\n  protected tourLine: any;\n  protected lineDecorator: any;\n  public loaded: boolean;\n  public timeOut: boolean;\n  \n\n  constructor(protected data: DataService, private sanitizer: DomSanitizer) {}\n\n\n  ngOnInit() {\n    this.loaded = false;\n    this.timeOut = false;\n    this.selectLayers = {};\n    this.layerNames = [];\n    this.geoJsons = {};\n      this.mapOptions = {\n        layers: [\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/villeda.c4c63d13/{z}/{x}/{y}.png',\n          //L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p4an0/{z}/{x}/{y}.png',\n          L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p72bl/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/smmaurer.k59p92aj/{z}/{x}/{y}.png',\n          //L.tileLayer('https://a.tiles.mapbox.com/v3/aj.03e9e12d/{z}/{x}/{y}.png',\n            { maxZoom: 18, attribution: '...' })],\n        zoom: this.zoom,\n        center: L.latLng(45, -70)\n      };\n  }\n\n\n  async onMapReady(map: L.Map) {\n    setTimeout(() => {\n      this.timeOut = true;\n    }, 35000);\n    //this.document.getElementById(\"maploaded\").style.visibility = \"hidden\";\n    this.map = map\n    let i = 0;\n    while (this.venues == undefined || this.venues.length == 0) {    // retry heroku fetch\n      console.log(\"retry \" + i);\n      this.venues = await this.data.getVenueCoordinates();\n      console.log(this.venues)\n      i++;\n    }\n    var tours = await this.data.getTourCoordinates();\n    console.log(tours)\n    var geoJsonData = this.getGeoJson(this.venues);\n    var tourGeoJsonData = this.getTourJson(tours);\n    var all = this.groupLayers(geoJsonData);\n    this.geoJsons['all shows'] = geoJsonData;\n    this.selectLayers['all shows'] = all;\n    this.layerNames.push('all shows')\n    this.selectLayers['all shows'].addTo(this.map)\n    this.currentLayer = 'all shows';\n\n    tourGeoJsonData.forEach(t =>{\n      this.selectLayers[t[0]] = this.groupLayers(t[1]);\n      this.geoJsons[t[0]] = t[1];\n      this.geoJsons[t[0]].sort(this.dateSort())\n      this.layerNames.push(t[0]); \n    })\n    this.searchCtrl = L.control.fuseSearch({'showResultFct': function(feature, container) {\n      var props = feature.properties;\n      if (props.dates != '') {    // workaround for result list after first click on search button\n        var name = L.DomUtil.create('span', null, container);\n        name.innerHTML = props.name;\n        //container.appendChild(L.DomUtil.create('br', null, container));\n        //container.appendChild(document.createTextNode(props.dates));\n    }\n  }})\n    this.searchCtrl.indexFeatures(geoJsonData, ['name', 'dates']); \n    this.searchCtrl.addTo(this.map);\n    this.searchCtrl.indexFeatures(this.geoJsons['all shows'], ['name', 'dates']); \n    this.selectedTour = 'all shows';\n    this.loaded = true;\n    this.fitZoom();\n   \n  }\n\n  \n  dateStrings(s) {\n    if (s != undefined){\n      var htmlstring = '<br>';\n      var datestring = '';\n      var dates = s.map(e => [e.date, e.id])\n      dates.sort()\n      dates.forEach(e => {\n        htmlstring += '<a style=\"color: black;\" href=\"/#/show/' + e[1] + '\">' + e[0] + '</a><br>' ; // removed #/ url\n        datestring += e[0] + ' '\n      });\n    return [datestring, htmlstring];\n  }}\n\n\n  onEachFeature(feature, layer) {\n    if (feature.properties && feature.properties.popupContent) {\n      layer.bindPopup(feature.properties.popupContent, { maxHeight: 160 });\n    }\n    feature.layer = layer;\n  }\n\n\n  getGeoJson(shows){\n    var geoJsonData = [];\n    var latlongs = [];\n\n    shows.forEach(v => {\n      if (v.long != undefined) {\n        var lat = parseFloat(v.lat);\n        var long = parseFloat(v.long);\n        while (this.searchForArray(latlongs,[lat, long]) != -1){  // prevent markers in same place\n          lat += 0.001;\n        }\n        latlongs.push([lat, long])   \n        var ds = this.dateStrings(v.shows);\n        var datestring = ds[0];\n        var venuehtml = ds[1];\n        if (v.georss == 'city'){ venuehtml += '(marker for city only)' };\n        var geojsonFeature = {\n          'type': 'Feature',\n          'properties': {\n            'name': v.name,\n            'dates': datestring,\n            'popupContent': '<b><a style=\"color: black;\" href=\"/venue/' + v.id + '\">' + v.name + '</a></b>' + venuehtml // removed #/ url\n          },\n          'geometry': {\n            'type': 'Point',\n            'coordinates': [lat, long]\n          } };\n          geoJsonData.push(geojsonFeature);\n      }});\n      return geoJsonData;\n  }\n\n groupLayers(g){\n    var l = [];\n    var myIcon = L.icon({\n      iconUrl: 'assets/dead_marker_small_shadow.png',\n      iconSize: [null, 35],\n      iconAnchor: [12, 34],\n      popupAnchor: [-3, -32],\n    });\n    g.forEach(v => {\n      var g = L.geoJSON(v, {\n        onEachFeature: this.onEachFeature,\n        pointToLayer: function (feature, latlng) {\n          return L.marker(latlng, {icon: myIcon, riseOnHover: true});\n        } })\n      l.push(g)\n    });\n    var lg = L.layerGroup(l);\n    return (lg)\n  }\n\n\n  getTourJson(t){\n    var tours = []\n    Object.keys(t).forEach(tour => {\n      var geoJsonData = [];\n      var latlongs = [];\n      Object.keys(t[tour]).forEach(venue => {\n        var venue_id = t[tour][venue].id;\n        var long = parseFloat(t[tour][venue].long);\n        var lat = parseFloat(t[tour][venue].lat);\n        while (this.searchForArray(latlongs,[lat, long]) != -1){  // prevent markers in same place\n          lat += 0.001;\n        }\n        latlongs.push([lat, long])     \n        var shows = []\n        t[tour][venue].shows.forEach(show => shows.push(show));\n        var ds = this.dateStrings(shows);\n        var datestring = ds[0];\n        var venuehtml = ds[1];\n        if (t[tour][venue].georss == 'city'){ venuehtml += '(marker for city only)' };   // todo: make work!\n        var geojsonFeature = {\n          'type': 'Feature',\n          'properties': {\n            'name': venue,\n            'tour': tour,\n            'dates': datestring,\n            'popupContent': '<b><a style=\"color: black; \"href=\"/venue/' + venue_id + '\">' + venue + '</a></b>' + venuehtml // removed #/ url\n          },\n          'geometry': {\n            'type': 'Point',\n            'coordinates': [lat, long]\n          } };\n        geoJsonData.push(geojsonFeature);\n      });\n     if (geoJsonData.length > 0) {\n        tours.push([tour, geoJsonData])\n      } });\n    return tours;\n  }\n\n\n  tourChanged(e){\n    if (this.tourLine != undefined) {this.map.removeLayer(this.tourLine) }\n    if (this.lineDecorator != undefined) {this.map.removeLayer(this.lineDecorator) }\n    this.map.removeLayer(this.selectLayers[this.currentLayer])\n    this.selectLayers[e].addTo(this.map)\n    this.searchCtrl.indexFeatures(this.geoJsons[e], ['name', 'dates']); \n    this.currentLayer = e;\n    if (e != 'all shows' && this.geoJsons[e].length > 1){\n      this.connectTheDots(this.geoJsons[e])\n    }\n    this.fitZoom();\n  }\n\n\n  fitZoom(){\n    var group = new L.featureGroup;\n    this.map.eachLayer(l => { if (l['feature'] != undefined){ group.addLayer(l) } });\n    this.map.fitBounds(group.getBounds());\n    if (this.map.getZoom() > 10) { this.map.setZoom(10) }\n  }\n\n\n  connectTheDots(e){\n    var c = [];\n    e.forEach( i => c.push(_.clone(i.geometry.coordinates).reverse()));\n    this.tourLine = L.polyline(c, {color: '#1D3A87', weight: 3}).addTo(this.map);\n    console.log(this.tourLine)\n    this.lineDecorator = L.polylineDecorator(this.tourLine, {\n    patterns: [\n      {offset: '0%', repeat: 40, symbol: L.Symbol.arrowHead(\n        {pixelSize: 9, polygon: false, pathOptions: {weight: 3, color: '#1D3A87', stroke: true}})\n      } ] }).addTo(this.map);\n}\n\n\n  dateSort() {\n    return function (a,b) {\n      var result = (a.properties.dates < b.properties.dates) ? -1 : (a.properties.dates > b.properties.dates) ? 1 : 0;\n      return result;\n    }\n}\n\n\n  searchForArray(haystack, needle){\n    var i, j, current;\n    for(i = 0; i < haystack.length; ++i){\n      if(needle.length === haystack[i].length){\n        current = haystack[i];\n        for(j = 0; j < needle.length && needle[j] === current[j]; ++j);\n        if(j === needle.length)\n          return i;\n      }\n  }\n  return -1;\n}\n\n}","<div fxLayout=\"column\" class=\"gd-container\">\n  <div *ngFor=\"let e of events\" fxLayout=\"row\" fxLayoutAlign=\" center\">\n    <img fxLayout=\"column\" class=\"image field\" fxFlex=\"1 1 15%\"\n      [style.width]=\"'80px'\" [style.height]=\"'60px'\"\n      [defaultImage]=\"'assets/gd_placeholder.png'\"\n      [lazyLoad]=\"e.artifacts[0] ? e.artifacts[0].thumbnail || e.artifacts[0].image: null\"\n      [style.object-fit]=\"'cover'\"\n      [routerLink]=\"['/show', e.id]\">\n      <div fxLayout=\"column\" fxFlex=\"1 1 10%\" fxLayoutAlign=\"center\"\n      [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n        {{ e.date }}\n      </div>\n      <div fxLayout=\"column\" fxFlex=\"1 1 25%\" fxLayoutAlign=\"center\"\n      [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n        {{ e.venue }} \n      </div>\n      <span class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.location }}\n    </span>\n    <button *ngIf=\"onOptions\" mat-icon-button fxLayout=\"column\" class=\"field\" fxFlex=\"1 1 10%\"\n      (click)=\"onOptions(e)\"><mat-icon>more_horiz</mat-icon>\n    </button>\n\n\n    <!--\n    <div fxLayout=\"column\" fxFlex=\"1 1 25%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.date }}\n    </div>\n    <div fxLayout=\"column\" fxFlex=\"1 1 30%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.venue }}\n    </div>\n    <div fxLayout=\"column\" fxFlex=\"1 1 20%\" fxLayoutAlign=\"center\"\n        [ngStyle.xs]=\"{'font-size': '80%'}\" class=\"field\"\n        [routerLink]=\"['/show', e.id]\">\n      {{ e.location }}\n    </div>\n    <button mat-icon-button fxLayout=\"column\" class=\"field\" fxFlex=\"1 1 10%\"\n      (click)=\"onOptions(e)\"><mat-icon>more_horiz</mat-icon>\n    </button>\n    -->\n  </div>\n</div>\n\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component, Input } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { DeadEventInfo } from '../services/types';\n\n@Component({\n  selector: 'gd-shows',\n  templateUrl: './shows.component.html',\n  styleUrls: ['./shows.component.sass']\n})\nexport class ShowsComponent {\n  @Input() eventIds: string[];\n  @Input() onOptions: (s: DeadEventInfo) => any;\n  public events: DeadEventInfo[];\n  \n  constructor(private data: DataService) {}\n  \n  async ngOnInit() {\n    this.events = await this.data.getEventInfos(this.eventIds);\n    //TODO add pagination?\n    //if (this.events) this.events = this.events.slice(0, 20);\n  }\n}\n","\n  <div fxLayout=\"row\" >\n      \n    <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center center\" [style.font-size]=\"'150%'\"[style.padding]=\"'4px'\">\n      <i class=\"wi wc {{ weather.conditionIcon }}\"></i>\n    </div>\n    <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center center\" [style.font-size]=\"'150%'\">\n      <i class=\"wi wc wpadleft {{ weather.windDirectionIcon }}\"></i>\n    </div>\n    <div fxLayout=\"column\" class=\"wf wc wpadleft wpadright\" fxFlex fxLayoutAlign=\"center center\" >\n        {{ weather.maxTemperature }}°F\n      </div>\n  </div>\n  <!--\n  <div fxLayout=\"column\" fxFlex fxLayoutAlign=\"center\" [style.padding-left]=\"'30px'\">\n    <span *ngIf=\"weather.condition\">\n      <b>{{ weather.condition }}</b>\n    </span>\n    max. temperature: {{ weather.maxTemperature }} °F<br>\n    precipitation: {{ weather.precipitation }} in<br>\n    wind: {{ weather.wind }} mph\n  </div>\n-->","import { Component, Input } from '@angular/core';\nimport { Weather } from '../services/types';\n\n@Component({\n  selector: 'gd-weather',\n  templateUrl: './weather.component.html',\n  styleUrls: ['./weather.component.sass']\n})\nexport class WeatherComponent {\n  @Input() weather: Weather;\n}\n","<youtube-player videoId=\"{{ videoId }}\" width=\"{{ width }}\"></youtube-player>\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  //template: '<youtube-player videoId=\"PRQCAL_RMVo\"></youtube-player>',\n  templateUrl: './youtube.component.html',\n  selector: 'gd-youtube',\n})\n\nexport class YoutubeComponent implements OnInit {\n  @Input() videoId: string;\n  @Input() width: string;\n\n  ngOnInit() {\n    //this.videoId = 'PRQCAL_RMVo';\n    // This code loads the IFrame Player API code asynchronously, according to the instructions at\n    // https://developers.google.com/youtube/iframe_api_reference#Getting_Started\n    const tag = document.createElement('script');\n\n    tag.src = \"https://www.youtube.com/iframe_api\";\n    document.body.appendChild(tag);\n  }\n}\n","<div *ngIf=\"artifacts\" fxLayout=\"column\">\n  <gd-header *ngIf=\"artifacts\" title='Artifacts'\n    [subtitle]='types' imageUrl=\"{{ artifacts[0] }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div *ngIf=\"artifacts.length\" class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\">\n    <div *ngFor=\"let a of artifacts\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"33\" fxFlex.xs=\"100\">\n      <img class=\"image\" [src]=\"a.thumbnail || a.image\" [style.object-fit]=\"'cover'\" [style.width]=\"'100%'\">\n      {{a.description}}<br>\n      {{a.eventInfo}}<br>\n      {{a.type}} in {{a.collection}} collection\n    </div>\n  </div>\n</div>","import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Artifact, ArtifactType } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-artifacts',\n  templateUrl: './artifacts.component.html'\n})\nexport class ArtifactsComponent {\n  \n  public artifacts: Artifact[];\n  protected types: ArtifactType[];\n  protected currentUser: any = { userName: '', userId:''};\n  \n  constructor(protected data: DataService, private route: ActivatedRoute, public auth: AuthService) {\n\n   \n  }\n  \n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n      \n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        //show fullscreen artifact\n      } else if (params.has('types')) {\n        this.types = JSON.parse(params.get('types'));\n        this.artifacts = await this.data.getRandomArtifacts(this.types, 6);\n      } else {\n        this.artifacts = await this.data.getRandomArtifacts(null, 6);\n        console.log(this.artifacts)\n      }\n    });\n  }\n}\n","<div *ngIf=\"artist\" fxLayout=\"column\">\n  <gd-header *ngIf=\"artist\" title=\"{{ artist.name }}\"\n    subtitle=\"{{ artist.instruments.join(', ').split('_').join(' ') }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  \n  <div class=\"gd-container\" fxLayout=\"row\" fxLayout.xs=\"column\">\n    <img *ngIf=\"artist.thumbnail\" class=\"image gd-container\"\n      [defaultImage]=\"'assets/gd_placeholder.png'\"\n      [lazyLoad]=\"artist.thumbnail\" [style.object-fit]=\"'contain'\"\n      fxFlex=\"50\">\n    <div class=\"gd-container\" fxFlex=\"50\">\n      {{ artist.comment }}\n    </div>\n  </div>\n  \n  <p class=\"gd-section\">Songs composed by {{artist.name}}:</p>\n  \n  <div class=\"gd-container\" fxLayout=\"column\">\n    <div class=\"gd-container\" fxLayout=\"column\">\n      <div *ngFor=\"let song of artist.compositions\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n        <span [routerLink]=\"['/song', song.id]\">{{ song.name }}</span>\n        <!--button mat-icon-button (click)=\"openSongOptionsDialog(song)\">\n          <mat-icon>more_horiz</mat-icon>\n        </button-->\n      </div>\n    </div>\n  </div>\n  \n  <p *ngIf=\"artist.eventIds.length\" class=\"gd-section\">{{artist.name}} played with the Dead on:</p>\n  \n  <gd-shows [eventIds]=\"artist.eventIds\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"artist.name+', '+artist.instruments.join(', ').split('_').join(' ')\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ArtistDetails } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { AuthService } from '../auth.service';\nimport { APIResolver } from '../auth.resolve';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-artist',\n  templateUrl: './artist.component.html',\n})\nexport class ArtistComponent {\n  \n  public artist: ArtistDetails;\n  public currentUser: any = { userName: '', userId: ''};\n\n  constructor(private data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, public resolve: APIResolver) {\n\n      \n    }\n\n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.artist = await this.data.getArtistDetails(params.get('id'));\n        console.log(this.artist);\n      }\n    });\n    /* // not working\n    if (!this.artist) {\n      this.router.navigate(['/artist', (await this.data.getRandomArtistId())],\n        { replaceUrl: true });\n    }\n    */\n  }\n\n}\n","<div *ngIf=\"location\" fxLayout=\"column\">\n  <gd-header *ngIf=\"location\" title='{{ location.name }}'\n    subtitle='{{ location.state }}' imageUrl=\"{{ location.image }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div class=\"container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxFlex=\"100\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <p *ngIf=\"data.event\">The Band played on {{ data.event.date }}</p>\n      <p>{{ location.comment }}</p>\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <img class=\"image\" [defaultImage]=\"'assets/gd_placeholder.png'\" [lazyLoad]=\"location.thumbnail\" fxFlex=\"1 1 auto\">\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 100%\">\n      <gd-map fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"15\"\n        latitude=\"{{ location.geoloc.lat }}\" longitude=\"{{ location.geoloc.long }}\"></gd-map>\n    </div>\n  </div>\n\n  \n  <div *ngIf=\"videos\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <gd-youtube videoId=\"{{ currentVideoId }}\" width=\"100%\"></gd-youtube>\n      <ng-select bindLabel=\"title\"\n                 [clearable]=\"false\"\n                 (change)=\"selectVideo()\"\n                 [searchable]=\"false\"\n                 [(ngModel)]=\"currentVideoId\">         \n        <ng-option [value]=\"v.videoId\" *ngFor=\"let v of videos\">\n            <img src=\"{{v.thumbnail}}\" height=\"40px\"/>\n            {{v.title}}\n        </ng-option>\n      </ng-select>\n    </div>\n  </div>\n\n  \n  <p class=\"gd-section\">All shows in {{ location.name }}:</p>\n  \n  <gd-shows [eventIds]=\"location.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"location.name+', '+location.state\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Location } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DeadEventInfo } from '../services/types';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-location',\n  templateUrl: './location.component.html'//,\n  //styleUrls: ['./location.component.sass']\n})\nexport class LocationComponent {\n  public location: Location;\n  public currentUser: any = { userName: '', userId:'' };\n  public videos: any;\n  public currentVideoId: string;\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, private dialog: DialogService) {\n\n      \n\n    }\n\n    ngOnInit() {\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n      /*\n      if (this.route.snapshot.data['loggedIn']) {\n        this.auth.userProfile$.subscribe(userProfile => {\n          this.currentUser = this.resolve.getUser(userProfile);\n        });\n        console.log(this.currentUser);\n      } */\n   \n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.location = await this.data.getLocation(params.get('id'));\n        if (this.location.state) {\n          this.videos = await this.data.getYoutubeList(this.location.id, ['Grateful Dead', this.location.name]);\n          this.currentVideoId = this.videos[0].videoId;\n          console.log(this.videos);\n        }\n      }\n      if (!this.location) {\n        this.router.navigate(['/location',\n          (await this.data.getRandomLocation()).id], { replaceUrl: true });\n      }\n    });\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      event.venue+\", \"+event.date,\n      [\"Go to show\", \"Go to recording\"],\n      [() => this.router.navigate(['/show', event.id]),\n        () => this.openRecordingsDialog(event)]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.router.navigate(['/recording', r.id]) )\n    );\n  }\n\n  selectVideo(){\n    console.log(this.currentVideoId);\n  }\n\n}\n","\n<div fxLayout=\"column\">\n\n<!-- \n<div *ngIf=\"venues\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 100%\" fxFlex.sm=\"1 1 100%\"> \n  <gd-showmap [venues]=\"venues\" fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"2.5\"></gd-showmap>\n</div>\n-->\n<gd-header title='Map' subtitle=\"Selector\" userId='{{ currentUser.userId }}'></gd-header>\n \n<div class=\"gd-container\" fxLayout=\"row\" fxFlex=\"1 1 100%\" fxFlex.sm=\"1 1 100%\"> \n    <gd-showmap style=\"z-index:0;\" fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"2.5\"></gd-showmap>\n  </div>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>","import { Component } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { VenueDetails } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-mapselect',\n  templateUrl: './mapselect.component.html',\n  //styleUrls: ['./mapselect.component.sass']\n})\n\nexport class MapSelectComponent {\n  public currentUser: any = { userName: '', userId:'' };\n  protected venues: VenueDetails[];\n  protected test: number;\n\n  constructor(private data: DataService, private sanitizer: DomSanitizer,\n  public auth: AuthService) {\n\n    \n\n  }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n\n    //this.venues = await this.data.getVenueCoordinates();\n    //console.log(this.venues);\n\n\n\n\n  }\n\n\n\n}\n","<div *ngIf=\"playlist\" fxLayout=\"column\">\n  <gd-header title='Playlist '\n    subtitle=' – \"{{ playlist.name }}\"' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n  <div><br></div>\n    the playlist \"{{ playlist.name }}\" has been loaded in the audio player:\n    <div><br></div>\n    <div *ngFor=\"let t of playlist.playlist; index as i\">\n        <small>{{i+1}}. {{ t.title }}</small>\n    </div>\n\n\n</div>","import { Component } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { PlayerService } from '../services/player.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-playlist',\n  templateUrl: './playlist.component.html'\n})\nexport class PlaylistComponent {\n\n  public currentUser: any = { userName: '', userId:'' };\n  public playlist: any;\n  public shareUsername: string;\n  protected playlistId: string;\n\n  constructor(private data: DataService,  private router: Router, private route: ActivatedRoute,\n    private player: PlayerService, public auth: AuthService) {}\n\n    async ngOnInit() {\n\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n\n      this.route.paramMap.subscribe(async params => {\n        if (params.has('id')) {\n          this.getPlaylist(params.get('id'));\n        }\n      });\n\n    }\n\n    async getPlaylist(playlistId){\n      //playlistId = '6181aba048dc0b94d09e8664';\n      const res = await this.data.getPlaylist(playlistId);\n      this.playlist = res.playlists[0];\n      console.log(this.playlist);\n      this.player.playlist = [...this.playlist.playlist];\n      this.player.storePlaylist();\n    }\n  }","<!--div *ngIf=\"recording && event\" fxLayout=\"column\">\n  <gd-header *ngIf=\"recording && event\" title='{{ recording.etreeId }}'\n    subtitle='{{ event.location }}'>\n  </gd-header>\n\n  <div *ngIf=\"recording\" class=\"gd-container\" fxLayout=\"column\" class=\"topmargin\" >\n    <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n      <ng-container *ngIf=\"event\">\n        Recorded at: {{ event.venue }}, {{ event.location }}, {{ event.state }}, {{ event.date }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.lineage\">\n        Lineage: {{ recording.info.lineage }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.source\">\n        Source: {{ recording.info.source }}<br></ng-container>\n      <ng-container *ngIf=\"recording.info.notes\">\n        Notes: {{ recording.info.notes }}<br/></ng-container>\n      <ng-container *ngIf=\"recording.info.keywords\">\n        Notes: {{ recording.info.keywords }}<br/></ng-container>\n      <br>\n      <ng-container *ngIf=\"recording.tracks\">\n        Tracks:\n        <div *ngFor=\"let t of recording.tracks\">\n          <span [routerLink]=\"['/song', t.id]\"> {{ t.track }}: {{ t.title }}</span>\n          <button mat-icon-button (click)=\"openTrackOptionsDialog(t)\">\n            <mat-icon>more_horiz</mat-icon>\n          </button>\n        </div><br/>\n      </ng-container-->\n\n<div *ngIf=\"recordinginfo\" fxLayout=\"column\">\n  <gd-header title='{{ recordinginfo.etree_id }}'\n    subtitle=' – {{ recordinginfo.location_name }}' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n      <div class=\"gd-container\" fxLayout=\"column\" class=\"topmargin\" >\n        <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n          <ng-container>\n            <i>Recorded at:</i> \n            <span class=\"link\" [routerLink]=\"['/venue', recordinginfo.venue_id]\">{{ recordinginfo.venue_name }}, </span>\n            <span class=\"link\" [routerLink]=\"['/location', recordinginfo.location_id]\">{{ recordinginfo.location_name }}, </span>\n            <span class=\"link\" [routerLink]=\"['/show', recordinginfo.show_id]\">{{ recordinginfo.date }} </span>\n          </ng-container><div><br></div>\n\n          <ng-container *ngIf=\"recordinginfo.lineage\">\n            <i>Lineage:</i> {{ recordinginfo.lineage }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.source\">\n            <i>Source:</i> {{ recordinginfo.source }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.notes\">\n            <i>Notes:</i> {{ recordinginfo.notes }}<div><br></div></ng-container>\n          <ng-container *ngIf=\"recordinginfo.subject\">\n            <i>Subject:</i> {{ _array.isArray(recordinginfo.subject) ? recordinginfo.subject.join(', ') : recordinginfo.subject }}</ng-container><div><br></div>\n          <ng-container *ngIf=\"tracklist\">\n            Tracks:\n            <div *ngFor=\"let t of tracklist\">\n              <span> {{ t.track }}: {{ t.title }}</span>\n              <button mat-icon-button (click)=\"openTrackOptionsDialog(t)\">\n                <mat-icon>more_horiz</mat-icon>\n              </button>\n            </div>\n            <span class=\"link\" (click)=\"addAllToPlaylist()\">add all to playlist</span>\n          </ng-container><div><br></div>\n          \n\n     <a href=\"{{ 'https://archive.org/details/' + recordinginfo.etree_id }}\" target=\"_blank\">  <img src=\"https://archive.org/images/glogo.png\" [style.object-fit]=\"'contain'\"></a>\n     \n    </div>\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"recordinginfo.etree_id+', '+recordinginfo.location_name\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { RecordingDetails, DeadEventInfo, AudioTrack, RecordingInfo, Recording } from '../services/types';\nimport { PlayerService } from '../services/player.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-recording',\n  templateUrl: './recording.component.html'\n})\nexport class RecordingComponent {\n  protected recording: RecordingDetails;\n  protected event: DeadEventInfo;\n  public currentUser: any = { userName: '', userId: ''};\n  protected tracklist: any[];\n  public recordinginfo: RecordingInfo;\n  protected _array = Array;\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, private dialog: DialogService,\n    private player: PlayerService, public auth: AuthService) {\n\n      \n\n    }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        //this.recording = await this.data.getRecording(params.get('id'));\n        //this.event = await this.data.getEventInfoForRecording(this.recording.id);\n\n        //const rec_id = params.get('id');\n        this.recordinginfo = await this.data.getRecordingInfo(params.get('id'));\n        var tracklist = await this.data.getTracklist(params.get('id'));\n        tracklist.forEach(t =>{  // format to Audiotrack, take first song_id for now\n          if (t.song) {\n            t['id'] = t.song[0].song_id;\n            delete t.song;\n          }\n          t.track = t.track.toString();\n        })\n        this.tracklist = tracklist;\n        //console.log(this.recordinginfo)\n        //console.log(this.tracklist);\n      }\n\n      /*\n      if (!this.recording) {\n        this.router.navigate(['/recording', (await this.data.getRandomRecording()).id],\n          { replaceUrl: true });\n      } */\n    });\n  }\n  \n  protected openTrackOptionsDialog(audio: AudioTrack) {    \n    if (audio.id) {\n      this.dialog.openMultiFunction(\n        audio.track + \" \" + audio.title,\n        [\"add to playlist\", \"go to song\"], [() => this.addTrackToPlaylist(audio), \n          () => this.router.navigate(['/song', audio.id])]);\n    }\n    else {\n      this.dialog.openMultiFunction(\n        audio.track + \" \" + audio.title,\n        [\"add to playlist\"], [() => this.addTrackToPlaylist(audio)]);\n    }\n  }\n  \n  \n  /*\n  private async addTrackToPlaylist(audio: AudioTrack) {\n    console.log(audio.id)\n    const info = await this.data.getEventInfo(this.event.id);\n    const track = await this.data.getTrackFromAudio(audio, info, this.recording.etreeId);\n    if (track) this.player.addToPlaylist(track);\n  }\n  */\n\n  private async addTrackToPlaylist(audio: AudioTrack) {\n    const track = this.data.toPlayerTrack(this.recordinginfo.venue_name, \n                                          this.recordinginfo.location_name, \n                                          this.recordinginfo.date, \n                                          this.recordinginfo.show_id,\n                                          this.recordinginfo.etree_id,\n                                          audio,\n                                          this.recordinginfo.recording_id);\n                                          \n    this.player.addToPlaylist(track);\n  }\n\n\n  public addAllToPlaylist() {\n    if (this.tracklist) this.tracklist.forEach(t => this.addTrackToPlaylist(t));\n  }\n\n}\n","<div *ngIf=\"event\" fxLayout=\"column\">\n  <gd-header style=\"position: fixed; width: 100%\" *ngIf=\"event\" title='{{event.location.name}}, {{event.location.state}}' subtitle='{{formatDate}}'\n    imageUrl=\"{{eventImage}}\" userId='{{ currentUser.userId }}'>\n    <gd-weather [weather]=\"event.weather\"></gd-weather>\n  </gd-header>\n  <div class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" class=\"topmargin\" >\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\" [routerLink]=\"['/location', event.location.id]\">\n      <h2 class=\"titlef\">Location: <span class=\"normweight\">{{ event.location.name }}</span></h2>\n      <img class=\"image\" *ngIf=\"event.location.thumbnail\" [lazyLoad]=\"event.location.thumbnail\" fxFlex=\"1 1 auto\"  [style.object-fit]=\"'contain'\">\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\" [routerLink]=\"['/venue', event.venue.id]\">\n      <h2 class=\"titlef\">Venue: <span class=\"normweight\">{{ event.venue.name }}</span></h2>\n      <img class=\"image\" *ngIf=\"event.venue.thumbnail\" [lazyLoad]=\"event.venue.thumbnail\" fxFlex=\"1 1 auto\"  [style.object-fit]=\"'contain'\">\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n        <h2 class=\"titlef\">Setlist </h2>\n      <div fxLayout=\"column\" *ngFor=\"let set of event.setlist\">\n        <h3>{{ set.name }}</h3>\n        <!-- <div *ngFor=\"let song of set.songs\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\"> -->\n        <div *ngFor=\"let song of set.songs, let i = index\" fxLayout=\"row\">\n          <span [routerLink]=\"['/song', song.id]\">{{( \"0\"+(i+1)).slice(-2) }} {{ song.name }}</span>\n          <button mat-icon-button (click)=\"openSongOptionsDialog(song, set.name, i+1)\">\n            <mat-icon>more_horiz</mat-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <h2 class=\"titlef\">Lineup</h2>\n        <div *ngFor=\"let p of event.performers\" [routerLink]=\"['/artist', p.id]\"> \n          <img class=\"image\" [lazyLoad]=\"p.thumbnail\"\n          [style.width]=\"'70px'\" [style.height]=\"'70px'\"> \n          <span>&nbsp;&nbsp;&nbsp;&nbsp;{{ p.name }} ({{ p.instruments.join(', ') }})</span>\n        </div>\n \n    <!--div fxLayout=\"column\" fxFlex=\"1 1 auto\">\n      <iframe [src]=\"recordingUrls[0]\" [style.min-width]=\"'350px'\" [style.height]=\"'100%'\" frameborder=\"0\"></iframe>\n    </div-->\n    \n  </div>\n  \n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"titlef\">News of the week</h2>\n    <div *ngFor=\"let n of event.news\">\n      <a [href]=\"n.url\" target=\"_blank\" [style.text-decoration]=\"'none'\">\n        {{ n.date+\": \"+n.title+\" (\"+n.source+\")\" }}\n      </a>\n    </div>\n  </div>\n  \n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"titlef\">Available recordings</h2>\n    <div *ngFor=\"let r of event.recordings\">\n      <span [routerLink]=\"['/recording', r.id]\">{{ r.etreeId }}</span>\n      <button mat-icon-button (click)=\"openRecordingOptionsDialog(r)\">\n        <mat-icon>more_horiz</mat-icon>\n      </button>\n    </div>\n  </div>\n  \n\n    <!-- \n  <h2 *ngIf=\"photos.length\" class=\"gd-section\"><span class=\"titlef\">Photos from the show</span></h2>\n  \n  <div *ngIf=\"photos.length\" class=\"gd-container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\">\n    <div *ngFor=\"let s of photos\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"33\" fxFlex.xs=\"100\">\n      <img style=\"max-width: 200px;\" class=\"image\" [lazyLoad]=\"s\" [style.object-fit]=\"'contain'\">\n    </div>\n  </div>\n-->\n  \n<div *ngIf=\"photos.length>0\">\n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"gd-section\"><span class=\"titlef\">Photos</span></h2>\n    <div id=\"galleryContainer\">\n      <div style=\"width: 100%;\"\n        ng2-carouselamos\n        class=\"slides-wrapper\"\n        [items]=\"photos\"\n        [width] = auto\n        [$prev]=\"prev\"\n        [$next]=\"next\"\n        [$item]=\"item\"\n      >\n      </div>\n\n      <ng-template #prev>\n        <img style=\"cursor: pointer;\" *ngIf=\"photos.length>1\" src=\"assets/arrow_left.png\" id=\"left\" height=\"30\" />\n      </ng-template>\n      <ng-template #next>\n        <img style=\"cursor: pointer;\" *ngIf=\"photos.length>1\" src=\"assets/arrow_right.png\" id=\"right\" height=\"30\"/>\n      </ng-template>\n      <ng-template #item let-item let-i=\"index\">\n\n      <div class=\"slide-items\">\n        <img src=\"{{ item.thumbnail }}\" (click)=\"onClickPhoto(item)\" height=\"200px\" width=\"auto\">\n        <!--div>{{ item.description }}</div>\n        <u><a href=\"{{ item.source }}\" target=\"_blank\">({{ item.collection }})</a></u-->\n      </div>\n    </ng-template>\n    </div>\n    <div *ngIf=\"currentPhoto\" class=\"photo-text\">\n      <span *ngIf=\"currentPhoto.description\">{{ currentPhoto.description }} <br> </span>\n      <a *ngIf=\"currentPhoto.collection=='GDAO'\" href=\"{{ currentPhoto.source }}\" target=\"_blank\">\n        <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" height=\"50px\" width=\"auto\">\n      </a>\n      <a *ngIf=\"currentPhoto.collection=='Psilo'\" href=\"http://www.psilo.com/dead/\" target=\"_blank\">\n        <img src=\"http://www.psilo.com/dead/images/logo_psilo.jpg\" height=\"50px\" width=\"auto\">\n      </a>\n    </div>\n  </div>\n\n  \n  <!--div *ngIf=\"currentPhoto\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <p [style.margin-bottom]=\"'25px'\"></p>\n    <img class=\"current-photo\" src=\"{{ currentPhoto.image }}\" (click)=\"lightbox.openLightboxArray(photosLightbox, currentPhoto.index)\"> \n  </div-->\n</div>\n\n\n<div *ngIf=\"artifacts.length>0\">\n  <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <h2 class=\"gd-section\"><span class=\"titlef\">Other Artifacts</span></h2>\n    <div id=\"galleryContainer\">\n      <div style=\"width: 100%;\"\n        ng2-carouselamos\n        class=\"slides-wrapper\"\n        [items]=\"artifacts\"\n        [width] = auto\n        [$prev]=\"prev\"\n        [$next]=\"next\"\n        [$item]=\"item\"\n      >\n      </div>\n\n      <ng-template #prev>\n        <img style=\"cursor: pointer;\" *ngIf=\"artifacts.length>1\" src=\"assets/arrow_left.png\" id=\"left\" height=\"30\" />\n      </ng-template>\n      <ng-template #next>\n        <img style=\"cursor: pointer;\" *ngIf=\"artifacts.length>1\" src=\"assets/arrow_right.png\" id=\"right\" height=\"30\"/>\n      </ng-template>\n      <ng-template #item let-item let-i=\"index\">\n\n      <div class=\"slide-items\">\n        <img src=\"{{ item.thumbnail }}\" (click)=\"onClickArtifact(item)\" height=\"200px\" width=\"auto\">\n        <!--div>{{ item.description }}</div>\n        <u><a href=\"{{ item.source }}\" target=\"_blank\">({{ item.collection }})</a></u-->\n      </div>\n    </ng-template>\n    </div>\n    <div *ngIf=\"currentArtifact\" class=\"photo-text\">\n      {{ currentArtifact.type }} <br>\n      <span *ngIf=\"currentArtifact.description\">{{ currentArtifact.description }} <br> </span>\n      <a *ngIf=\"currentArtifact.collection=='GDAO'\" href=\"{{ currentArtifact.source }}\" target=\"_blank\">\n        <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" height=\"50px\" width=\"auto\">\n      </a>\n      <a *ngIf=\"currentArtifact.collection=='Psilo'\" href=\"http://www.psilo.com/dead/\" target=\"_blank\">\n        <img src=\"http://www.psilo.com/dead/images/logo_psilo.jpg\" height=\"50px\" width=\"auto\">\n      </a>\n    </div>\n  </div>\n\n  <!--div *ngIf=\"currentArtifact\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n    <p [style.margin-bottom]=\"'25px'\"></p>\n    <img class=\"current-photo\" src=\"{{ currentArtifact.image }}\" (click)=\"lightbox.openLightboxArray(artifactsLightbox, currentArtifact.index)\"> \n  </div-->\n</div>\n\n\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"event.location.name+', '+event.location.state+' – '+event.date\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component, ChangeDetectorRef } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { DeadEventDetails, Artifact, SongInfo, ArtifactType, Recording, AudioTrack } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\nimport { PlayerService } from '../services/player.service';\nimport { AuthService } from '../auth.service';\nimport { LightboxService } from '../services/lightbox.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-show',\n  templateUrl: './show.component.html',\n  styleUrls:['./show.component.sass']\n})\nexport class ShowComponent {\n  \n  public event: DeadEventDetails;\n  protected recordingUrls: SafeStyle[];\n  //protected photos: string[];\n  protected photos: Artifact[];\n  protected artifacts: Artifact[];\n  protected eventImage: string;\n  public currentUser: any = { userName: '', userId:'' };\n  protected formatDate: string;\n  public currentPhoto: Artifact;\n  public photosLightbox: any;\n  public currentArtifact: Artifact;\n  public artifactsLightbox: any;\n  \n  constructor(private data: DataService, private sanitizer: DomSanitizer,\n    private router: Router, private route: ActivatedRoute,\n    private dialog: DialogService, private player: PlayerService, public auth: AuthService, \n    private changeDetectorRef: ChangeDetectorRef, private lightbox: LightboxService) {\n\n    }\n\n    async ngOnInit() {\n      this.auth.userProfile$.subscribe(userProfile => {\n        if (userProfile){\n          this.currentUser = {\n            userId: userProfile.sub.split(\"|\")[1],\n            userName: userProfile['http://example.com/username']\n          }\n          gtag('set', {'user_id': this.currentUser.userId});\n        }\n      });\n\n      /*\n      this.currentUser = { userName: '', userId: ''}\n      if (this.route.snapshot.data['loggedIn']) {\n        this.auth.userProfile$.subscribe(userProfile => {\n          this.currentUser = this.resolve.getUser(userProfile);\n        });\n        console.log(this.currentUser);\n      }*/\n      \n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.event = await this.data.getEventDetails(params.get('id'));\n        this.event.date = this.event.date;\n        this.formatDate = this.data.formatDate(this.event.date);\n\n        this.recordingUrls = this.event.recordings.map(r => \n          this.sanitizer.bypassSecurityTrustResourceUrl(\"https://archive.org/embed/\"+r.etreeId+\"&playlist=1\")\n        );\n        console.log(this.event)\n        this.photos = this.event.artifacts\n          .filter(a => a.type === ArtifactType.Photo)//.map(a => a.image);\n        this.artifacts = this.event.artifacts.filter(a => a.type !== ArtifactType.Photo);\n        const poster = this.event.artifacts.filter(a => a.type == ArtifactType.Poster)[0];\n        const pass = this.event.artifacts.filter(a => a.type == ArtifactType.Pass)[0];\n        const ticket = this.event.artifacts.filter(a => a.type == ArtifactType.Ticket)[0];\n        this.eventImage = this.photos.length ? this.photos[0].image\n          : poster ? poster.image : pass ? pass.image : ticket ? ticket.image\n          : this.event.location.thumbnail;\n        var gl;\n        if (this.photos.length>0) {\n          gl = this.lightbox.makeGallery(this.photos);\n          this.photosLightbox = gl[0];\n          this.photos = gl[1];\n          this.currentPhoto = this.photos[0];\n        } \n        if (this.artifacts.length) {\n          gl = this.lightbox.makeGallery(this.artifacts);\n          this.artifactsLightbox = gl[0];\n          this.artifacts = gl[1];\n          this.currentArtifact = this.artifacts[0];\n          console.log(this.currentArtifact);\n        }\n        this.changeDetectorRef.detectChanges();\n\n\n      } else {\n        this.router.navigate(['/show', await this.data.getRandomEventId()],\n          { replaceUrl: true });\n      }\n      \n    });\n  }\n\n  /*\n  protected openSongOptionsDialog(song: SongInfo, set: string, idx: number) {\n    this.dialog.openMultiFunction(\n      //song.name+\"', \"+this.event.venue.name+\", \"+this.event.date,\n      set + \"/Track \" + idx + \": \" + '\"'+song.name+'\"',\n      [\"add to playlist\", \"go to song\"],\n      [() => this.addSongToPlaylist(song),\n        () => this.router.navigate(['/song', song.id])]\n    );\n  }\n*/\n\n  protected openSongOptionsDialog(song: SongInfo, set: string, idx: number) {\n    this.dialog.openMultiFunction(\n      //song.name+\"', \"+this.event.venue.name+\", \"+this.event.date,\n      set + \"/Track \" + idx + \": \" + '\"'+song.name+'\"',\n      [\"add to playlist\", \"go to song\"],\n      [() => this.openRecordingsDialog(song),\n        () => this.router.navigate(['/song', song.id])]\n    );\n  }\n\n\n  private openRecordingsDialog(song: SongInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+song.name+\"', \"+this.event.venue+\", \"+this.event.date,\n      this.event.recordings.map(r => r.etreeId),\n      this.event.recordings.map(r => () => this.addTrackToPlaylist(song, r.etreeId, r.id))\n    );\n  }\n\n  \n  protected openRecordingOptionsDialog(recording: Recording) {\n    this.dialog.openMultiFunction(\n      \"Recording \"+recording.etreeId,\n      [\"add all to playlist\", \"go to recording\"],\n      [() => this.addRecordingToPlaylist(recording),\n        () => this.router.navigate(['/recording', recording.id])]\n    );\n  }\n  \n  /*\n  private async addSongToPlaylist(song: SongInfo) {\n    const info = await this.data.getEventInfo(this.event.id);\n    const track = await this.data.getTrack(song, info);\n    if (track) this.player.addToPlaylist(track);\n  }\n\n\n private async addSongToPlaylist(song: SongInfo) {\n  const info = await this.data.getEventInfo(this.event.id);\n  const track = await this.data.getTrack(song, info);\n  if (track) this.player.addToPlaylist(track);\n}\n  */\n\n\n\nprivate async addTrackToPlaylist(song: SongInfo, recordingEtreeId: string, recordingId: string) {\n  const eventInfo = { \n    id: this.event.id,\n    date: this.event.date,\n    location: this.event.location.name,\n    state: '',\n    venue: this.event.venue.name,\n    recordings: this.event.recordings,\n    artifacts: null //this.artifacts\n  }\n  var songDetails = await this.data.getSong(song.id);\n  this.data.getTracks(songDetails, eventInfo, recordingEtreeId, recordingId)\n    .forEach(t => this.player.addToPlaylist(t));\n}\n  /*\n  private async addRecordingToPlaylist(recording: Recording) {\n    const info = await this.data.getEventInfo(this.event.id);\n    const tracks = await this.data.getRecordingTracks(recording, info);\n    if (tracks) tracks.forEach(t => this.player.addToPlaylist(t));\n  }\n*/\n\n  private async addRecordingToPlaylist(recording: Recording) {\n    //const info = await this.data.getEventInfo(this.event.id);\n    var tracklist = await this.data.getTracklist(recording.id);\n    tracklist.forEach(t =>{  // format to Audiotrack, take first song_id for now\n      if (t.song) {\n        t['id'] = t.song[0].song_id;\n        delete t.song;\n      }\n      t.track = t.track.toString();\n    })\n    //console.log(tracklist)\n    if (tracklist) tracklist.forEach(t => this.addRecordingTrackToPlaylist(t, recording));\n  }\n\n  private async addRecordingTrackToPlaylist(audio: AudioTrack, recording: Recording) {\n    //console.log(audio)\n    const track = this.data.toPlayerTrack(this.event.venue.name, \n                                          this.event.location.name, \n                                          this.event.date, \n                                          this.event.id,\n                                          recording.etreeId,\n                                          audio,\n                                          recording.id\n                                          );\n    this.player.addToPlaylist(track);\n  }\n  \n  onClickPhoto(p){\n    this.currentPhoto = p;\n    this.lightbox.openLightboxArray(this.photosLightbox, p.index)\n  }\n\n  onClickArtifact(a){\n    this.currentArtifact = a;\n    this.lightbox.openLightboxArray(this.artifactsLightbox, a.index)\n  }\n\n}\n","<div *ngIf=\"song\" fxLayout=\"column\">\n  <gd-header *ngIf=\"song\" title=\"{{ song.name }}\"\n    subtitle=\"{{ subtitle }}\" userId='{{ currentUser.userId }}'></gd-header>\n  <div fxLayout=\"column\" class=\"gd-container\">\n    \n    <div fxLayout=\"column\" fxFlex class=\"gd-container\">\n      <ng-container *ngIf=\"song.composedBy && song.composedBy.length\">\n        Composed by:\n        <div *ngFor=\"let a of song.composedBy\"\n          [routerLink]=\"['/artist', a.id]\">{{a.name}}</div><br/>\n      </ng-container>\n      <ng-container *ngIf=\"song.lyricsBy && song.lyricsBy.length\">\n        Lyrics by:\n        <div *ngFor=\"let a of song.lyricsBy\"\n          [routerLink]=\"['/artist', a.id]\">{{a.name}}</div><br/>\n      </ng-container>\n      <ng-container *ngIf=\"firstPlayed\">\n        First played on: {{ firstPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"lastPlayed\">\n        Last played on: {{ lastPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"timesPlayed\">\n        Number of performances: {{ timesPlayed }}<br/></ng-container>\n      <ng-container *ngIf=\"totalRecordings\">\n        Total number of recordings: {{ totalRecordings }}<br/></ng-container>\n    </div>\n    \n    <p class=\"gd-container\">All performances of {{song.name}}:</p>\n    \n    <gd-shows [eventIds]=\"song.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  </div>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"song.name\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import * as _ from 'lodash';\nimport { Component } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { SongDetails, DeadEventInfo } from '../services/types';\nimport { DataService } from '../services/data.service';\nimport { PlayerService } from '../services/player.service';\nimport { DialogService } from '../services/dialog.service';\nimport { AuthService } from '../auth.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-song',\n  templateUrl: './song.component.html'\n})\nexport class SongComponent {\n  \n  public song: SongDetails;\n  protected subtitle: string;\n  protected firstPlayed: string;\n  protected lastPlayed: string;\n  protected timesPlayed: number;\n  protected totalRecordings: number;\n  protected events: DeadEventInfo[];\n  public currentUser: any = { userName: '', userId: ''};\n\n  constructor(private data: DataService, private player: PlayerService,\n    private router: Router, private route: ActivatedRoute,\n    private dialog: DialogService, public auth: AuthService) {\n\n      \n\n    }\n\n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.song = await this.data.getSong(params.get('id'));\n        this.subtitle = _.uniq(this.song.composedBy.concat(this.song.lyricsBy)\n          .map(a => a.name)).join(', ');\n        this.events = await this.data.getEventInfos(this.song.eventIds);\n        if (this.events.length) {\n          this.firstPlayed = this.events[0].date;\n          this.lastPlayed = this.events[this.events.length-1].date;\n          this.timesPlayed = this.events.length;\n          this.totalRecordings = _.sum(this.events.map(e => e.recordings.length));\n        }\n      }\n      if (!this.song) {\n        this.router.navigate(['/song', (await this.data.getRandomSong()).id],\n          { replaceUrl: true });\n      }\n    });\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      this.song.name+\"', \"+event.venue+\", \"+event.date,\n      [\"Add to playlist\", \"Go to show\"],\n      [() => this.openRecordingsDialog(event),\n        () => this.router.navigate(['/show', event.id])]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+this.song.name+\"', \"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.addRecordingToPlaylist(r.etreeId, event, r.id))\n    );\n  }\n\n  private addRecordingToPlaylist(recordingEtreeId: string, event: DeadEventInfo, recordingId: string) {\n    this.data.getTracks(this.song, event, recordingEtreeId, recordingId)\n      .forEach(t => this.player.addToPlaylist(t));\n  }\n\n}\n","<gd-header title='{{ \"About\" }}'\n    subtitle='{{ \"\" }}' userId='{{ currentUser.userId }}'>\n  </gd-header>\n\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\">\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Lato\">\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\n<style>\ndiv {font-family: \"Lato\", sans-serif; color:rgb(59, 59, 59)}\na.disabled {\n  pointer-events: none;\n  cursor: default;\n}\n</style>\n\n\n<!-- Page content -->\n<div class=\"w3-content\" style=\"max-width:2000px;margin-top:32px\">\n\n  <!-- The Band Section -->\n  <div class=\"w3-container w3-content w3-center w3-padding-16\" style=\"max-width:800px\" id=\"top\">\n    <!-- <h2 class=\"w3-wide\" [routerLink]=\"['/mapselect']\">THE GRATEFUL DEAD CONCERT EXPLORER</h2> -->\n    <img src=\"/assets/gd_logo1_start.png\" class=\"w3-round w3-margin-bottom\" alt=\"grateful dead explorer logo\" style=\"width:65%\" [routerLink]=\"['/mapselect']\">\n    <p style=\"cursor:pointer\" class=\"w3-opacity\"><i><u routerLink=\"/mapselect\">click to enter</u></i></p>\n      </div>\n\n  <div class=\"w3-container w3-content w3-center\" style=\"max-width:800px\" id=\"overviewstart\">\n      <p class=\"w3-justify\">\n          The Grateful Dead Concert Explorer is a Web application that enables user to navigate and explore digital libraries of live music recordings and discover and share associated artifacts that are dynamically linked within the application. It aims to demonstrate how Semantic Audio and Linked Data technologies can produce an improved user experience for browsing and exploring live music collections, by collecting information from a variety of different Web sources and employing Music Information Retrieval (MIR) techniques. \n        </p>\n          <p class=\"w3-justify\">\n          This prototype demonstrator focuses on the concerts of the Grateful Dead, motivated by the ongoing interest in detailed descriptions of their performances, evidenced by the large amount of information available on the Web detailing various aspects of those events. The application links the large number of concert recordings by the Grateful Dead available in the Internet Archive with audio analysis data and retrieves additional information and artifacts (e.g. band lineup, photos, scans of tickets and posters, reviews) from existing Web sources, to explore and visualize the collection. The project demonstrates mechanisms for musicians and the music industry to provide services for consumers to enjoy live music performances recognizing the social and cultural value of live music and fan communities.\n      </p>\n      <p class=\"w3-justify\">\n        This is an ongoing project in its early stages and not yet optimzed for mobile devices. \n      </p>\n      <p class=\"w3-justify\">\n        The technologies exploited in this work that were developed in the <a href=\"http://www.semanticaudio.ac.uk/\" target=\"_blank\"><u>EPSRC FAST IMPACt</u></a> project include:\n      </p>\n      <ul class=\"w3-justify\">\n          <li>Ontological data models for the representation of performed music as cultural artifacts, and its linkage to associated non-musical artifacts</li>\n          <li>Music information retrieval and processing algorithms for the automatic generation of playlists and audio mixes based on user-selected criteria</li>\n          <li>Music-structure analysis for the comparison of performances</li>\n          <li>Audio alignment of different user-generated recordings of live-music performances</li>\n      </ul>\n      <p class=\"w3-justify\">\n      The main functions of the current version are described in the following. Clicking on the top left logo opens a menu with links to this start page and the <a href=\"#mapstart\"><u><i>Map View</i></u></a>.\n    </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"mapstart\">\n      <h3 class=\"w3-wide\">Map View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_map.png\" alt=\"map view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Map View</i> shows the world map with markers indicating the locations of concerts. Clicking on a marker opens a menu with links to the pages for the venue (<a href=\"#venuestart\"><u><i>Venue View</i></u></a>), and to the pages for the concerts at that location (<a href=\"#showstart\"><u><i>Show View</i></u></a>). While by default all concert locations are displayed, specific tours can be selected from the pull-down menu on the top left. When selecting a tour, only the concerts from the tour are displayed on the map and connected by arrows indicating the order of concerts. The map also has a separate search function covering the concerts on the map.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"showstart\">\n      <h3 class=\"w3-wide\">Show View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_show.png\" alt=\"show view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Show View</i>&nbsp; shows information about a specific concert, including the location, venue, the setlist, the lineup and the additional recordings available in the archive. The button next to the recording IDs opens a dialogue to either go to the <a href=\"#recordingstart\"><u><i>Recording View</i></u></a>&nbsp; for the selected recording, or add all songs of the concert recording to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. One can navigate to other pages by clicking on any item, for instance, clicking on the venue opens the <a href=\"#venuestart\"><u><i>Venue View</i></u></a>&nbsp; for the respective venue. Clicking on the button next to a song opens a dialogue to either go to the <a href=\"#songstart\"><u><i>Song View</i></u></a>&nbsp; or add the song to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. Clicking on photos or other artifacts either opens a higher resolution image or opens the source page at the <a href=\"https://www.gdao.org/\" target=\"_blank\"><u>Grateful Dead Archive Online (GDAO)</u></a> in a new tab.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"songstart\">\n      <h3 class=\"w3-wide\">Song View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_song.png\" alt=\"song view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Song View</i> shows information about a selected song. This includes the composers at the top of the page and the number of performances and recordings available. Clicking on an item in the list of shows opens the <a href=\"#showstart\"><u><i>Show View</i></u></a>. The button next to the location opens a dialogue which additionally lets the user add the song from the respective show to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. The dialogue shows all available recordings from the selected concert.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"locationstart\">\n      <h3 class=\"w3-wide\">Location View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_location.png\" alt=\"location view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Location View</i> shows information about a city where concerts were held. The list of shows provides links to the <a href=\"#showstart\"><u><i>Show View</i></u></a>&nbsp; for all shows at that location.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"venuestart\">\n      <h3 class=\"w3-wide\">Venue View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_venue.png\" alt=\"venue view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n          The <i>Venue View</i> shows information about a venue where concerts were held. The list of shows provides links to the <a href=\"#showstart\"><u><i>Show View</i></u></a>&nbsp; for all shows at that venue.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"recordingstart\">\n      <h3 class=\"w3-wide\">Recording View</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_recording.png\" alt=\"recording view\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The <i>Recording View</i> shows information about a specific recording from the <a href=\"https://archive.org/details/etree\" target=\"_blank\"><u>Live Music Archive</u></a> at the <a href=\"https://archive.org/\" target=\"_blank\"><u>Internet Archive</u></a>. The information includes source and lineage information of the recording, as well as the list of songs. Clicking on the button next to a song opens a dialogue to add the selected song to the playlist of the <a href=\"#playerstart\"><u>audio player</u></a>. Clicking on the logo under the track list opens the page for the recording at the <a href=\"https://archive.org/\" target=\"_blank\"><u>Internet Archive</u></a> in a new tab.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"playerstart\">\n      <h3 class=\"w3-wide\">Audio Player</h3>\n      <img class=\"image w3-round w3-margin-bottom\" lazyLoad=\"/assets/screens/scr_player.png\" alt=\"audio player\" style=\"width:90%\">\n      <p class=\"w3-justify\">\n        The audio player at the bottom of the page streams audio directly from the <a href=\"https://archive.org/details/etree\" target=\"_blank\"><u>Live Music Archive</u></a>. Songs can be added to the playlist from the Web application where songs are listed, for instance in the <a href=\"#showstart\"><u><i>Show View</i></u></a>, <a href=\"#recordingstart\"><u><i>Recording View</i></u></a>&nbsp; or <a href=\"#songstart\"><u><i>Song View</i></u></a>. In addition to the standard functions (play, stop, volume, etc.), the button with the eye symbol expands/hides the waveform view and playlist.\n      </p>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-32\" style=\"max-width:800px\" id=\"additionalstart\">\n      <h3 class=\"w3-wide\">Additional Functions</h3>\n      <p class=\"w3-justify\">\n        Not all functions of the demo application are listed here, and there are more functions planned to be implemented in the near future including social media aspects and MIR, e.g. user discussions of concerts and the automatic generation of playlist mixes based on user-defined parameters and audio feature analysis results. \n      </p>\n        <p class=\"w3-justify\">\n          <s>A demo of a an automated mix playing excerpts of recordings of a specified song spanning the career of the Grateful Dead in a seamless mix while retrieving and displaying artifacts in real-time can be found <a class=\"disabled\" href=\"https://grateful-dead-live.github.io/plunderphonics/\" target=\"_blank\"><u><b>here</b></u></a>.</s> &nbsp; <b><i>down for maintenance</i></b>\n      </p>\n      <p class=\"w3-justify\">\n        Here is a demo video of a an automated mix playing excerpts of recordings of a specified song spanning the career of the Grateful Dead in a seamless mix while retrieving and displaying artifacts in real-time:\n      </p>\n      <div style=\"position:relative;padding-top:56.25%;\">\n        <iframe src=\"https://www.youtube.com/embed/M-zvJYRhnL8\" allowfullscreen style=\"position:absolute;top:0;left:0;width:100%;height:100%;\"></iframe>\n      </div>\n  </div>\n\n  <div class=\"w3-container w3-content w3-center w3-padding-16\" style=\"max-width:800px\" id=\"logostart\">\n      <a href=\"https://archive.org\" target=\"_blank\"> <img src=\"https://archive.org/images/glogo.png\" class=\"w3-round w3-margin-right\" alt=\"internet archive logo\" style=\"width:8%\"></a>\n      <a href=\"http://c4dm.eecs.qmul.ac.uk\" target=\"_blank\"> <img src=\"https://sites.google.com/site/mathemusicalconversations/_/rsrc/1396930666900/about/c4dm_qml-logo.jpg\" class=\"w3-round w3-margin-right w3-margin-left\" alt=\"c4dm qmul logo\" style=\"width:18%\"></a>\n      <a href=\"https://epsrc.ukri.org/\" target=\"_blank\"> <img src=\"/assets/epsrc.jpg\" class=\"w3-round w3-margin-right w3-margin-left\" alt=\"epsrc logo\" style=\"width:17%\"></a>\n      <a href=\"https://www.gdao.org\" target=\"_blank\"> <img src=\"https://www.gdao.org/themes/gdao-theme/images/logo-gdao.png\" class=\"w3-round w3-margin-left\" alt=\"gdao logo\" style=\"width:8%\"></a>\n  </div>\n  \n  <div class=\"w3-container w3-content w3-center\" style=\"max-width:800px\" id=\"emailstart\">\n      <!--a href=\"{{ 'mai' + 'lto' + ':' + part1 + part2 + part3 + part4 + part5 + part6 + part7 }}\"><u>Email us</u> </a-->\n      <a href=\"{{ 'mai' + 'lto' + ':' + email }}\"><u>Email us</u> </a>\n  </div>\n  \n  <p style=\"padding: 0 0 5em 0\"></p>\n<!-- End Page Content -->\n</div>\n\n","import { Component } from '@angular/core';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { AuthService } from '../auth.service';\nimport { EMAILADDRESS, DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-start',\n  templateUrl: './start.component.html'\n})\nexport class StartComponent {\n\n  public currentUser: any = { userName: '', userId: ''};\n  public email: string;\n  \n  constructor(private sanitizer: DomSanitizer,\n    public auth: AuthService) {\n\n      \n\n    }\n\n  ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n    /*\n    if (this.route.snapshot.data['loggedIn']) {\n      this.auth.userProfile$.subscribe(userProfile => {\n        this.currentUser = this.resolve.getUser(userProfile);\n      });\n      console.log(this.currentUser);\n    }\n    */\n\n    this.email = EMAILADDRESS;\n\n  }\n\n}\n","<div *ngIf=\"venue\" fxLayout=\"column\">\n  <gd-header *ngIf=\"venue\" title='{{ venue.name }}'\n    subtitle='{{ location }}' imageUrl=\"{{ venue.image }}\" userId='{{ currentUser.userId }}'>\n  </gd-header>\n  <div class=\"container\" fxLayout=\"row wrap\" fxLayout.xs=\"column\" fxFlex=\"100\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <p *ngIf=\"data.event\">The Band played on {{ data.event.date }}</p>\n      <p>{{ venue.comment }}</p>\n    </div>\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 50%\">\n      <img class=\"image\" [lazyLoad]=\"venue.thumbnail\" fxFlex=\"1 1 auto\">\n    </div>\n    <div *ngIf=\"venue.geoloc\" class=\"gd-container\" fxLayout=\"column\" fxFlex=\"1 1 33%\" fxFlex.sm=\"1 1 100%\">\n      <gd-map fxFlex=\"1 1 auto\" [style.height]=\"'100%'\" zoom=\"15\"\n        latitude=\"{{ venue.geoloc.lat }}\" longitude=\"{{ venue.geoloc.long }}\"></gd-map>\n    </div>\n  </div>\n\n  <div *ngIf=\"videos\">\n    <div class=\"gd-container\" fxLayout=\"column\" fxFlex=\"50\">\n      <gd-youtube videoId=\"{{ currentVideoId }}\" width=\"100%\"></gd-youtube>\n      <ng-select bindLabel=\"title\"\n                 [clearable]=\"false\"\n                 (change)=\"selectVideo()\"\n                 [searchable]=\"false\"\n                 [(ngModel)]=\"currentVideoId\">         \n        <ng-option [value]=\"v.videoId\" *ngFor=\"let v of videos\">\n            <img src=\"{{v.thumbnail}}\" height=\"40px\"/>\n            {{v.title}}\n        </ng-option>\n      </ng-select>\n    </div>\n  </div>\n  \n  <p class=\"gd-section\">All shows at the {{ venue.name }}:</p>\n  \n  <gd-shows [eventIds]=\"venue.eventIds\" [onOptions]=\"openOptionsDialog.bind(this)\"></gd-shows>\n  <gd-comments [userName]=\"currentUser.userName\" [currentUserId]=\"currentUser.userId\" [title]=\"venue.name+', '+location\"></gd-comments>\n  <br>\n  <gd-sharebuttons></gd-sharebuttons>\n</div>\n<p [style.margin-bottom]=\"'75px'\"></p>","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { Venue } from '../services/types';\nimport { AuthService } from '../auth.service';\nimport { DeadEventInfo } from '../services/types';\nimport { DialogService } from '../services/dialog.service';\nimport { DEBUG } from '../config';\n\nconsole.log = function(s){\n  if (DEBUG) {\n    console.warn(s);\n  }; \n};\n\ndeclare let gtag: Function;\n\n@Component({\n  selector: 'gd-venue',\n  templateUrl: './venue.component.html'\n})\nexport class VenueComponent {\n  public venue: Venue;\n  protected location: string;\n  public videos: any;\n  public currentVideoId: string;\n\n  protected currentUser: any = { userName: '', userId: ''};\n  \n  constructor(protected data: DataService, private router: Router,\n    private route: ActivatedRoute, public auth: AuthService, private dialog: DialogService) {}\n  \n  async ngOnInit() {\n    this.auth.userProfile$.subscribe(userProfile => {\n      if (userProfile){\n        this.currentUser = {\n          userId: userProfile.sub.split(\"|\")[1],\n          userName: userProfile['http://example.com/username']\n        }\n        gtag('set', {'user_id': this.currentUser.userId});\n      }\n    });\n\n    this.route.paramMap.subscribe(async params => {\n      if (params.has('id')) {\n        this.venue = await this.data.getVenue(params.get('id'));\n        this.location = (await this.data.getEventInfo(this.venue.eventIds[0])).location;\n        if (this.venue) {\n          this.videos = await this.data.getYoutubeList(this.venue.id, ['Grateful Dead', this.location, this.venue.name]);\n          this.currentVideoId = this.videos[0].videoId;\n          console.log(this.videos);\n        }\n      }\n      if (!this.venue) {\n        this.router.navigate(['/venue', (await this.data.getRandomVenue()).id],\n          { replaceUrl: true });\n      }\n    });\n  }\n\n  protected openOptionsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      event.venue+\", \"+event.date,\n      [\"Go to show\", \"Go to recording\"],\n      [() => this.router.navigate(['/show', event.id]),\n        () => this.openRecordingsDialog(event)]\n    );\n  }\n\n  private openRecordingsDialog(event: DeadEventInfo) {\n    this.dialog.openMultiFunction(\n      \"Recordings of '\"+event.venue+\", \"+event.date,\n      event.recordings.map(r => r.etreeId),\n      event.recordings.map(r => () => this.router.navigate(['/recording', r.id]) )\n    );\n  }\n\n  selectVideo(){\n    console.log(this.currentVideoId);\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","\n// From http://www.tutorialspoint.com/javascript/array_map.htm\n\nif (!Array.prototype.map)\n{\n  Array.prototype.map = function(fun /*, thisp*/)\n  {\n    var len = this.length;\n    if (typeof fun !== \"function\")\n      throw new TypeError();\n\n    var res = new Array(len);\n    var thisp = arguments[1];\n    for (var i = 0; i < len; i++)\n    {\n      if (i in this)\n        res[i] = fun.call(thisp, this[i], i, this);\n    }\n\n    return res;\n  };\n}\n\nL.Control.FuseSearch = L.Control.extend({\n    \n    includes: L.Evented.prototype,\n    \n    options: {\n        position: 'topright',\n        title: 'Search',\n        panelTitle: '',\n        placeholder: 'Search',\n        caseSensitive: false,\n        threshold: 0.3,\n        maxResultLength: null,\n        showResultFct: null,\n        showInvisibleFeatures: true,\n        shouldSort: true\n    },\n    \n    initialize: function(options) {\n        L.setOptions(this, options);\n        this._panelOnLeftSide = (this.options.position.indexOf(\"left\") !== -1);\n    },\n    \n    onAdd: function(map) {\n        \n        var ctrl = this._createControl();\n        this._createPanel(map);\n        this._setEventListeners();\n        map.invalidateSize();\n        \n        return ctrl;\n    },\n    \n    onRemove: function(map) {\n        \n        this.hidePanel(map);\n        this._clearEventListeners();\n        this._clearPanel(map);\n        this._clearControl();\n        \n        return this;\n    },\n    \n    _createControl: function() {\n\n        var className = 'leaflet-fusesearch-control',\n            container = L.DomUtil.create('div', className);\n\n        // Control to open the search panel\n        var butt = this._openButton = L.DomUtil.create('a', 'button', container);\n        butt.href = '#';\n        butt.title = this.options.title;\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.on(butt, 'click', stop)\n                  .on(butt, 'mousedown', stop)\n                  .on(butt, 'touchstart', stop)\n                  .on(butt, 'mousewheel', stop)\n                  .on(butt, 'MozMousePixelScroll', stop);\n        L.DomEvent.on(butt, 'click', L.DomEvent.preventDefault);\n        L.DomEvent.on(butt, 'click', this.showPanel, this);\n\n        return container;\n    },\n    \n    _clearControl: function() {\n        // Unregister events to prevent memory leak\n        var butt = this._openButton;\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.off(butt, 'click', stop)\n                  .off(butt, 'mousedown', stop)\n                  .off(butt, 'touchstart', stop)\n                  .off(butt, 'mousewheel', stop)\n                  .off(butt, 'MozMousePixelScroll', stop);\n        L.DomEvent.off(butt, 'click', L.DomEvent.preventDefault);\n        L.DomEvent.off(butt, 'click', this.showPanel);\n    },\n    \n    _createPanel: function(map) {\n        var _this = this;\n\n        // Create the search panel\n        var mapContainer = map.getContainer();\n        var className = 'leaflet-fusesearch-panel',\n            pane = this._panel = L.DomUtil.create('div', className, mapContainer);\n        \n        // Make sure we don't drag the map when we interact with the content\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.on(pane, 'click', stop)\n                .on(pane, 'dblclick', stop)\n                .on(pane, 'mousedown', stop)\n                .on(pane, 'touchstart', stop)\n                .on(pane, 'mousewheel', stop)\n                .on(pane, 'MozMousePixelScroll', stop);\n\n        // place the pane on the same side as the control\n        if (this._panelOnLeftSide) {\n            L.DomUtil.addClass(pane, 'left');\n        } else {\n            L.DomUtil.addClass(pane, 'right');\n        }\n\n        // Intermediate container to get the box sizing right\n        var container = L.DomUtil.create('div', 'content', pane);\n        \n        var header = L.DomUtil.create('div', 'header', container);\n        if (this.options.panelTitle) {\n           var title = L.DomUtil.create('p', 'panel-title', header);\n            title.innerHTML = this.options.panelTitle;\n        }\n        \n        // Search image and input field\n        L.DomUtil.create('img', 'search-image', header);\n        this._input = L.DomUtil.create('input', 'search-input', header);\n        this._input.maxLength = 30;\n        this._input.placeholder = this.options.placeholder;\n        this._input.onkeyup = function(evt) {\n            var searchString = evt.currentTarget.value;\n            _this.searchFeatures(searchString);\n        };\n\n        // Close button\n        var close = this._closeButton = L.DomUtil.create('a', 'close', header);\n        close.innerHTML = '&times;';\n        L.DomEvent.on(close, 'click', this.hidePanel, this);\n        \n        // Where the result will be listed\n        this._resultList = L.DomUtil.create('div', 'result-list', container); \n        \n        return pane;\n    },\n    \n    _clearPanel: function(map) {\n\n        // Unregister event handlers\n        var stop = L.DomEvent.stopPropagation;\n        L.DomEvent.off(this._panel, 'click', stop)\n                  .off(this._panel, 'dblclick', stop)\n                  .off(this._panel, 'mousedown', stop)\n                  .off(this._panel, 'touchstart', stop)\n                  .off(this._panel, 'mousewheel', stop)\n                  .off(this._panel, 'MozMousePixelScroll', stop);\n\n        L.DomEvent.off(this._closeButton, 'click', this.hidePanel);\n        \n        var mapContainer = map.getContainer();\n        mapContainer.removeChild(this._panel);\n        \n        this._panel = null;\n    },\n    \n    _setEventListeners : function() {\n        var that = this;\n        var input = this._input;\n        this._map.addEventListener('overlayadd', function() {\n            that.searchFeatures(input.value);\n        });\n        this._map.addEventListener('overlayremove', function() {\n            that.searchFeatures(input.value);\n        });\n    },\n    \n    _clearEventListeners: function() {\n        this._map.removeEventListener('overlayadd');\n        this._map.removeEventListener('overlayremove');        \n    },\n    \n    isPanelVisible: function () {\n        return L.DomUtil.hasClass(this._panel, 'visible');\n    },\n\n    showPanel: function () {\n        if (! this.isPanelVisible()) {\n            L.DomUtil.addClass(this._panel, 'visible');\n            // Preserve map centre\n            this._map.panBy([this.getOffset() * 0.5, 0], {duration: 0.5});\n            this.fire('show');\n            this._input.select();\n            // Search again as visibility of features might have changed\n            this.searchFeatures(this._input.value);\n        }\n    },\n\n    hidePanel: function (e) {\n        if (this.isPanelVisible()) {\n            L.DomUtil.removeClass(this._panel, 'visible');\n            // Move back the map centre - only if we still hold this._map\n            // as this might already have been cleared up by removeFrom()\n            if (null !== this._map) {\n                this._map.panBy([this.getOffset() * -0.5, 0], {duration: 0.5});\n            };\n            this.fire('hide');\n            if(e) {\n                L.DomEvent.stopPropagation(e);\n            }\n        }\n    },\n    \n    getOffset: function() {\n        if (this._panelOnLeftSide) {\n            return - this._panel.offsetWidth;\n        } else {\n            return this._panel.offsetWidth;\n        }\n    },\n\n    indexFeatures: function(data, keys) {\n\n        var jsonFeatures = data.features || data;\n        \n        this._keys = keys;\n        var properties = jsonFeatures.map(function(feature) {\n            // Keep track of the original feature\n            feature.properties._feature = feature;\n            return feature.properties;\n        });\n        \n        var options = {\n            keys: keys,\n            caseSensitive: this.options.caseSensitive,\n            threshold : this.options.threshold\n        };\n        \n        this._fuseIndex = new Fuse(properties, options);\n    },\n    \n    searchFeatures: function(string) {\n        \n        var result = this._fuseIndex.search(string);\n\n        // Empty result list\n        var listItems = document.querySelectorAll(\".result-item\");\n        for (var i = 0 ; i < listItems.length ; i++) {\n            listItems[i].remove();\n        }\n\n        var resultList = document.querySelector('.result-list');\n        var num = 0;\n        var max = this.options.maxResultLength;\n        for (var i in result) {\n            var props = result[i].item;         // fix: added .item\n            var feature = props._feature;\n            var popup = this._getFeaturePopupIfVisible(feature);\n            \n            if (undefined !== popup || this.options.showInvisibleFeatures) {\n                this.createResultItem(props, resultList, popup);\n                if (undefined !== max && ++num === max)\n                    break;\n            }\n        }\n    },\n    \n    refresh: function() {\n        // Reapply the search on the indexed features - useful if features have been filtered out\n        if (this.isPanelVisible()) {\n            this.searchFeatures(this._input.value);\n        }\n    },\n    \n    _getFeaturePopupIfVisible: function(feature) {\n        var layer = feature.layer;\n        if (undefined !== layer && this._map.hasLayer(layer)) {\n            return layer.getPopup();\n        }\n    },\n    \n    createResultItem: function(props, container, popup) {\n\n        var _this = this;\n        var feature = props._feature;\n\n        // Create a container and open the associated popup on click\n        var resultItem = L.DomUtil.create('p', 'result-item', container);\n        \n        if (undefined !== popup) {\n            L.DomUtil.addClass(resultItem, 'clickable');\n            resultItem.onclick = function() {\n                \n                if (window.matchMedia(\"(max-width:480px)\").matches) {\n                    _this.hidePanel();\n                    feature.layer.openPopup();\n                } else {\n                    _this._panAndPopup(feature, popup);\n                }\n            };\n        }\n\n        // Fill in the container with the user-supplied function if any,\n        // otherwise display the feature properties used for the search.\n        if (null !== this.options.showResultFct) {\n            this.options.showResultFct(feature, resultItem);\n        } else {\n            str = '<b>' + props[this._keys[0]] + '</b>';\n            for (var i = 1; i < this._keys.length; i++) {\n                str += '<br/>' + props[this._keys[i]];\n            }\n            resultItem.innerHTML = str;\n        };\n\n        return resultItem;\n    },\n    \n    _panAndPopup : function(feature, popup) {\n        // Temporarily adapt the map padding so that the popup is not hidden by the search pane\n        if (this._panelOnLeftSide) {\n            var oldPadding = popup.options.autoPanPaddingTopLeft;\n            var newPadding = new L.Point(- this.getOffset(), 10);\n            popup.options.autoPanPaddingTopLeft = newPadding;\n            feature.layer.openPopup();\n            popup.options.autoPanPaddingTopLeft = oldPadding;\n        } else {\n            var oldPadding = popup.options.autoPanPaddingBottomRight;\n            var newPadding = new L.Point(this.getOffset(), 10);\n            popup.options.autoPanPaddingBottomRight = newPadding;\n            feature.layer.openPopup();\n            popup.options.autoPanPaddingBottomRight = oldPadding;\n        }\n    }\n});\n\nL.control.fuseSearch = function(options) {\n    return new L.Control.FuseSearch(options);\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}